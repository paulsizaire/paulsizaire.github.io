import{S as Ae,i as Ne,s as Te,C as _s,k as N,l as T,m as M,h as w,n as x,b as G,D as vs,E as ys,F as ws,g as ee,d as le,q as R,a as j,T as Ct,r as D,c as tt,U as It,V as Lr,p as ct,Q as _,P as dt,W as ue,u as lt,e as re,v as bs,f as xs,X as ii,y as dn,z as pn,A as gn,B as mn,w as vr,Y as yr,M as Es,R as Et,Z as wr,N as ks,_ as oi,$ as Ms,a0 as si,o as Ss,a1 as As}from"../chunks/index.c1763171.js";import{c as Ke,o as Pe}from"../chunks/store.92367abe.js";function Oe(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ns(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vo(t){let e,n,r;t.length!==2?(e=Oe,n=(a,l)=>Oe(t(a),l),r=(a,l)=>t(a)-l):(e=t===Oe||t===Ns?t:Ts,n=t,r=t);function i(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<0?c=f+1:u=f}while(c<u)}return c}function o(a,l,c=0,u=a.length){if(c<u){if(e(l,l)!==0)return u;do{const f=c+u>>>1;n(a[f],l)<=0?c=f+1:u=f}while(c<u)}return c}function s(a,l,c=0,u=a.length){const f=i(a,l,c,u-1);return f>c&&r(a[f-1],l)>-r(a[f],l)?f-1:f}return{left:i,center:s,right:o}}function Ts(){return 0}function Cs(t){return t===null?NaN:+t}const Is=vo(Oe),$s=Is.right;vo(Cs).center;const Ps=$s;class Be{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],s=e+o,a=Math.abs(e)<Math.abs(o)?e-(s-o):o-(s-e);a&&(n[r++]=a),e=s}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,o,s=0;if(n>0){for(s=e[--n];n>0&&(r=s,i=e[--n],s=r+i,o=i-(s-r),!o););n>0&&(o<0&&e[n-1]<0||o>0&&e[n-1]>0)&&(i=o*2,r=s+i,i==r-s&&(s=r))}return s}}class br extends Map{constructor(e,n=Ds){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ai(this,e))}has(e){return super.has(ai(this,e))}set(e,n){return super.set(zs(this,e),n)}delete(e){return super.delete(Rs(this,e))}}function ai({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function zs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Rs({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Ds(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Fs=Math.sqrt(50),Vs=Math.sqrt(10),Os=Math.sqrt(2);function On(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),s=o>=Fs?10:o>=Vs?5:o>=Os?2:1;let a,l,c;return i<0?(c=Math.pow(10,-i)/s,a=Math.round(t*c),l=Math.round(e*c),a/c<t&&++a,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*s,a=Math.round(t/c),l=Math.round(e/c),a*c<t&&++a,l*c>e&&--l),l<a&&.5<=n&&n<2?On(t,e,n*2):[a,l,c]}function qs(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,s]=r?On(e,t,n):On(t,e,n);if(!(o>=i))return[];const a=o-i+1,l=new Array(a);if(r)if(s<0)for(let c=0;c<a;++c)l[c]=(o-c)/-s;else for(let c=0;c<a;++c)l[c]=(o-c)*s;else if(s<0)for(let c=0;c<a;++c)l[c]=(i+c)/-s;else for(let c=0;c<a;++c)l[c]=(i+c)*s;return l}function xr(t,e,n){return e=+e,t=+t,n=+n,On(t,e,n)[2]}function Bs(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?xr(e,t,n):xr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Us(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Ls(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Hs(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function Xs(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function tn(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,r)=>e(n,r,t))}var Ys={value:()=>{}};function Hr(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zn(n)}function zn(t){this._=t}function Gs(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zn.prototype=Hr.prototype={constructor:zn,on:function(t,e){var n=this._,r=Gs(t+"",n),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(t=r[o]).type)&&(i=Ks(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=li(n[i],t.name,e);else if(e==null)for(i in n)n[i]=li(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new zn(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Ks(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function li(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ys,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Er="http://www.w3.org/1999/xhtml";const ui={svg:"http://www.w3.org/2000/svg",xhtml:Er,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ui.hasOwnProperty(e)?{space:ui[e],local:t}:t}function Ws(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Er&&e.documentElement.namespaceURI===Er?e.createElement(t):e.createElementNS(n,t)}}function Zs(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Xr(t){var e=nr(t);return(e.local?Zs:Ws)(e)}function Qs(){}function Yr(t){return t==null?Qs:function(){return this.querySelector(t)}}function Js(t){typeof t!="function"&&(t=Yr(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),l,c,u=0;u<s;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new Ft(r,this._parents)}function js(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ta(){return[]}function yo(t){return t==null?ta:function(){return this.querySelectorAll(t)}}function ea(t){return function(){return js(t.apply(this,arguments))}}function na(t){typeof t=="function"?t=ea(t):t=yo(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s=e[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&(r.push(t.call(l,l.__data__,c,s)),i.push(l));return new Ft(r,i)}function wo(t){return function(){return this.matches(t)}}function bo(t){return function(e){return e.matches(t)}}var ra=Array.prototype.find;function ia(t){return function(){return ra.call(this.children,t)}}function oa(){return this.firstElementChild}function sa(t){return this.select(t==null?oa:ia(typeof t=="function"?t:bo(t)))}var aa=Array.prototype.filter;function la(){return Array.from(this.children)}function ua(t){return function(){return aa.call(this.children,t)}}function ca(t){return this.selectAll(t==null?la:ua(typeof t=="function"?t:bo(t)))}function fa(t){typeof t!="function"&&(t=wo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new Ft(r,this._parents)}function xo(t){return new Array(t.length)}function ha(){return new Ft(this._enter||this._groups.map(xo),this._parents)}function qn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}qn.prototype={constructor:qn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function da(t){return function(){return t}}function pa(t,e,n,r,i,o){for(var s=0,a,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new qn(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function ga(t,e,n,r,i,o,s){var a,l,c=new Map,u=e.length,f=o.length,h=new Array(u),g;for(a=0;a<u;++a)(l=e[a])&&(h[a]=g=s.call(l,l.__data__,a,e)+"",c.has(g)?i[a]=l:c.set(g,l));for(a=0;a<f;++a)g=s.call(t,o[a],a,o)+"",(l=c.get(g))?(r[a]=l,l.__data__=o[a],c.delete(g)):n[a]=new qn(t,o[a]);for(a=0;a<u;++a)(l=e[a])&&c.get(h[a])===l&&(i[a]=l)}function ma(t){return t.__data__}function _a(t,e){if(!arguments.length)return Array.from(this,ma);var n=e?ga:pa,r=this._parents,i=this._groups;typeof t!="function"&&(t=da(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],f=i[c],h=f.length,g=va(t.call(u,u&&u.__data__,c,r)),y=g.length,d=a[c]=new Array(y),v=s[c]=new Array(y),p=l[c]=new Array(h);n(u,f,d,v,p,g,e);for(var b=0,k=0,E,S;b<y;++b)if(E=d[b]){for(b>=k&&(k=b+1);!(S=v[k])&&++k<y;);E._next=S||null}}return s=new Ft(s,r),s._enter=a,s._exit=l,s}function va(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ya(){return new Ft(this._exit||this._groups.map(xo),this._parents)}function wa(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function ba(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var c=n[l],u=r[l],f=c.length,h=a[l]=new Array(f),g,y=0;y<f;++y)(g=c[y]||u[y])&&(h[y]=g);for(;l<i;++l)a[l]=n[l];return new Ft(a,this._parents)}function xa(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function Ea(t){t||(t=ka);function e(f,h){return f&&h?t(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s=n[o],a=s.length,l=i[o]=new Array(a),c,u=0;u<a;++u)(c=s[u])&&(l[u]=c);l.sort(e)}return new Ft(i,this._parents).order()}function ka(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ma(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Sa(){return Array.from(this)}function Aa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function Na(){let t=0;for(const e of this)++t;return t}function Ta(){return!this.node()}function Ca(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,s=i.length,a;o<s;++o)(a=i[o])&&t.call(a,a.__data__,o,i);return this}function Ia(t){return function(){this.removeAttribute(t)}}function $a(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pa(t,e){return function(){this.setAttribute(t,e)}}function za(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ra(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Da(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Fa(t,e){var n=nr(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?$a:Ia:typeof e=="function"?n.local?Da:Ra:n.local?za:Pa)(n,e))}function Eo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Va(t){return function(){this.style.removeProperty(t)}}function Oa(t,e,n){return function(){this.style.setProperty(t,e,n)}}function qa(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Ba(t,e,n){return arguments.length>1?this.each((e==null?Va:typeof e=="function"?qa:Oa)(t,e,n??"")):Ue(this.node(),t)}function Ue(t,e){return t.style.getPropertyValue(e)||Eo(t).getComputedStyle(t,null).getPropertyValue(e)}function Ua(t){return function(){delete this[t]}}function La(t,e){return function(){this[t]=e}}function Ha(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Xa(t,e){return arguments.length>1?this.each((e==null?Ua:typeof e=="function"?Ha:La)(t,e)):this.node()[t]}function ko(t){return t.trim().split(/^|\s+/)}function Gr(t){return t.classList||new Mo(t)}function Mo(t){this._node=t,this._names=ko(t.getAttribute("class")||"")}Mo.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function So(t,e){for(var n=Gr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ao(t,e){for(var n=Gr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ya(t){return function(){So(this,t)}}function Ga(t){return function(){Ao(this,t)}}function Ka(t,e){return function(){(e.apply(this,arguments)?So:Ao)(this,t)}}function Wa(t,e){var n=ko(t+"");if(arguments.length<2){for(var r=Gr(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Ka:e?Ya:Ga)(n,e))}function Za(){this.textContent=""}function Qa(t){return function(){this.textContent=t}}function Ja(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ja(t){return arguments.length?this.each(t==null?Za:(typeof t=="function"?Ja:Qa)(t)):this.node().textContent}function tl(){this.innerHTML=""}function el(t){return function(){this.innerHTML=t}}function nl(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function rl(t){return arguments.length?this.each(t==null?tl:(typeof t=="function"?nl:el)(t)):this.node().innerHTML}function il(){this.nextSibling&&this.parentNode.appendChild(this)}function ol(){return this.each(il)}function sl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function al(){return this.each(sl)}function ll(t){var e=typeof t=="function"?t:Xr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ul(){return null}function cl(t,e){var n=typeof t=="function"?t:Xr(t),r=e==null?ul:typeof e=="function"?e:Yr(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function fl(){var t=this.parentNode;t&&t.removeChild(this)}function hl(){return this.each(fl)}function dl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gl(t){return this.select(t?pl:dl)}function ml(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _l(t){return function(e){t.call(this,e,this.__data__)}}function vl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function yl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function wl(t,e,n){return function(){var r=this.__on,i,o=_l(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function bl(t,e,n){var r=vl(t+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(i=0,u=a[l];i<o;++i)if((s=r[i]).type===u.type&&s.name===u.name)return u.value}return}for(a=e?wl:yl,i=0;i<o;++i)this.each(a(r[i],e,n));return this}function No(t,e,n){var r=Eo(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function xl(t,e){return function(){return No(this,t,e)}}function El(t,e){return function(){return No(this,t,e.apply(this,arguments))}}function kl(t,e){return this.each((typeof e=="function"?El:xl)(t,e))}function*Ml(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var To=[null];function Ft(t,e){this._groups=t,this._parents=e}function xn(){return new Ft([[document.documentElement]],To)}function Sl(){return this}Ft.prototype=xn.prototype={constructor:Ft,select:Js,selectAll:na,selectChild:sa,selectChildren:ca,filter:fa,data:_a,enter:ha,exit:ya,join:wa,merge:ba,selection:Sl,order:xa,sort:Ea,call:Ma,nodes:Sa,node:Aa,size:Na,empty:Ta,each:Ca,attr:Fa,style:Ba,property:Xa,classed:Wa,text:ja,html:rl,raise:ol,lower:al,append:ll,insert:cl,remove:hl,clone:gl,datum:ml,on:bl,dispatch:kl,[Symbol.iterator]:Ml};function Bt(t){return typeof t=="string"?new Ft([[document.querySelector(t)]],[document.documentElement]):new Ft([[t]],To)}function Al(t){return Bt(Xr(t).call(document.documentElement))}function Nl(t){let e;for(;e=t.sourceEvent;)t=e;return t}function we(t,e){if(t=Nl(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const kr={capture:!0,passive:!1};function Mr(t){t.preventDefault(),t.stopImmediatePropagation()}function Tl(t){var e=t.document.documentElement,n=Bt(t).on("dragstart.drag",Mr,kr);"onselectstart"in e?n.on("selectstart.drag",Mr,kr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Cl(t,e){var n=t.document.documentElement,r=Bt(t).on("dragstart.drag",null);e&&(r.on("click.drag",Mr,kr),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Kr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Co(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function En(){}var _n=.7,Bn=1/_n,qe="\\s*([+-]?\\d+)\\s*",vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ne="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Il=/^#([0-9a-f]{3,8})$/,$l=new RegExp(`^rgb\\(${qe},${qe},${qe}\\)$`),Pl=new RegExp(`^rgb\\(${ne},${ne},${ne}\\)$`),zl=new RegExp(`^rgba\\(${qe},${qe},${qe},${vn}\\)$`),Rl=new RegExp(`^rgba\\(${ne},${ne},${ne},${vn}\\)$`),Dl=new RegExp(`^hsl\\(${vn},${ne},${ne}\\)$`),Fl=new RegExp(`^hsla\\(${vn},${ne},${ne},${vn}\\)$`),ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Kr(En,ce,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fi,formatHex:fi,formatHex8:Vl,formatHsl:Ol,formatRgb:hi,toString:hi});function fi(){return this.rgb().formatHex()}function Vl(){return this.rgb().formatHex8()}function Ol(){return Io(this).formatHsl()}function hi(){return this.rgb().formatRgb()}function ce(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Il.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?di(e):n===3?new Tt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Nn(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Nn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$l.exec(t))?new Tt(e[1],e[2],e[3],1):(e=Pl.exec(t))?new Tt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=zl.exec(t))?Nn(e[1],e[2],e[3],e[4]):(e=Rl.exec(t))?Nn(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Dl.exec(t))?mi(e[1],e[2]/100,e[3]/100,1):(e=Fl.exec(t))?mi(e[1],e[2]/100,e[3]/100,e[4]):ci.hasOwnProperty(t)?di(ci[t]):t==="transparent"?new Tt(NaN,NaN,NaN,0):null}function di(t){return new Tt(t>>16&255,t>>8&255,t&255,1)}function Nn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Tt(t,e,n,r)}function ql(t){return t instanceof En||(t=ce(t)),t?(t=t.rgb(),new Tt(t.r,t.g,t.b,t.opacity)):new Tt}function Le(t,e,n,r){return arguments.length===1?ql(t):new Tt(t,e,n,r??1)}function Tt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Kr(Tt,Le,Co(En,{brighter(t){return t=t==null?Bn:Math.pow(Bn,t),new Tt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?_n:Math.pow(_n,t),new Tt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Tt(ke(this.r),ke(this.g),ke(this.b),Un(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pi,formatHex:pi,formatHex8:Bl,formatRgb:gi,toString:gi}));function pi(){return`#${Ee(this.r)}${Ee(this.g)}${Ee(this.b)}`}function Bl(){return`#${Ee(this.r)}${Ee(this.g)}${Ee(this.b)}${Ee((isNaN(this.opacity)?1:this.opacity)*255)}`}function gi(){const t=Un(this.opacity);return`${t===1?"rgb(":"rgba("}${ke(this.r)}, ${ke(this.g)}, ${ke(this.b)}${t===1?")":`, ${t})`}`}function Un(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ke(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ee(t){return t=ke(t),(t<16?"0":"")+t.toString(16)}function mi(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Xt(t,e,n,r)}function Io(t){if(t instanceof Xt)return new Xt(t.h,t.s,t.l,t.opacity);if(t instanceof En||(t=ce(t)),!t)return new Xt;if(t instanceof Xt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(n-r)/a+(n<r)*6:n===o?s=(r-e)/a+2:s=(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Xt(s,a,l,t.opacity)}function Ul(t,e,n,r){return arguments.length===1?Io(t):new Xt(t,e,n,r??1)}function Xt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Kr(Xt,Ul,Co(En,{brighter(t){return t=t==null?Bn:Math.pow(Bn,t),new Xt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?_n:Math.pow(_n,t),new Xt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Tt(lr(t>=240?t-240:t+120,i,r),lr(t,i,r),lr(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Xt(_i(this.h),Tn(this.s),Tn(this.l),Un(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Un(this.opacity);return`${t===1?"hsl(":"hsla("}${_i(this.h)}, ${Tn(this.s)*100}%, ${Tn(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _i(t){return t=(t||0)%360,t<0?t+360:t}function Tn(t){return Math.max(0,Math.min(1,t||0))}function lr(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function Ll(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}function Hl(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return Ll((n-r/e)*e,s,i,o,a)}}const Wr=t=>()=>t;function Xl(t,e){return function(n){return t+n*e}}function Yl(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Gl(t){return(t=+t)==1?$o:function(e,n){return n-e?Yl(e,n,t):Wr(isNaN(e)?n:e)}}function $o(t,e){var n=e-t;return n?Xl(t,n):Wr(isNaN(t)?e:t)}const He=function t(e){var n=Gl(e);function r(i,o){var s=n((i=Le(i)).r,(o=Le(o)).r),a=n(i.g,o.g),l=n(i.b,o.b),c=$o(i.opacity,o.opacity);return function(u){return i.r=s(u),i.g=a(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r}(1);function Kl(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),s,a;for(s=0;s<n;++s)a=Le(e[s]),r[s]=a.r||0,i[s]=a.g||0,o[s]=a.b||0;return r=t(r),i=t(i),o=t(o),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=o(l),a+""}}}var Wl=Kl(Hl);function Zl(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Ql(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Jl(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),s;for(s=0;s<r;++s)i[s]=Zr(t[s],e[s]);for(;s<n;++s)o[s]=e[s];return function(a){for(s=0;s<r;++s)o[s]=i[s](a);return o}}function jl(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ht(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function tu(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Zr(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Sr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ur=new RegExp(Sr.source,"g");function eu(t){return function(){return t}}function nu(t){return function(e){return t(e)+""}}function Po(t,e){var n=Sr.lastIndex=ur.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(t=t+"",e=e+"";(r=Sr.exec(t))&&(i=ur.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Ht(r,i)})),n=ur.lastIndex;return n<e.length&&(o=e.slice(n),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?nu(l[0].x):eu(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)a[(f=l[u]).i]=f.x(c);return a.join("")})}function Zr(t,e){var n=typeof e,r;return e==null||n==="boolean"?Wr(e):(n==="number"?Ht:n==="string"?(r=ce(e))?(e=r,He):Po:e instanceof ce?He:e instanceof Date?jl:Ql(e)?Zl:Array.isArray(e)?Jl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?tu:Ht)(t,e)}function ru(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var vi=180/Math.PI,Ar={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function zo(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*vi,skewX:Math.atan(l)*vi,scaleX:s,scaleY:a}}var Cn;function iu(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ar:zo(e.a,e.b,e.c,e.d,e.e,e.f)}function ou(t){return t==null||(Cn||(Cn=document.createElementNS("http://www.w3.org/2000/svg","g")),Cn.setAttribute("transform",t),!(t=Cn.transform.baseVal.consolidate()))?Ar:(t=t.matrix,zo(t.a,t.b,t.c,t.d,t.e,t.f))}function Ro(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,f,h,g,y){if(c!==f||u!==h){var d=g.push("translate(",null,e,null,n);y.push({i:d-4,x:Ht(c,f)},{i:d-2,x:Ht(u,h)})}else(f||h)&&g.push("translate("+f+e+h+n)}function s(c,u,f,h){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),h.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ht(c,u)})):u&&f.push(i(f)+"rotate("+u+r)}function a(c,u,f,h){c!==u?h.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ht(c,u)}):u&&f.push(i(f)+"skewX("+u+r)}function l(c,u,f,h,g,y){if(c!==f||u!==h){var d=g.push(i(g)+"scale(",null,",",null,")");y.push({i:d-4,x:Ht(c,f)},{i:d-2,x:Ht(u,h)})}else(f!==1||h!==1)&&g.push(i(g)+"scale("+f+","+h+")")}return function(c,u){var f=[],h=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,f,h),s(c.rotate,u.rotate,f,h),a(c.skewX,u.skewX,f,h),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,f,h),c=u=null,function(g){for(var y=-1,d=h.length,v;++y<d;)f[(v=h[y]).i]=v.x(g);return f.join("")}}}var su=Ro(iu,"px, ","px)","deg)"),au=Ro(ou,", ",")",")"),lu=1e-12;function yi(t){return((t=Math.exp(t))+1/t)/2}function uu(t){return((t=Math.exp(t))-1/t)/2}function cu(t){return((t=Math.exp(2*t))-1)/(t+1)}const fu=function t(e,n,r){function i(o,s){var a=o[0],l=o[1],c=o[2],u=s[0],f=s[1],h=s[2],g=u-a,y=f-l,d=g*g+y*y,v,p;if(d<lu)p=Math.log(h/c)/e,v=function(B){return[a+B*g,l+B*y,c*Math.exp(e*B*p)]};else{var b=Math.sqrt(d),k=(h*h-c*c+r*d)/(2*c*n*b),E=(h*h-c*c-r*d)/(2*h*n*b),S=Math.log(Math.sqrt(k*k+1)-k),P=Math.log(Math.sqrt(E*E+1)-E);p=(P-S)/e,v=function(B){var nt=B*p,ot=yi(S),et=c/(n*b)*(ot*cu(e*nt+S)-uu(S));return[a+et*g,l+et*y,c*ot/yi(e*nt+S)]}}return v.duration=p*1e3*e/Math.SQRT2,v}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return t(s,a,l)},i}(Math.SQRT2,2,4);var Xe=0,sn=0,en=0,Do=1e3,Ln,an,Hn=0,Me=0,rr=0,yn=typeof performance=="object"&&performance.now?performance:Date,Fo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Qr(){return Me||(Fo(hu),Me=yn.now()+rr)}function hu(){Me=0}function Xn(){this._call=this._time=this._next=null}Xn.prototype=Vo.prototype={constructor:Xn,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Qr():+n)+(e==null?0:+e),!this._next&&an!==this&&(an?an._next=this:Ln=this,an=this),this._call=t,this._time=n,Nr()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nr())}};function Vo(t,e,n){var r=new Xn;return r.restart(t,e,n),r}function du(){Qr(),++Xe;for(var t=Ln,e;t;)(e=Me-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Xe}function wi(){Me=(Hn=yn.now())+rr,Xe=sn=0;try{du()}finally{Xe=0,gu(),Me=0}}function pu(){var t=yn.now(),e=t-Hn;e>Do&&(rr-=e,Hn=t)}function gu(){for(var t,e=Ln,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ln=n);an=t,Nr(r)}function Nr(t){if(!Xe){sn&&(sn=clearTimeout(sn));var e=t-Me;e>24?(t<1/0&&(sn=setTimeout(wi,t-yn.now()-rr)),en&&(en=clearInterval(en))):(en||(Hn=yn.now(),en=setInterval(pu,Do)),Xe=1,Fo(wi))}}function bi(t,e,n){var r=new Xn;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var mu=Hr("start","end","cancel","interrupt"),_u=[],Oo=0,xi=1,Tr=2,Rn=3,Ei=4,Cr=5,Dn=6;function ir(t,e,n,r,i,o){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;vu(t,n,{name:e,index:r,group:i,on:mu,tween:_u,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Oo})}function Jr(t,e){var n=Kt(t,e);if(n.state>Oo)throw new Error("too late; already scheduled");return n}function ie(t,e){var n=Kt(t,e);if(n.state>Rn)throw new Error("too late; already running");return n}function Kt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function vu(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Vo(o,0,n.time);function o(c){n.state=xi,n.timer.restart(s,n.delay,n.time),n.delay<=c&&s(c-n.delay)}function s(c){var u,f,h,g;if(n.state!==xi)return l();for(u in r)if(g=r[u],g.name===n.name){if(g.state===Rn)return bi(s);g.state===Ei?(g.state=Dn,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete r[u]):+u<e&&(g.state=Dn,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete r[u])}if(bi(function(){n.state===Rn&&(n.state=Ei,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=Tr,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Tr){for(n.state=Rn,i=new Array(h=n.tween.length),u=0,f=-1;u<h;++u)(g=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++f]=g);i.length=f+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Cr,1),f=-1,h=i.length;++f<h;)i[f].call(t,u);n.state===Cr&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Dn,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function Fn(t,e){var n=t.__transition,r,i,o=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((r=n[s]).name!==e){o=!1;continue}i=r.state>Tr&&r.state<Cr,r.state=Dn,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[s]}o&&delete t.__transition}}function yu(t){return this.each(function(){Fn(this,t)})}function wu(t,e){var n,r;return function(){var i=ie(this,t),o=i.tween;if(o!==n){r=n=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function bu(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=ie(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=a;break}l===c&&i.push(a)}o.tween=i}}function xu(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Kt(this.node(),n).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((e==null?wu:bu)(n,t,e))}function jr(t,e,n){var r=t._id;return t.each(function(){var i=ie(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return Kt(i,r).value[e]}}function qo(t,e){var n;return(typeof e=="number"?Ht:e instanceof ce?He:(n=ce(e))?(e=n,He):Po)(t,e)}function Eu(t){return function(){this.removeAttribute(t)}}function ku(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mu(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttribute(t);return s===i?null:s===r?o:o=e(r=s,n)}}function Su(t,e,n){var r,i=n+"",o;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?o:o=e(r=s,n)}}function Au(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function Nu(t,e,n){var r,i,o;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function Tu(t,e){var n=nr(t),r=n==="transform"?au:qo;return this.attrTween(t,typeof e=="function"?(n.local?Nu:Au)(n,r,jr(this,"attr."+t,e)):e==null?(n.local?ku:Eu)(n):(n.local?Su:Mu)(n,r,e))}function Cu(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Iu(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function $u(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Iu(t,o)),n}return i._value=e,i}function Pu(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&Cu(t,o)),n}return i._value=e,i}function zu(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=nr(t);return this.tween(n,(r.local?$u:Pu)(r,e))}function Ru(t,e){return function(){Jr(this,t).delay=+e.apply(this,arguments)}}function Du(t,e){return e=+e,function(){Jr(this,t).delay=e}}function Fu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ru:Du)(e,t)):Kt(this.node(),e).delay}function Vu(t,e){return function(){ie(this,t).duration=+e.apply(this,arguments)}}function Ou(t,e){return e=+e,function(){ie(this,t).duration=e}}function qu(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Vu:Ou)(e,t)):Kt(this.node(),e).duration}function Bu(t,e){if(typeof e!="function")throw new Error;return function(){ie(this,t).ease=e}}function Uu(t){var e=this._id;return arguments.length?this.each(Bu(e,t)):Kt(this.node(),e).ease}function Lu(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ie(this,t).ease=n}}function Hu(t){if(typeof t!="function")throw new Error;return this.each(Lu(this._id,t))}function Xu(t){typeof t!="function"&&(t=wo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,c=0;c<s;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&a.push(l);return new fe(r,this._parents,this._name,this._id)}function Yu(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=e[a],c=n[a],u=l.length,f=s[a]=new Array(u),h,g=0;g<u;++g)(h=l[g]||c[g])&&(f[g]=h);for(;a<r;++a)s[a]=e[a];return new fe(s,this._parents,this._name,this._id)}function Gu(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ku(t,e,n){var r,i,o=Gu(e)?Jr:ie;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}function Wu(t,e){var n=this._id;return arguments.length<2?Kt(this.node(),n).on.on(t):this.each(Ku(n,t,e))}function Zu(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Qu(){return this.on("end.remove",Zu(this._id))}function Ju(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Yr(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,c=o[s]=new Array(l),u,f,h=0;h<l;++h)(u=a[h])&&(f=t.call(u,u.__data__,h,a))&&("__data__"in u&&(f.__data__=u.__data__),c[h]=f,ir(c[h],e,n,h,c,Kt(u,n)));return new fe(o,this._parents,e,n)}function ju(t){var e=this._name,n=this._id;typeof t!="function"&&(t=yo(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],c=l.length,u,f=0;f<c;++f)if(u=l[f]){for(var h=t.call(u,u.__data__,f,l),g,y=Kt(u,n),d=0,v=h.length;d<v;++d)(g=h[d])&&ir(g,e,n,d,h,y);o.push(h),s.push(u)}return new fe(o,s,e,n)}var tc=xn.prototype.constructor;function ec(){return new tc(this._groups,this._parents)}function nc(t,e){var n,r,i;return function(){var o=Ue(this,t),s=(this.style.removeProperty(t),Ue(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}function Bo(t){return function(){this.style.removeProperty(t)}}function rc(t,e,n){var r,i=n+"",o;return function(){var s=Ue(this,t);return s===i?null:s===r?o:o=e(r=s,n)}}function ic(t,e,n){var r,i,o;return function(){var s=Ue(this,t),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(t),Ue(this,t))),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function oc(t,e){var n,r,i,o="style."+e,s="end."+o,a;return function(){var l=ie(this,t),c=l.on,u=l.value[o]==null?a||(a=Bo(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(s,i=u),l.on=r}}function sc(t,e,n){var r=(t+="")=="transform"?su:qo;return e==null?this.styleTween(t,nc(t,r)).on("end.style."+t,Bo(t)):typeof e=="function"?this.styleTween(t,ic(t,r,jr(this,"style."+t,e))).each(oc(this._id,t)):this.styleTween(t,rc(t,r,e),n).on("end.style."+t,null)}function ac(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function lc(t,e,n){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&ac(t,s,n)),r}return o._value=e,o}function uc(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,lc(t,e,n??""))}function cc(t){return function(){this.textContent=t}}function fc(t){return function(){var e=t(this);this.textContent=e??""}}function hc(t){return this.tween("text",typeof t=="function"?fc(jr(this,"text",t)):cc(t==null?"":t+""))}function dc(t){return function(e){this.textContent=t.call(this,e)}}function pc(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&dc(i)),e}return r._value=t,r}function gc(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,pc(t))}function mc(){for(var t=this._name,e=this._id,n=Uo(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)if(l=s[c]){var u=Kt(l,e);ir(l,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new fe(r,this._parents,t,n)}function _c(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};n.each(function(){var c=ie(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),c.on=e}),i===0&&o()})}var vc=0;function fe(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Uo(){return++vc}var se=xn.prototype;fe.prototype={constructor:fe,select:Ju,selectAll:ju,selectChild:se.selectChild,selectChildren:se.selectChildren,filter:Xu,merge:Yu,selection:ec,transition:mc,call:se.call,nodes:se.nodes,node:se.node,size:se.size,empty:se.empty,each:se.each,on:Wu,attr:Tu,attrTween:zu,style:sc,styleTween:uc,text:hc,textTween:gc,remove:Qu,tween:xu,delay:Fu,duration:qu,ease:Uu,easeVarying:Hu,end:_c,[Symbol.iterator]:se[Symbol.iterator]};function yc(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var wc={time:null,delay:0,duration:250,ease:yc};function bc(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function xc(t){var e,n;t instanceof fe?(e=t._id,t=t._name):(e=Uo(),(n=wc).time=Qr(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,c=0;c<a;++c)(l=s[c])&&ir(l,t,e,c,s,n||bc(l,e));return new fe(r,this._parents,t,e)}xn.prototype.interrupt=yu;xn.prototype.transition=xc;const Ir=Math.PI,$r=2*Ir,xe=1e-6,Ec=$r-xe;function Lo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function kc(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Lo;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Mc{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Lo:kc(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,o,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+o},${this._y1=+s}`}arcTo(e,n,r,i,o){if(e=+e,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let s=this._x1,a=this._y1,l=r-e,c=i-n,u=s-e,f=a-n,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>xe)if(!(Math.abs(f*l-c*u)>xe)||!o)this._append`L${this._x1=e},${this._y1=n}`;else{let g=r-s,y=i-a,d=l*l+c*c,v=g*g+y*y,p=Math.sqrt(d),b=Math.sqrt(h),k=o*Math.tan((Ir-Math.acos((d+h-v)/(2*p*b)))/2),E=k/b,S=k/p;Math.abs(E-1)>xe&&this._append`L${e+E*u},${n+E*f}`,this._append`A${o},${o},0,0,${+(f*g>u*y)},${this._x1=e+S*l},${this._y1=n+S*c}`}}arc(e,n,r,i,o,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),c=e+a,u=n+l,f=1^s,h=s?i-o:o-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>xe||Math.abs(this._y1-u)>xe)&&this._append`L${c},${u}`,r&&(h<0&&(h=h%$r+$r),h>Ec?this._append`A${r},${r},0,1,${f},${e-a},${n-l}A${r},${r},0,1,${f},${this._x1=c},${this._y1=u}`:h>xe&&this._append`A${r},${r},0,${+(h>=Ir)},${f},${this._x1=e+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}var ki={},cr={},fr=34,nn=10,hr=13;function Ho(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Sc(t,e){var n=Ho(t);return function(r,i){return e(n(r),i,t)}}function Mi(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Nt(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Ac(t){return t<0?"-"+Nt(-t,6):t>9999?"+"+Nt(t,6):Nt(t,4)}function Nc(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Ac(t.getUTCFullYear())+"-"+Nt(t.getUTCMonth()+1,2)+"-"+Nt(t.getUTCDate(),2)+(i?"T"+Nt(e,2)+":"+Nt(n,2)+":"+Nt(r,2)+"."+Nt(i,3)+"Z":r?"T"+Nt(e,2)+":"+Nt(n,2)+":"+Nt(r,2)+"Z":n||e?"T"+Nt(e,2)+":"+Nt(n,2)+"Z":"")}function Tc(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var g,y,d=i(f,function(v,p){if(g)return g(v,p-1);y=v,g=h?Sc(v,h):Ho(v)});return d.columns=y||[],d}function i(f,h){var g=[],y=f.length,d=0,v=0,p,b=y<=0,k=!1;f.charCodeAt(y-1)===nn&&--y,f.charCodeAt(y-1)===hr&&--y;function E(){if(b)return cr;if(k)return k=!1,ki;var P,B=d,nt;if(f.charCodeAt(B)===fr){for(;d++<y&&f.charCodeAt(d)!==fr||f.charCodeAt(++d)===fr;);return(P=d)>=y?b=!0:(nt=f.charCodeAt(d++))===nn?k=!0:nt===hr&&(k=!0,f.charCodeAt(d)===nn&&++d),f.slice(B+1,P-1).replace(/""/g,'"')}for(;d<y;){if((nt=f.charCodeAt(P=d++))===nn)k=!0;else if(nt===hr)k=!0,f.charCodeAt(d)===nn&&++d;else if(nt!==n)continue;return f.slice(B,P)}return b=!0,f.slice(B,y)}for(;(p=E())!==cr;){for(var S=[];p!==ki&&p!==cr;)S.push(p),p=E();h&&(S=h(S,v++))==null||g.push(S)}return g}function o(f,h){return f.map(function(g){return h.map(function(y){return u(g[y])}).join(t)})}function s(f,h){return h==null&&(h=Mi(f)),[h.map(u).join(t)].concat(o(f,h)).join(`
`)}function a(f,h){return h==null&&(h=Mi(f)),o(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?Nc(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:s,formatBody:a,formatRows:l,formatRow:c,formatValue:u}}var Cc=Tc(","),Ic=Cc.parse;function $c(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Pc(t,e){return fetch(t,e).then($c)}function zc(t){return function(e,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Pc(e,n).then(function(i){return t(i,r)})}}var Re=zc(Ic);function Rc(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function dr(t,e){return fetch(t,e).then(Rc)}function Dc(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Yn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Ye(t){return t=Yn(Math.abs(t)),t?t[1]:NaN}function Fc(t,e){return function(n,r){for(var i=n.length,o=[],s=0,a=t[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),o.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=t[s=(s+1)%t.length];return o.reverse().join(e)}}function Vc(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Oc=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gn(t){if(!(e=Oc.exec(t)))throw new Error("invalid format: "+t);var e;return new ti({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Gn.prototype=ti.prototype;function ti(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ti.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qc(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Xo;function Bc(t,e){var n=Yn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Xo=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return o===s?r:o>s?r+new Array(o-s+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Yn(t,Math.max(0,e+o-1))[0]}function Si(t,e){var n=Yn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ai={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Dc,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Si(t*100,e),r:Si,s:Bc,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Ni(t){return t}var Ti=Array.prototype.map,Ci=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Uc(t){var e=t.grouping===void 0||t.thousands===void 0?Ni:Fc(Ti.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?Ni:Vc(Ti.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",a=t.minus===void 0?"−":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=Gn(f);var h=f.fill,g=f.align,y=f.sign,d=f.symbol,v=f.zero,p=f.width,b=f.comma,k=f.precision,E=f.trim,S=f.type;S==="n"?(b=!0,S="g"):Ai[S]||(k===void 0&&(k=12),E=!0,S="g"),(v||h==="0"&&g==="=")&&(v=!0,h="0",g="=");var P=d==="$"?n:d==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",B=d==="$"?r:/[%p]/.test(S)?s:"",nt=Ai[S],ot=/[defgprs%]/.test(S);k=k===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function et($){var O=P,F=B,m,C,A;if(S==="c")F=nt($)+F,$="";else{$=+$;var z=$<0||1/$<0;if($=isNaN($)?l:nt(Math.abs($),k),E&&($=qc($)),z&&+$==0&&y!=="+"&&(z=!1),O=(z?y==="("?y:a:y==="-"||y==="("?"":y)+O,F=(S==="s"?Ci[8+Xo/3]:"")+F+(z&&y==="("?")":""),ot){for(m=-1,C=$.length;++m<C;)if(A=$.charCodeAt(m),48>A||A>57){F=(A===46?i+$.slice(m+1):$.slice(m))+F,$=$.slice(0,m);break}}}b&&!v&&($=e($,1/0));var U=O.length+$.length+F.length,L=U<p?new Array(p-U+1).join(h):"";switch(b&&v&&($=e(L+$,L.length?p-F.length:1/0),L=""),g){case"<":$=O+$+F+L;break;case"=":$=O+L+$+F;break;case"^":$=L.slice(0,U=L.length>>1)+O+$+F+L.slice(U);break;default:$=L+O+$+F;break}return o($)}return et.toString=function(){return f+""},et}function u(f,h){var g=c((f=Gn(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Ye(h)/3)))*3,d=Math.pow(10,-y),v=Ci[8+y/3];return function(p){return g(d*p)+v}}return{format:c,formatPrefix:u}}var In,Yo,Go;Lc({thousands:",",grouping:[3],currency:["$",""]});function Lc(t){return In=Uc(t),Yo=In.format,Go=In.formatPrefix,In}function Hc(t){return Math.max(0,-Ye(Math.abs(t)))}function Xc(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ye(e)/3)))*3-Ye(Math.abs(t)))}function Yc(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Ye(e)-Ye(t))+1}var Gc=Math.PI,Kc=Gc*2,Wc=Math.abs,ei=Math.sqrt;function Gt(){}function Kn(t,e){t&&$i.hasOwnProperty(t.type)&&$i[t.type](t,e)}var Ii={Feature:function(t,e){Kn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Kn(n[r].geometry,e)}},$i={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Pr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Pr(n[r],e,0)},Polygon:function(t,e){Pi(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Pi(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Kn(n[r],e)}};function Pr(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function Pi(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Pr(t[n],e,1);e.polygonEnd()}function rn(t,e){t&&Ii.hasOwnProperty(t.type)?Ii[t.type](t,e):Kn(t,e)}const Zc=t=>t;var pr=new Be,zr=new Be,Ko,Wo,Rr,Dr,ge={point:Gt,lineStart:Gt,lineEnd:Gt,polygonStart:function(){ge.lineStart=Qc,ge.lineEnd=jc},polygonEnd:function(){ge.lineStart=ge.lineEnd=ge.point=Gt,pr.add(Wc(zr)),zr=new Be},result:function(){var t=pr/2;return pr=new Be,t}};function Qc(){ge.point=Jc}function Jc(t,e){ge.point=Zo,Ko=Rr=t,Wo=Dr=e}function Zo(t,e){zr.add(Dr*t-Rr*e),Rr=t,Dr=e}function jc(){Zo(Ko,Wo)}const zi=ge;var Ge=1/0,Wn=Ge,wn=-Ge,Zn=wn,tf={point:ef,lineStart:Gt,lineEnd:Gt,polygonStart:Gt,polygonEnd:Gt,result:function(){var t=[[Ge,Wn],[wn,Zn]];return wn=Zn=-(Wn=Ge=1/0),t}};function ef(t,e){t<Ge&&(Ge=t),t>wn&&(wn=t),e<Wn&&(Wn=e),e>Zn&&(Zn=e)}const Ri=tf;var Fr=0,Vr=0,ln=0,Qn=0,Jn=0,De=0,Or=0,qr=0,un=0,Qo,Jo,jt,te,Yt={point:Se,lineStart:Di,lineEnd:Fi,polygonStart:function(){Yt.lineStart=of,Yt.lineEnd=sf},polygonEnd:function(){Yt.point=Se,Yt.lineStart=Di,Yt.lineEnd=Fi},result:function(){var t=un?[Or/un,qr/un]:De?[Qn/De,Jn/De]:ln?[Fr/ln,Vr/ln]:[NaN,NaN];return Fr=Vr=ln=Qn=Jn=De=Or=qr=un=0,t}};function Se(t,e){Fr+=t,Vr+=e,++ln}function Di(){Yt.point=nf}function nf(t,e){Yt.point=rf,Se(jt=t,te=e)}function rf(t,e){var n=t-jt,r=e-te,i=ei(n*n+r*r);Qn+=i*(jt+t)/2,Jn+=i*(te+e)/2,De+=i,Se(jt=t,te=e)}function Fi(){Yt.point=Se}function of(){Yt.point=af}function sf(){jo(Qo,Jo)}function af(t,e){Yt.point=jo,Se(Qo=jt=t,Jo=te=e)}function jo(t,e){var n=t-jt,r=e-te,i=ei(n*n+r*r);Qn+=i*(jt+t)/2,Jn+=i*(te+e)/2,De+=i,i=te*t-jt*e,Or+=i*(jt+t),qr+=i*(te+e),un+=i*3,Se(jt=t,te=e)}const Vi=Yt;function ts(t){this._context=t}ts.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Kc);break}}},result:Gt};var Br=new Be,gr,es,ns,cn,fn,jn={point:Gt,lineStart:function(){jn.point=lf},lineEnd:function(){gr&&rs(es,ns),jn.point=Gt},polygonStart:function(){gr=!0},polygonEnd:function(){gr=null},result:function(){var t=+Br;return Br=new Be,t}};function lf(t,e){jn.point=rs,es=cn=t,ns=fn=e}function rs(t,e){cn-=t,fn-=e,Br.add(ei(cn*cn+fn*fn)),cn=t,fn=e}const Oi=jn;let qi,tr,Bi,Ui;class Li{constructor(e){this._append=e==null?is:uf(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Bi||this._append!==tr){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Bi=r,tr=this._append,Ui=this._,this._=i}this._+=Ui;break}}}result(){const e=this._;return this._="",e.length?e:null}}function is(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function uf(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return is;if(e!==qi){const n=10**e;qi=e,tr=function(i){let o=1;this._+=i[0];for(const s=i.length;o<s;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return tr}function Hi(t,e){let n=3,r=4.5,i,o;function s(a){return a&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),rn(a,i(o))),o.result()}return s.area=function(a){return rn(a,i(zi)),zi.result()},s.measure=function(a){return rn(a,i(Oi)),Oi.result()},s.bounds=function(a){return rn(a,i(Ri)),Ri.result()},s.centroid=function(a){return rn(a,i(Vi)),Vi.result()},s.projection=function(a){return arguments.length?(i=a==null?(t=null,Zc):(t=a).stream,s):t},s.context=function(a){return arguments.length?(o=a==null?(e=null,new Li(n)):new ts(e=a),typeof r!="function"&&o.pointRadius(r),s):e},s.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(o.pointRadius(+a),+a),s):r},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return e===null&&(o=new Li(n)),s},s.projection(t).digits(n).context(e)}function ni(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Xi=Symbol("implicit");function kn(){var t=new br,e=[],n=[],r=Xi;function i(o){let s=t.get(o);if(s===void 0){if(r!==Xi)return r;t.set(o,s=e.push(o)-1)}return n[s%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new br;for(const s of o)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return kn(e,n).unknown(r)},ni.apply(i,arguments),i}function os(){var t=kn().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,s,a=!1,l=0,c=0,u=.5;delete t.unknown;function f(){var h=e().length,g=i<r,y=g?i:r,d=g?r:i;o=(d-y)/Math.max(1,h-l+c*2),a&&(o=Math.floor(o)),y+=(d-y-o*(h-l))*u,s=o*(1-l),a&&(y=Math.round(y),s=Math.round(s));var v=Xs(h).map(function(p){return y+o*p});return n(g?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,a=!0,f()},t.bandwidth=function(){return s},t.step=function(){return o},t.round=function(h){return arguments.length?(a=!!h,f()):a},t.padding=function(h){return arguments.length?(l=Math.min(1,c=+h),f()):l},t.paddingInner=function(h){return arguments.length?(l=Math.min(1,h),f()):l},t.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},t.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},t.copy=function(){return os(e(),[r,i]).round(a).paddingInner(l).paddingOuter(c).align(u)},ni.apply(f(),arguments)}function cf(t){return function(){return t}}function ff(t){return+t}var Yi=[0,1];function Fe(t){return t}function Ur(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:cf(isNaN(e)?NaN:.5)}function hf(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function df(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1];return i<r?(r=Ur(i,r),o=n(s,o)):(r=Ur(r,i),o=n(o,s)),function(a){return o(r(a))}}function pf(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Ur(t[s],t[s+1]),o[s]=n(e[s],e[s+1]);return function(a){var l=Ps(t,a,1,r)-1;return o[l](i[l](a))}}function gf(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function mf(){var t=Yi,e=Yi,n=Zr,r,i,o,s=Fe,a,l,c;function u(){var h=Math.min(t.length,e.length);return s!==Fe&&(s=hf(t[0],t[h-1])),a=h>2?pf:df,l=c=null,f}function f(h){return h==null||isNaN(h=+h)?o:(l||(l=a(t.map(r),e,n)))(r(s(h)))}return f.invert=function(h){return s(i((c||(c=a(e,t.map(r),Ht)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,ff),u()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),u()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=ru,u()},f.clamp=function(h){return arguments.length?(s=h?!0:Fe,u()):s!==Fe},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(o=h,f):o},function(h,g){return r=h,i=g,u()}}function _f(){return mf()(Fe,Fe)}function vf(t,e,n,r){var i=Bs(t,e,n),o;switch(r=Gn(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Xc(i,s))&&(r.precision=o),Go(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Yc(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Hc(i))&&(r.precision=o-(r.type==="%")*2);break}}return Yo(r)}function yf(t){var e=t.domain;return t.ticks=function(n){var r=e();return qs(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return vf(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,s=r[i],a=r[o],l,c,u=10;for(a<s&&(c=s,s=a,a=c,c=i,i=o,o=c);u-- >0;){if(c=xr(s,a,n),c===l)return r[i]=s,r[o]=a,e(r);if(c>0)s=Math.floor(s/c)*c,a=Math.ceil(a/c)*c;else if(c<0)s=Math.ceil(s*c)/c,a=Math.floor(a*c)/c;else break;l=c}return t},t}function ri(){var t=_f();return t.copy=function(){return gf(t,ri())},ni.apply(t,arguments),yf(t)}function ss(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const as=ss("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),wf=t=>Wl(t[t.length-1]);var ls=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ss);wf(ls);function St(t){return function(){return t}}const Gi=Math.abs,kt=Math.atan2,be=Math.cos,bf=Math.max,mr=Math.min,Jt=Math.sin,Ve=Math.sqrt,At=1e-12,bn=Math.PI,er=bn/2,Vn=2*bn;function xf(t){return t>1?0:t<-1?bn:Math.acos(t)}function Ki(t){return t>=1?er:t<=-1?-er:Math.asin(t)}function Ef(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Mc(e)}function kf(t){return t.innerRadius}function Mf(t){return t.outerRadius}function Sf(t){return t.startAngle}function Af(t){return t.endAngle}function Nf(t){return t&&t.padAngle}function Tf(t,e,n,r,i,o,s,a){var l=n-t,c=r-e,u=s-i,f=a-o,h=f*l-u*c;if(!(h*h<At))return h=(u*(e-o)-f*(t-i))/h,[t+h*l,e+h*c]}function $n(t,e,n,r,i,o,s){var a=t-n,l=e-r,c=(s?o:-o)/Ve(a*a+l*l),u=c*l,f=-c*a,h=t+u,g=e+f,y=n+u,d=r+f,v=(h+y)/2,p=(g+d)/2,b=y-h,k=d-g,E=b*b+k*k,S=i-o,P=h*d-y*g,B=(k<0?-1:1)*Ve(bf(0,S*S*E-P*P)),nt=(P*k-b*B)/E,ot=(-P*b-k*B)/E,et=(P*k+b*B)/E,$=(-P*b+k*B)/E,O=nt-v,F=ot-p,m=et-v,C=$-p;return O*O+F*F>m*m+C*C&&(nt=et,ot=$),{cx:nt,cy:ot,x01:-u,y01:-f,x11:nt*(i/S-1),y11:ot*(i/S-1)}}function us(){var t=kf,e=Mf,n=St(0),r=null,i=Sf,o=Af,s=Nf,a=null,l=Ef(c);function c(){var u,f,h=+t.apply(this,arguments),g=+e.apply(this,arguments),y=i.apply(this,arguments)-er,d=o.apply(this,arguments)-er,v=Gi(d-y),p=d>y;if(a||(a=u=l()),g<h&&(f=g,g=h,h=f),!(g>At))a.moveTo(0,0);else if(v>Vn-At)a.moveTo(g*be(y),g*Jt(y)),a.arc(0,0,g,y,d,!p),h>At&&(a.moveTo(h*be(d),h*Jt(d)),a.arc(0,0,h,d,y,p));else{var b=y,k=d,E=y,S=d,P=v,B=v,nt=s.apply(this,arguments)/2,ot=nt>At&&(r?+r.apply(this,arguments):Ve(h*h+g*g)),et=mr(Gi(g-h)/2,+n.apply(this,arguments)),$=et,O=et,F,m;if(ot>At){var C=Ki(ot/h*Jt(nt)),A=Ki(ot/g*Jt(nt));(P-=C*2)>At?(C*=p?1:-1,E+=C,S-=C):(P=0,E=S=(y+d)/2),(B-=A*2)>At?(A*=p?1:-1,b+=A,k-=A):(B=0,b=k=(y+d)/2)}var z=g*be(b),U=g*Jt(b),L=h*be(S),H=h*Jt(S);if(et>At){var Q=g*be(k),W=g*Jt(k),it=h*be(E),rt=h*Jt(E),Z;if(v<bn)if(Z=Tf(z,U,it,rt,Q,W,L,H)){var gt=z-Z[0],ht=U-Z[1],V=Q-Z[0],J=W-Z[1],Y=1/Jt(xf((gt*V+ht*J)/(Ve(gt*gt+ht*ht)*Ve(V*V+J*J)))/2),X=Ve(Z[0]*Z[0]+Z[1]*Z[1]);$=mr(et,(h-X)/(Y-1)),O=mr(et,(g-X)/(Y+1))}else $=O=0}B>At?O>At?(F=$n(it,rt,z,U,g,O,p),m=$n(Q,W,L,H,g,O,p),a.moveTo(F.cx+F.x01,F.cy+F.y01),O<et?a.arc(F.cx,F.cy,O,kt(F.y01,F.x01),kt(m.y01,m.x01),!p):(a.arc(F.cx,F.cy,O,kt(F.y01,F.x01),kt(F.y11,F.x11),!p),a.arc(0,0,g,kt(F.cy+F.y11,F.cx+F.x11),kt(m.cy+m.y11,m.cx+m.x11),!p),a.arc(m.cx,m.cy,O,kt(m.y11,m.x11),kt(m.y01,m.x01),!p))):(a.moveTo(z,U),a.arc(0,0,g,b,k,!p)):a.moveTo(z,U),!(h>At)||!(P>At)?a.lineTo(L,H):$>At?(F=$n(L,H,Q,W,h,-$,p),m=$n(z,U,it,rt,h,-$,p),a.lineTo(F.cx+F.x01,F.cy+F.y01),$<et?a.arc(F.cx,F.cy,$,kt(F.y01,F.x01),kt(m.y01,m.x01),!p):(a.arc(F.cx,F.cy,$,kt(F.y01,F.x01),kt(F.y11,F.x11),!p),a.arc(0,0,h,kt(F.cy+F.y11,F.cx+F.x11),kt(m.cy+m.y11,m.cx+m.x11),p),a.arc(m.cx,m.cy,$,kt(m.y11,m.x11),kt(m.y01,m.x01),!p))):a.arc(0,0,h,S,E,p)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-bn/2;return[be(f)*u,Jt(f)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:St(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:St(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:St(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:St(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:St(+u),c):i},c.endAngle=function(u){return arguments.length?(o=typeof u=="function"?u:St(+u),c):o},c.padAngle=function(u){return arguments.length?(s=typeof u=="function"?u:St(+u),c):s},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function Cf(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function If(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function $f(t){return t}function cs(){var t=$f,e=If,n=null,r=St(0),i=St(Vn),o=St(0);function s(a){var l,c=(a=Cf(a)).length,u,f,h=0,g=new Array(c),y=new Array(c),d=+r.apply(this,arguments),v=Math.min(Vn,Math.max(-Vn,i.apply(this,arguments)-d)),p,b=Math.min(Math.abs(v)/c,o.apply(this,arguments)),k=b*(v<0?-1:1),E;for(l=0;l<c;++l)(E=y[g[l]=l]=+t(a[l],l,a))>0&&(h+=E);for(e!=null?g.sort(function(S,P){return e(y[S],y[P])}):n!=null&&g.sort(function(S,P){return n(a[S],a[P])}),l=0,f=h?(v-c*k)/h:0;l<c;++l,d=p)u=g[l],E=y[u],p=d+(E>0?E*f:0)+k,y[u]={data:a[u],index:l,value:E,startAngle:d,endAngle:p,padAngle:b};return y}return s.value=function(a){return arguments.length?(t=typeof a=="function"?a:St(+a),s):t},s.sortValues=function(a){return arguments.length?(e=a,n=null,s):e},s.sort=function(a){return arguments.length?(n=a,e=null,s):n},s.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:St(+a),s):r},s.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:St(+a),s):i},s.padAngle=function(a){return arguments.length?(o=typeof a=="function"?a:St(+a),s):o},s}const Pn=t=>()=>t;function Pf(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ae(t,e,n){this.k=t,this.x=e,this.y=n}ae.prototype={constructor:ae,scale:function(t){return t===1?this:new ae(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new ae(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var hn=new ae(1,0,0);ae.prototype;function _r(t){t.stopImmediatePropagation()}function on(t){t.preventDefault(),t.stopImmediatePropagation()}function zf(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Rf(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Wi(){return this.__zoom||hn}function Df(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ff(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vf(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function Of(){var t=zf,e=Rf,n=Vf,r=Df,i=Ff,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=fu,c=Hr("start","zoom","end"),u,f,h,g=500,y=150,d=0,v=10;function p(m){m.property("__zoom",Wi).on("wheel.zoom",nt,{passive:!1}).on("mousedown.zoom",ot).on("dblclick.zoom",et).filter(i).on("touchstart.zoom",$).on("touchmove.zoom",O).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(m,C,A,z){var U=m.selection?m.selection():m;U.property("__zoom",Wi),m!==U?S(m,C,A,z):U.interrupt().each(function(){P(this,arguments).event(z).start().zoom(null,typeof C=="function"?C.apply(this,arguments):C).end()})},p.scaleBy=function(m,C,A,z){p.scaleTo(m,function(){var U=this.__zoom.k,L=typeof C=="function"?C.apply(this,arguments):C;return U*L},A,z)},p.scaleTo=function(m,C,A,z){p.transform(m,function(){var U=e.apply(this,arguments),L=this.__zoom,H=A==null?E(U):typeof A=="function"?A.apply(this,arguments):A,Q=L.invert(H),W=typeof C=="function"?C.apply(this,arguments):C;return n(k(b(L,W),H,Q),U,s)},A,z)},p.translateBy=function(m,C,A,z){p.transform(m,function(){return n(this.__zoom.translate(typeof C=="function"?C.apply(this,arguments):C,typeof A=="function"?A.apply(this,arguments):A),e.apply(this,arguments),s)},null,z)},p.translateTo=function(m,C,A,z,U){p.transform(m,function(){var L=e.apply(this,arguments),H=this.__zoom,Q=z==null?E(L):typeof z=="function"?z.apply(this,arguments):z;return n(hn.translate(Q[0],Q[1]).scale(H.k).translate(typeof C=="function"?-C.apply(this,arguments):-C,typeof A=="function"?-A.apply(this,arguments):-A),L,s)},z,U)};function b(m,C){return C=Math.max(o[0],Math.min(o[1],C)),C===m.k?m:new ae(C,m.x,m.y)}function k(m,C,A){var z=C[0]-A[0]*m.k,U=C[1]-A[1]*m.k;return z===m.x&&U===m.y?m:new ae(m.k,z,U)}function E(m){return[(+m[0][0]+ +m[1][0])/2,(+m[0][1]+ +m[1][1])/2]}function S(m,C,A,z){m.on("start.zoom",function(){P(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(z).end()}).tween("zoom",function(){var U=this,L=arguments,H=P(U,L).event(z),Q=e.apply(U,L),W=A==null?E(Q):typeof A=="function"?A.apply(U,L):A,it=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),rt=U.__zoom,Z=typeof C=="function"?C.apply(U,L):C,gt=l(rt.invert(W).concat(it/rt.k),Z.invert(W).concat(it/Z.k));return function(ht){if(ht===1)ht=Z;else{var V=gt(ht),J=it/V[2];ht=new ae(J,W[0]-V[0]*J,W[1]-V[1]*J)}H.zoom(null,ht)}})}function P(m,C,A){return!A&&m.__zooming||new B(m,C)}function B(m,C){this.that=m,this.args=C,this.active=0,this.sourceEvent=null,this.extent=e.apply(m,C),this.taps=0}B.prototype={event:function(m){return m&&(this.sourceEvent=m),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(m,C){return this.mouse&&m!=="mouse"&&(this.mouse[1]=C.invert(this.mouse[0])),this.touch0&&m!=="touch"&&(this.touch0[1]=C.invert(this.touch0[0])),this.touch1&&m!=="touch"&&(this.touch1[1]=C.invert(this.touch1[0])),this.that.__zoom=C,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(m){var C=Bt(this.that).datum();c.call(m,this.that,new Pf(m,{sourceEvent:this.sourceEvent,target:p,type:m,transform:this.that.__zoom,dispatch:c}),C)}};function nt(m,...C){if(!t.apply(this,arguments))return;var A=P(this,C).event(m),z=this.__zoom,U=Math.max(o[0],Math.min(o[1],z.k*Math.pow(2,r.apply(this,arguments)))),L=we(m);if(A.wheel)(A.mouse[0][0]!==L[0]||A.mouse[0][1]!==L[1])&&(A.mouse[1]=z.invert(A.mouse[0]=L)),clearTimeout(A.wheel);else{if(z.k===U)return;A.mouse=[L,z.invert(L)],Fn(this),A.start()}on(m),A.wheel=setTimeout(H,y),A.zoom("mouse",n(k(b(z,U),A.mouse[0],A.mouse[1]),A.extent,s));function H(){A.wheel=null,A.end()}}function ot(m,...C){if(h||!t.apply(this,arguments))return;var A=m.currentTarget,z=P(this,C,!0).event(m),U=Bt(m.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",it,!0),L=we(m,A),H=m.clientX,Q=m.clientY;Tl(m.view),_r(m),z.mouse=[L,this.__zoom.invert(L)],Fn(this),z.start();function W(rt){if(on(rt),!z.moved){var Z=rt.clientX-H,gt=rt.clientY-Q;z.moved=Z*Z+gt*gt>d}z.event(rt).zoom("mouse",n(k(z.that.__zoom,z.mouse[0]=we(rt,A),z.mouse[1]),z.extent,s))}function it(rt){U.on("mousemove.zoom mouseup.zoom",null),Cl(rt.view,z.moved),on(rt),z.event(rt).end()}}function et(m,...C){if(t.apply(this,arguments)){var A=this.__zoom,z=we(m.changedTouches?m.changedTouches[0]:m,this),U=A.invert(z),L=A.k*(m.shiftKey?.5:2),H=n(k(b(A,L),z,U),e.apply(this,C),s);on(m),a>0?Bt(this).transition().duration(a).call(S,H,z,m):Bt(this).call(p.transform,H,z,m)}}function $(m,...C){if(t.apply(this,arguments)){var A=m.touches,z=A.length,U=P(this,C,m.changedTouches.length===z).event(m),L,H,Q,W;for(_r(m),H=0;H<z;++H)Q=A[H],W=we(Q,this),W=[W,this.__zoom.invert(W),Q.identifier],U.touch0?!U.touch1&&U.touch0[2]!==W[2]&&(U.touch1=W,U.taps=0):(U.touch0=W,L=!0,U.taps=1+!!u);u&&(u=clearTimeout(u)),L&&(U.taps<2&&(f=W[0],u=setTimeout(function(){u=null},g)),Fn(this),U.start())}}function O(m,...C){if(this.__zooming){var A=P(this,C).event(m),z=m.changedTouches,U=z.length,L,H,Q,W;for(on(m),L=0;L<U;++L)H=z[L],Q=we(H,this),A.touch0&&A.touch0[2]===H.identifier?A.touch0[0]=Q:A.touch1&&A.touch1[2]===H.identifier&&(A.touch1[0]=Q);if(H=A.that.__zoom,A.touch1){var it=A.touch0[0],rt=A.touch0[1],Z=A.touch1[0],gt=A.touch1[1],ht=(ht=Z[0]-it[0])*ht+(ht=Z[1]-it[1])*ht,V=(V=gt[0]-rt[0])*V+(V=gt[1]-rt[1])*V;H=b(H,Math.sqrt(ht/V)),Q=[(it[0]+Z[0])/2,(it[1]+Z[1])/2],W=[(rt[0]+gt[0])/2,(rt[1]+gt[1])/2]}else if(A.touch0)Q=A.touch0[0],W=A.touch0[1];else return;A.zoom("touch",n(k(H,Q,W),A.extent,s))}}function F(m,...C){if(this.__zooming){var A=P(this,C).event(m),z=m.changedTouches,U=z.length,L,H;for(_r(m),h&&clearTimeout(h),h=setTimeout(function(){h=null},g),L=0;L<U;++L)H=z[L],A.touch0&&A.touch0[2]===H.identifier?delete A.touch0:A.touch1&&A.touch1[2]===H.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(H=we(H,this),Math.hypot(f[0]-H[0],f[1]-H[1])<v)){var Q=Bt(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return p.wheelDelta=function(m){return arguments.length?(r=typeof m=="function"?m:Pn(+m),p):r},p.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Pn(!!m),p):t},p.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Pn(!!m),p):i},p.extent=function(m){return arguments.length?(e=typeof m=="function"?m:Pn([[+m[0][0],+m[0][1]],[+m[1][0],+m[1][1]]]),p):e},p.scaleExtent=function(m){return arguments.length?(o[0]=+m[0],o[1]=+m[1],p):[o[0],o[1]]},p.translateExtent=function(m){return arguments.length?(s[0][0]=+m[0][0],s[1][0]=+m[1][0],s[0][1]=+m[0][1],s[1][1]=+m[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(m){return arguments.length?(n=m,p):n},p.duration=function(m){return arguments.length?(a=+m,p):a},p.interpolate=function(m){return arguments.length?(l=m,p):l},p.on=function(){var m=c.on.apply(c,arguments);return m===c?p:m},p.clickDistance=function(m){return arguments.length?(d=(m=+m)*m,p):Math.sqrt(d)},p.tapDistance=function(m){return arguments.length?(v=+m,p):v},p}function qf(t){let e,n;const r=t[2].default,i=_s(r,t,t[1],null);return{c(){e=N("div"),i&&i.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var s=M(e);i&&i.l(s),s.forEach(w),this.h()},h(){x(e,"class","box svelte-fcyz86")},m(o,s){G(o,e,s),i&&i.m(e,null),n=!0},p(o,[s]){i&&i.p&&(!n||s&2)&&vs(i,r,o,o[1],n?ws(r,o[1],s,null):ys(o[1]),null)},i(o){n||(ee(i,o),n=!0)},o(o){le(i,o),n=!1},d(o){o&&w(e),i&&i.d(o)}}}function Bf(t,e,n){let{$$slots:r={},$$scope:i}=e,{showPanel:o}=e;return t.$$set=s=>{"showPanel"in s&&n(0,o=s.showPanel),"$$scope"in s&&n(1,i=s.$$scope)},[o,i,r]}class Uf extends Ae{constructor(e){super(),Ne(this,e,Bf,qf,Te,{showPanel:0})}}function Zi(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function Qi(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function Ji(t){let e,n,r;return{c(){e=Ct("path"),this.h()},l(i){e=It(i,"path",{d:!0,fill:!0}),M(e).forEach(w),this.h()},h(){x(e,"d",n=t[1]({startAngle:t[7].startAngle,endAngle:t[7].endAngle})),x(e,"fill",r=t[2](t[7].data.industry))},m(i,o){G(i,e,o)},p(i,o){o&1&&n!==(n=i[1]({startAngle:i[7].startAngle,endAngle:i[7].endAngle}))&&x(e,"d",n),o&1&&r!==(r=i[2](i[7].data.industry))&&x(e,"fill",r)},d(i){i&&w(e)}}}function Lf(t){let e=t[0][t[3]].data.industry+"",n;return{c(){n=R(e)},l(r){n=D(r,e)},m(r,i){G(r,n,i)},p(r,i){i&1&&e!==(e=r[0][r[3]].data.industry+"")&&lt(n,e)},d(r){r&&w(n)}}}function ji(t){let e,n,r,i,o=t[0][t[9]].data.industry+"",s,a;return{c(){e=N("div"),n=N("div"),r=j(),i=N("span"),s=R(o),a=j(),this.h()},l(l){e=T(l,"DIV",{class:!0});var c=M(e);n=T(c,"DIV",{class:!0,style:!0}),M(n).forEach(w),r=tt(c),i=T(c,"SPAN",{class:!0});var u=M(i);s=D(u,o),u.forEach(w),a=tt(c),c.forEach(w),this.h()},h(){x(n,"class","legend-color svelte-1xwaj5q"),ct(n,"background-color",t[2](t[7].data.industry)),x(i,"class","legend-label svelte-1xwaj5q"),x(e,"class","legend-item svelte-1xwaj5q")},m(l,c){G(l,e,c),_(e,n),_(e,r),_(e,i),_(i,s),_(e,a)},p(l,c){c&1&&ct(n,"background-color",l[2](l[7].data.industry)),c&1&&o!==(o=l[0][l[9]].data.industry+"")&&lt(s,o)},d(l){l&&w(e)}}}function Hf(t){let e,n,r,i,o,s,a,l,c,u,f=t[0],h=[];for(let v=0;v<f.length;v+=1)h[v]=Ji(Qi(t,f,v));let g=t[3]!==-1&&Lf(t),y=t[0],d=[];for(let v=0;v<y.length;v+=1)d[v]=ji(Zi(t,y,v));return{c(){e=N("div"),n=N("h3"),r=R("By Employment"),i=j(),o=Ct("svg"),s=Ct("g");for(let v=0;v<h.length;v+=1)h[v].c();a=j(),l=N("div"),g&&g.c(),c=j(),u=N("div");for(let v=0;v<d.length;v+=1)d[v].c();this.h()},l(v){e=T(v,"DIV",{class:!0});var p=M(e);n=T(p,"H3",{class:!0});var b=M(n);r=D(b,"By Employment"),b.forEach(w),i=tt(p),o=It(p,"svg",{width:!0,height:!0});var k=M(o);s=It(k,"g",{transform:!0});var E=M(s);for(let B=0;B<h.length;B+=1)h[B].l(E);E.forEach(w),k.forEach(w),a=tt(p),l=T(p,"DIV",{class:!0,style:!0});var S=M(l);g&&g.l(S),S.forEach(w),p.forEach(w),c=tt(v),u=T(v,"DIV",{class:!0});var P=M(u);for(let B=0;B<d.length;B+=1)d[B].l(P);P.forEach(w),this.h()},h(){x(n,"class","svelte-1xwaj5q"),x(s,"transform","translate(65, 50)"),x(o,"width","200"),x(o,"height","200"),x(l,"class",Lr(t[3]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-1xwaj5q"),ct(l,"left",t[4].x-5+"px"),ct(l,"bottom",t[4].y-400+"px"),x(e,"class","visualization svelte-1xwaj5q"),x(u,"class","legend-container svelte-1xwaj5q")},m(v,p){G(v,e,p),_(e,n),_(n,r),_(e,i),_(e,o),_(o,s);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(s,null);_(e,a),_(e,l),g&&g.m(l,null),G(v,c,p),G(v,u,p);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(u,null)},p(v,[p]){if(p&7){f=v[0];let b;for(b=0;b<f.length;b+=1){const k=Qi(v,f,b);h[b]?h[b].p(k,p):(h[b]=Ji(k),h[b].c(),h[b].m(s,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=f.length}if(v[3]!==-1&&g.p(v,p),p&5){y=v[0];let b;for(b=0;b<y.length;b+=1){const k=Zi(v,y,b);d[b]?d[b].p(k,p):(d[b]=ji(k),d[b].c(),d[b].m(u,null))}for(;b<d.length;b+=1)d[b].d(1);d.length=y.length}},i:dt,o:dt,d(v){v&&w(e),ue(h,v),g&&g.d(),v&&w(c),v&&w(u),ue(d,v)}}}function Xf(t,e,n){let r=us().innerRadius(5).outerRadius(50).padAngle(.015).cornerRadius(4),i=cs().value(u=>u.employment_pct),{employment_data:o}=e,s=i(o);const a=kn().range(as).domain([0,1,2,3,4,5,6,7]);let l=-1,c={x:0,y:0};return t.$$set=u=>{"employment_data"in u&&n(5,o=u.employment_data)},t.$$.update=()=>{t.$$.dirty&32&&n(0,s=i(o))},[s,r,a,l,c,o]}class Yf extends Ae{constructor(e){super(),Ne(this,e,Xf,Hf,Te,{employment_data:5})}}function to(t,e,n){const r=t.slice();return r[7]=e[n],r[9]=n,r}function eo(t){let e,n,r;return{c(){e=Ct("path"),this.h()},l(i){e=It(i,"path",{d:!0,fill:!0}),M(e).forEach(w),this.h()},h(){x(e,"d",n=t[1]({startAngle:t[7].startAngle,endAngle:t[7].endAngle})),x(e,"fill",r=t[2](t[7].data.industry))},m(i,o){G(i,e,o)},p(i,o){o&1&&n!==(n=i[1]({startAngle:i[7].startAngle,endAngle:i[7].endAngle}))&&x(e,"d",n),o&1&&r!==(r=i[2](i[7].data.industry))&&x(e,"fill",r)},d(i){i&&w(e)}}}function Gf(t){let e=t[0][t[3]].data.industry+"",n;return{c(){n=R(e)},l(r){n=D(r,e)},m(r,i){G(r,n,i)},p(r,i){i&1&&e!==(e=r[0][r[3]].data.industry+"")&&lt(n,e)},d(r){r&&w(n)}}}function Kf(t){let e,n,r,i,o,s,a,l,c=t[0],u=[];for(let h=0;h<c.length;h+=1)u[h]=eo(to(t,c,h));let f=t[3]!==-1&&Gf(t);return{c(){e=N("div"),n=N("h3"),r=R("By Emissions"),i=j(),o=Ct("svg"),s=Ct("g");for(let h=0;h<u.length;h+=1)u[h].c();a=j(),l=N("div"),f&&f.c(),this.h()},l(h){e=T(h,"DIV",{class:!0});var g=M(e);n=T(g,"H3",{style:!0,class:!0});var y=M(n);r=D(y,"By Emissions"),y.forEach(w),i=tt(g),o=It(g,"svg",{width:!0,height:!0});var d=M(o);s=It(d,"g",{transform:!0});var v=M(s);for(let b=0;b<u.length;b+=1)u[b].l(v);v.forEach(w),d.forEach(w),a=tt(g),l=T(g,"DIV",{class:!0,style:!0});var p=M(l);f&&f.l(p),p.forEach(w),g.forEach(w),this.h()},h(){ct(n,"text-align","center"),x(n,"class","svelte-1em0wpg"),x(s,"transform","translate(100, 50)"),x(o,"width","200"),x(o,"height","200"),x(l,"class",Lr(t[3]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-1em0wpg"),ct(l,"left",t[4].x-5+"px"),ct(l,"bottom",t[4].y-850+"px"),x(e,"class","visualization svelte-1em0wpg")},m(h,g){G(h,e,g),_(e,n),_(n,r),_(e,i),_(e,o),_(o,s);for(let y=0;y<u.length;y+=1)u[y]&&u[y].m(s,null);_(e,a),_(e,l),f&&f.m(l,null)},p(h,[g]){if(g&7){c=h[0];let y;for(y=0;y<c.length;y+=1){const d=to(h,c,y);u[y]?u[y].p(d,g):(u[y]=eo(d),u[y].c(),u[y].m(s,null))}for(;y<u.length;y+=1)u[y].d(1);u.length=c.length}h[3]!==-1&&f.p(h,g)},i:dt,o:dt,d(h){h&&w(e),ue(u,h),f&&f.d()}}}function Wf(t,e,n){let r=us().innerRadius(5).outerRadius(50).padAngle(.015).cornerRadius(4),i=cs().value(u=>u.emissions_pct),{emissions_data:o}=e,s=i(o);const a=kn().range(as).domain([0,1,2,3,4,5,6,7]);let l=-1,c={x:0,y:0};return t.$$set=u=>{"emissions_data"in u&&n(5,o=u.emissions_data)},t.$$.update=()=>{t.$$.dirty&32&&n(0,s=i(o))},[s,r,a,l,c,o]}class Zf extends Ae{constructor(e){super(),Ne(this,e,Wf,Kf,Te,{emissions_data:5})}}function no(t,e,n){const r=t.slice();return r[12]=e[n],r[14]=n,r}function ro(t,e,n){const r=t.slice();return r[15]=e[n],r}function io(t){let e,n,r,i=t[15]+"",o,s;return{c(){e=Ct("g"),n=Ct("line"),r=Ct("text"),o=R(i),this.h()},l(a){e=It(a,"g",{transform:!0});var l=M(e);n=It(l,"line",{y2:!0,stroke:!0}),M(n).forEach(w),r=It(l,"text",{"text-anchor":!0,dy:!0,y:!0});var c=M(r);o=D(c,i),c.forEach(w),l.forEach(w),this.h()},h(){x(n,"y2",t[4]),x(n,"stroke","black"),x(r,"text-anchor","middle"),x(r,"dy",".7em"),x(r,"y",t[4]+3),x(e,"transform",s=`translate(${t[1](t[15])},0)`)},m(a,l){G(a,e,l),_(e,n),_(e,r),_(r,o)},p(a,l){l&2&&i!==(i=a[15]+"")&&lt(o,i),l&2&&s!==(s=`translate(${a[1](a[15])},0)`)&&x(e,"transform",s)},d(a){a&&w(e)}}}function oo(t){let e,n=t[12].scale+"",r,i,o,s,a,l,c;return{c(){e=Ct("text"),r=R(n),o=Ct("line"),s=Ct("rect"),this.h()},l(u){e=It(u,"text",{"text-anchor":!0,x:!0,dy:!0,y:!0});var f=M(e);r=D(f,n),f.forEach(w),o=It(u,"line",{x1:!0,y1:!0,x2:!0,y2:!0,stroke:!0}),M(o).forEach(w),s=It(u,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),M(s).forEach(w),this.h()},h(){x(e,"text-anchor","end"),x(e,"x","-3"),x(e,"dy",".3em"),x(e,"y",i=t[2](t[12].scale)+t[2].bandwidth()/2),x(o,"x1","0"),x(o,"y1","119"),x(o,"x2","220"),x(o,"y2","119"),x(o,"stroke","black"),x(s,"x","0"),x(s,"y",a=t[2](t[12].scale)),x(s,"width",l=t[1](t[12].ECF)),x(s,"height",c=t[2].bandwidth()),x(s,"fill",t[7][t[14]].color)},m(u,f){G(u,e,f),_(e,r),G(u,o,f),G(u,s,f)},p(u,f){f&1&&n!==(n=u[12].scale+"")&&lt(r,n),f&5&&i!==(i=u[2](u[12].scale)+u[2].bandwidth()/2)&&x(e,"y",i),f&5&&a!==(a=u[2](u[12].scale))&&x(s,"y",a),f&3&&l!==(l=u[1](u[12].ECF))&&x(s,"width",l),f&4&&c!==(c=u[2].bandwidth())&&x(s,"height",c)},d(u){u&&w(e),u&&w(o),u&&w(s)}}}function Qf(t){let e=t[0][t[5]].ECF+"",n;return{c(){n=R(e)},l(r){n=D(r,e)},m(r,i){G(r,n,i)},p(r,i){i&1&&e!==(e=r[0][r[5]].ECF+"")&&lt(n,e)},d(r){r&&w(n)}}}function Jf(t){let e,n,r,i,o,s,a,l,c,u=t[1].ticks(),f=[];for(let d=0;d<u.length;d+=1)f[d]=io(ro(t,u,d));let h=t[0],g=[];for(let d=0;d<h.length;d+=1)g[d]=oo(no(t,h,d));let y=t[5]!==-1&&Qf(t);return{c(){e=N("div"),n=Ct("svg"),r=Ct("g");for(let d=0;d<f.length;d+=1)f[d].c();i=re();for(let d=0;d<g.length;d+=1)g[d].c();o=j(),s=N("p"),a=R("Carbon footprint per employee (tons CO2 per employee)"),l=j(),c=N("div"),y&&y.c(),this.h()},l(d){e=T(d,"DIV",{class:!0});var v=M(e);n=It(v,"svg",{width:!0,height:!0});var p=M(n);r=It(p,"g",{transform:!0});var b=M(r);for(let S=0;S<f.length;S+=1)f[S].l(b);i=re();for(let S=0;S<g.length;S+=1)g[S].l(b);b.forEach(w),p.forEach(w),o=tt(v),s=T(v,"P",{class:!0});var k=M(s);a=D(k,"Carbon footprint per employee (tons CO2 per employee)"),k.forEach(w),l=tt(v),c=T(v,"DIV",{class:!0,style:!0});var E=M(c);y&&y.l(E),E.forEach(w),v.forEach(w),this.h()},h(){x(r,"transform",`translate(${t[3].left},${t[3].top})`),x(n,"width",fs),x(n,"height",hs),x(s,"class","svelte-14ps0h4"),x(c,"class",Lr(t[5]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-14ps0h4"),ct(c,"left",t[6].x-90+"px"),ct(c,"bottom",t[6].y-500+"px"),x(e,"class","visualization svelte-14ps0h4")},m(d,v){G(d,e,v),_(e,n),_(n,r);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(r,null);_(r,i);for(let p=0;p<g.length;p+=1)g[p]&&g[p].m(r,null);_(e,o),_(e,s),_(s,a),_(e,l),_(e,c),y&&y.m(c,null)},p(d,[v]){if(v&18){u=d[1].ticks();let p;for(p=0;p<u.length;p+=1){const b=ro(d,u,p);f[p]?f[p].p(b,v):(f[p]=io(b),f[p].c(),f[p].m(r,i))}for(;p<f.length;p+=1)f[p].d(1);f.length=u.length}if(v&135){h=d[0];let p;for(p=0;p<h.length;p+=1){const b=no(d,h,p);g[p]?g[p].p(b,v):(g[p]=oo(b),g[p].c(),g[p].m(r,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=h.length}d[5]!==-1&&y.p(d,v)},i:dt,o:dt,d(d){d&&w(e),ue(f,d),ue(g,d),y&&y.d()}}}let fs=300,hs=150;function jf(t,e,n){let r,i,o,s,{ecf_data:a}=e;const l={top:0,right:20,bottom:30,left:60},c=hs-l.top-l.bottom,u=fs-l.left-l.right;let f=-1,h={x:0,y:0};kn(ls).domain([0,1,2]);const g=[{scale:"County",color:"black"},{scale:"State",color:"gray"},{scale:"National",color:"gray"}];return t.$$set=y=>{"ecf_data"in y&&n(0,a=y.ecf_data)},t.$$.update=()=>{t.$$.dirty&1&&n(9,r=a.map(y=>y.scale)),t.$$.dirty&1&&n(8,i=a.map(y=>+y.ECF)),t.$$.dirty&512&&n(2,o=os().domain(r).range([0,c]).padding(.1)),t.$$.dirty&256&&n(1,s=ri().domain([0,Math.max.apply(null,i)]).range([0,u]))},[a,s,o,l,c,f,h,g,i,r]}class th extends Ae{constructor(e){super(),Ne(this,e,jf,Jf,Te,{ecf_data:0})}}function so(t,e,n){const r=t.slice();return r[17]=e[n],r}function ao(t,e,n){const r=t.slice();return r[17]=e[n],r}function lo(t){let e,n;return e=new Uf({props:{showPanel:t[0],$$slots:{default:[ih]},$$scope:{ctx:t}}}),{c(){dn(e.$$.fragment)},l(r){pn(e.$$.fragment,r)},m(r,i){gn(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.showPanel=r[0]),i&4194334&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(ee(e.$$.fragment,r),n=!0)},o(r){le(e.$$.fragment,r),n=!1},d(r){mn(e,r)}}}function uo(t){let e,n=t[17].county+"",r,i,o=t[17].state+"",s;return{c(){e=N("h1"),r=R(n),i=R(", "),s=R(o),this.h()},l(a){e=T(a,"H1",{class:!0});var l=M(e);r=D(l,n),i=D(l,", "),s=D(l,o),l.forEach(w),this.h()},h(){x(e,"class","svelte-z0iq0w")},m(a,l){G(a,e,l),_(e,r),_(e,i),_(e,s)},p(a,l){l&2&&n!==(n=a[17].county+"")&&lt(r,n),l&2&&o!==(o=a[17].state+"")&&lt(s,o)},d(a){a&&w(e)}}}function co(t){let e,n,r=Math.round(t[17].population)+"",i,o,s=Math.round(t[17].mig_pop)+"",a,l,c=Math.round(t[17].mig_pop*100/t[17].population)+"",u,f,h=t[17].top_1+"",g,y,d=t[17].top_2+"",v,p,b=t[17].top_3+"",k,E,S=Math.round(t[17].income)+"",P,B,nt=Math.round(t[17].poverty_rate*100)+"",ot,et;return{c(){e=N("p"),n=R("There are "),i=R(r),o=R(` people in this county, of which
            `),a=R(s),l=R(" are migrants ("),u=R(c),f=R("%), mostly from "),g=R(h),y=R(", "),v=R(d),p=R(", and "),k=R(b),E=R(`. The county
            median annual income is $`),P=R(S),B=R(", and the poverty rate is "),ot=R(nt),et=R(`%.
          `),this.h()},l($){e=T($,"P",{class:!0});var O=M(e);n=D(O,"There are "),i=D(O,r),o=D(O,` people in this county, of which
            `),a=D(O,s),l=D(O," are migrants ("),u=D(O,c),f=D(O,"%), mostly from "),g=D(O,h),y=D(O,", "),v=D(O,d),p=D(O,", and "),k=D(O,b),E=D(O,`. The county
            median annual income is $`),P=D(O,S),B=D(O,", and the poverty rate is "),ot=D(O,nt),et=D(O,`%.
          `),O.forEach(w),this.h()},h(){x(e,"class","svelte-z0iq0w")},m($,O){G($,e,O),_(e,n),_(e,i),_(e,o),_(e,a),_(e,l),_(e,u),_(e,f),_(e,g),_(e,y),_(e,v),_(e,p),_(e,k),_(e,E),_(e,P),_(e,B),_(e,ot),_(e,et)},p($,O){O&2&&r!==(r=Math.round($[17].population)+"")&&lt(i,r),O&2&&s!==(s=Math.round($[17].mig_pop)+"")&&lt(a,s),O&2&&c!==(c=Math.round($[17].mig_pop*100/$[17].population)+"")&&lt(u,c),O&2&&h!==(h=$[17].top_1+"")&&lt(g,h),O&2&&d!==(d=$[17].top_2+"")&&lt(v,d),O&2&&b!==(b=$[17].top_3+"")&&lt(k,b),O&2&&S!==(S=Math.round($[17].income)+"")&&lt(P,S),O&2&&nt!==(nt=Math.round($[17].poverty_rate*100)+"")&&lt(ot,nt)},d($){$&&w(e)}}}function eh(t){return{c:dt,l:dt,m:dt,p:dt,i:dt,o:dt,d:dt}}function nh(t){let e,n,r;function i(s){t[10](s)}let o={};return t[2]!==void 0&&(o.emissions_data=t[2]),e=new Zf({props:o}),vr.push(()=>yr(e,"emissions_data",i)),{c(){dn(e.$$.fragment)},l(s){pn(e.$$.fragment,s)},m(s,a){gn(e,s,a),r=!0},p(s,a){const l={};!n&&a&4&&(n=!0,l.emissions_data=s[2],wr(()=>n=!1)),e.$set(l)},i(s){r||(ee(e.$$.fragment,s),r=!0)},o(s){le(e.$$.fragment,s),r=!1},d(s){mn(e,s)}}}function rh(t){return{c:dt,l:dt,m:dt,p:dt,i:dt,o:dt,d:dt}}function ih(t){let e,n,r,i,o,s,a,l,c,u,f,h,g,y,d,v,p,b,k,E,S,P,B,nt,ot,et,$,O,F,m,C,A,z,U,L=t[1],H=[];for(let V=0;V<L.length;V+=1)H[V]=uo(ao(t,L,V));let Q=t[1],W=[];for(let V=0;V<Q.length;V+=1)W[V]=co(so(t,Q,V));function it(V){t[9](V)}let rt={};t[4]!==void 0&&(rt.ecf_data=t[4]),P=new th({props:rt}),vr.push(()=>yr(P,"ecf_data",it));let Z={ctx:t,current:null,token:null,hasCatch:!1,pending:rh,then:nh,catch:eh,blocks:[,,,]};Es(t[6](),Z);function gt(V){t[11](V)}let ht={};return t[3]!==void 0&&(ht.employment_data=t[3]),m=new Yf({props:ht}),vr.push(()=>yr(m,"employment_data",gt)),{c(){e=N("div"),n=N("button"),r=N("span"),i=R("x"),o=j(),s=N("div");for(let V=0;V<H.length;V+=1)H[V].c();a=j(),l=N("div");for(let V=0;V<W.length;V+=1)W[V].c();c=j(),u=N("div"),f=N("div"),h=N("h2"),g=R("Carbon footprint comparison"),y=j(),d=N("div"),v=N("h2"),p=R("Industry Breakdown"),b=j(),k=N("div"),E=N("div"),S=N("div"),dn(P.$$.fragment),nt=j(),ot=N("div"),et=N("div"),Z.block.c(),$=j(),O=N("div"),F=N("div"),dn(m.$$.fragment),this.h()},l(V){e=T(V,"DIV",{class:!0});var J=M(e);n=T(J,"BUTTON",{class:!0});var Y=M(n);r=T(Y,"SPAN",{class:!0});var X=M(r);i=D(X,"x"),X.forEach(w),Y.forEach(w),o=tt(J),s=T(J,"DIV",{class:!0});var q=M(s);for(let I=0;I<H.length;I+=1)H[I].l(q);q.forEach(w),a=tt(J),l=T(J,"DIV",{class:!0});var st=M(l);for(let I=0;I<W.length;I+=1)W[I].l(st);st.forEach(w),J.forEach(w),c=tt(V),u=T(V,"DIV",{class:!0});var K=M(u);f=T(K,"DIV",{class:!0});var mt=M(f);h=T(mt,"H2",{class:!0});var $t=M(h);g=D($t,"Carbon footprint comparison"),$t.forEach(w),mt.forEach(w),y=tt(K),d=T(K,"DIV",{class:!0});var Pt=M(d);v=T(Pt,"H2",{class:!0});var wt=M(v);p=D(wt,"Industry Breakdown"),wt.forEach(w),Pt.forEach(w),K.forEach(w),b=tt(V),k=T(V,"DIV",{class:!0});var _t=M(k);E=T(_t,"DIV",{class:!0});var Vt=M(E);S=T(Vt,"DIV",{class:!0});var zt=M(S);pn(P.$$.fragment,zt),zt.forEach(w),Vt.forEach(w),nt=tt(_t),ot=T(_t,"DIV",{class:!0});var vt=M(ot);et=T(vt,"DIV",{class:!0});var Ot=M(et);Z.block.l(Ot),Ot.forEach(w),vt.forEach(w),$=tt(_t),O=T(_t,"DIV",{class:!0});var pt=M(O);F=T(pt,"DIV",{class:!0});var yt=M(F);pn(m.$$.fragment,yt),yt.forEach(w),pt.forEach(w),_t.forEach(w),this.h()},h(){x(r,"class","icon-cross svelte-z0iq0w"),x(n,"class","close-button svelte-z0iq0w"),x(s,"class","col-md-1 svelte-z0iq0w"),x(l,"class","col-md-3 svelte-z0iq0w"),x(e,"class","row svelte-z0iq0w"),x(h,"class","svelte-z0iq0w"),x(f,"class","col-md-2 svelte-z0iq0w"),x(v,"class","svelte-z0iq0w"),x(d,"class","col-md-2 svelte-z0iq0w"),x(u,"class","row svelte-z0iq0w"),x(S,"class","graph svelte-z0iq0w"),x(E,"class","col-md-1 svelte-z0iq0w"),x(et,"class","graph svelte-z0iq0w"),x(ot,"class","col-md-1 svelte-z0iq0w"),x(F,"class","graph svelte-z0iq0w"),x(O,"class","col-md-2 svelte-z0iq0w"),x(k,"class","row svelte-z0iq0w")},m(V,J){G(V,e,J),_(e,n),_(n,r),_(r,i),_(e,o),_(e,s);for(let Y=0;Y<H.length;Y+=1)H[Y]&&H[Y].m(s,null);_(e,a),_(e,l);for(let Y=0;Y<W.length;Y+=1)W[Y]&&W[Y].m(l,null);G(V,c,J),G(V,u,J),_(u,f),_(f,h),_(h,g),_(u,y),_(u,d),_(d,v),_(v,p),G(V,b,J),G(V,k,J),_(k,E),_(E,S),gn(P,S,null),_(k,nt),_(k,ot),_(ot,et),Z.block.m(et,Z.anchor=null),Z.mount=()=>et,Z.anchor=null,_(k,$),_(k,O),_(O,F),gn(m,F,null),A=!0,z||(U=Et(n,"click",t[5]),z=!0)},p(V,J){if(t=V,J&2){L=t[1];let q;for(q=0;q<L.length;q+=1){const st=ao(t,L,q);H[q]?H[q].p(st,J):(H[q]=uo(st),H[q].c(),H[q].m(s,null))}for(;q<H.length;q+=1)H[q].d(1);H.length=L.length}if(J&2){Q=t[1];let q;for(q=0;q<Q.length;q+=1){const st=so(t,Q,q);W[q]?W[q].p(st,J):(W[q]=co(st),W[q].c(),W[q].m(l,null))}for(;q<W.length;q+=1)W[q].d(1);W.length=Q.length}const Y={};!B&&J&16&&(B=!0,Y.ecf_data=t[4],wr(()=>B=!1)),P.$set(Y),ks(Z,t,J);const X={};!C&&J&8&&(C=!0,X.employment_data=t[3],wr(()=>C=!1)),m.$set(X)},i(V){A||(ee(P.$$.fragment,V),ee(Z.block),ee(m.$$.fragment,V),A=!0)},o(V){le(P.$$.fragment,V);for(let J=0;J<3;J+=1){const Y=Z.blocks[J];le(Y)}le(m.$$.fragment,V),A=!1},d(V){V&&w(e),ue(H,V),ue(W,V),V&&w(c),V&&w(u),V&&w(b),V&&w(k),mn(P),Z.block.d(),Z.token=null,Z=null,mn(m),z=!1,U()}}}function oh(t){let e,n,r=t[0]&&lo(t);return{c(){r&&r.c(),e=re()},l(i){r&&r.l(i),e=re()},m(i,o){r&&r.m(i,o),G(i,e,o),n=!0},p(i,[o]){i[0]?r?(r.p(i,o),o&1&&ee(r,1)):(r=lo(i),r.c(),ee(r,1),r.m(e.parentNode,e)):r&&(bs(),le(r,1,1,()=>{r=null}),xs())},i(i){n||(ee(r),n=!0)},o(i){le(r),n=!1},d(i){r&&r.d(i),i&&w(e)}}}let sh="https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/mvp/my-app/static/socioec_ECF.csv",ah="https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/socioeconomic-panel/ACS/emissions.csv",lh="https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/socioeconomic-panel/ACS/employment.csv",uh="https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/socioeconomic-panel/ACS/ecf.csv";function ch(t,e,n){let{FIPScode:r}=e,{showPanel:i}=e,o=ii("resetIsolation"),s=ii("setShowPanelFalse");function a(){s(),o()}let l=[],c=[],u=[],f=[],h=[];async function g(){r&&n(2,c=await Re(ah,function(E){return{industry:E.FIPS,emissions_pct:E[r]}}))}async function y(){n(3,f=await Re(lh,function(E){return{industry:E.FIPS,employment_pct:E[r]}}))}async function d(){n(4,h=await Re(uh,function(E){return{scale:E.FIPS,ECF:E[r]}}))}async function v(){n(8,u=await Re(sh,function(E){let S=E.FIPS;return S.length===4&&(S="0"+S),{county:E.COUNTY,state:E.STATE,population:E.POP,mig_pop:E.MIG_TOT,FIPS:S,poverty_rate:E.POV_RATE,income:E.INC_IND_TOT,top_1:E.top_1,top_2:E.top_2,top_3:E.top_3}}))}function p(E){h=E,n(4,h)}function b(E){c=E,n(2,c)}function k(E){f=E,n(3,f)}return t.$$set=E=>{"FIPScode"in E&&n(7,r=E.FIPScode),"showPanel"in E&&n(0,i=E.showPanel)},t.$$.update=()=>{t.$$.dirty&128&&(g(),y(),d(),v()),t.$$.dirty&384&&n(1,l=u.filter(E=>E.FIPS===r))},[i,l,c,f,h,a,g,r,u,p,b,k]}class fh extends Ae{constructor(e){super(),Ne(this,e,ch,oh,Te,{FIPScode:7,showPanel:0})}}function fo(t){let e;function n(o,s){if(o[5]===-1)return _h;if(o[5]===0)return mh;if(o[5]===1)return gh;if(o[5]===2)return ph;if(o[5]===3)return dh;if(o[5]===4)return hh}let r=n(t),i=r&&r(t);return{c(){i&&i.c(),e=re()},l(o){i&&i.l(o),e=re()},m(o,s){i&&i.m(o,s),G(o,e,s)},p(o,s){r===(r=n(o))&&i?i.p(o,s):(i&&i.d(1),i=r&&r(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i&&i.d(o),o&&w(e)}}}function hh(t){let e,n,r,i,o,s,a,l,c,u,f,h,g,y;return{c(){e=R(`:
        `),n=N("div"),r=N("div"),i=N("h2"),o=R(t[1]),s=j(),a=N("p"),l=R(t[2]),c=j(),u=N("div"),f=N("button"),h=R("OK"),this.h()},l(d){e=D(d,`:
        `),n=T(d,"DIV",{role:!0,class:!0});var v=M(n);r=T(v,"DIV",{class:!0});var p=M(r);i=T(p,"H2",{class:!0});var b=M(i);o=D(b,t[1]),b.forEach(w),s=tt(p),a=T(p,"P",{class:!0});var k=M(a);l=D(k,t[2]),k.forEach(w),c=tt(p),u=T(p,"DIV",{class:!0});var E=M(u);f=T(E,"BUTTON",{});var S=M(f);h=D(S,"OK"),S.forEach(w),E.forEach(w),p.forEach(w),v.forEach(w),this.h()},h(){x(i,"class","svelte-iskw2g"),x(a,"class","svelte-iskw2g"),x(u,"class","actions svelte-iskw2g"),x(r,"class","contents svelte-iskw2g"),x(n,"role","dialog"),x(n,"class","modal2 svelte-iskw2g")},m(d,v){G(d,e,v),G(d,n,v),_(n,r),_(r,i),_(i,o),_(r,s),_(r,a),_(a,l),_(r,c),_(r,u),_(u,f),_(f,h),g||(y=Et(f,"click",Ke),g=!0)},p(d,v){v&2&&lt(o,d[1]),v&4&&lt(l,d[2])},d(d){d&&w(e),d&&w(n),g=!1,y()}}}function dh(t){let e,n,r,i,o,s,a,l,c,u,f,h,g,y;return{c(){e=R(`:
        `),n=N("div"),r=N("div"),i=N("h2"),o=R(t[1]),s=j(),a=N("p"),l=R(t[2]),c=j(),u=N("div"),f=N("button"),h=R("OK"),this.h()},l(d){e=D(d,`:
        `),n=T(d,"DIV",{role:!0,class:!0});var v=M(n);r=T(v,"DIV",{class:!0});var p=M(r);i=T(p,"H2",{class:!0});var b=M(i);o=D(b,t[1]),b.forEach(w),s=tt(p),a=T(p,"P",{class:!0});var k=M(a);l=D(k,t[2]),k.forEach(w),c=tt(p),u=T(p,"DIV",{class:!0});var E=M(u);f=T(E,"BUTTON",{});var S=M(f);h=D(S,"OK"),S.forEach(w),E.forEach(w),p.forEach(w),v.forEach(w),this.h()},h(){x(i,"class","svelte-iskw2g"),x(a,"class","svelte-iskw2g"),x(u,"class","actions svelte-iskw2g"),x(r,"class","contents svelte-iskw2g"),x(n,"role","dialog"),x(n,"class","modal1 svelte-iskw2g")},m(d,v){G(d,e,v),G(d,n,v),_(n,r),_(r,i),_(i,o),_(r,s),_(r,a),_(a,l),_(r,c),_(r,u),_(u,f),_(f,h),g||(y=Et(f,"click",Ke),g=!0)},p(d,v){v&2&&lt(o,d[1]),v&4&&lt(l,d[2])},d(d){d&&w(e),d&&w(n),g=!1,y()}}}function ph(t){let e,n,r,i,o,s,a,l,c,u,f,h,g,y;return{c(){e=R(`:
        `),n=N("div"),r=N("div"),i=N("h2"),o=R(t[1]),s=j(),a=N("p"),l=R(t[2]),c=j(),u=N("div"),f=N("button"),h=R("OK"),this.h()},l(d){e=D(d,`:
        `),n=T(d,"DIV",{role:!0,class:!0});var v=M(n);r=T(v,"DIV",{class:!0});var p=M(r);i=T(p,"H2",{class:!0});var b=M(i);o=D(b,t[1]),b.forEach(w),s=tt(p),a=T(p,"P",{class:!0});var k=M(a);l=D(k,t[2]),k.forEach(w),c=tt(p),u=T(p,"DIV",{class:!0});var E=M(u);f=T(E,"BUTTON",{});var S=M(f);h=D(S,"OK"),S.forEach(w),E.forEach(w),p.forEach(w),v.forEach(w),this.h()},h(){x(i,"class","svelte-iskw2g"),x(a,"class","svelte-iskw2g"),x(u,"class","actions svelte-iskw2g"),x(r,"class","contents svelte-iskw2g"),x(n,"role","dialog"),x(n,"class","modal1 svelte-iskw2g")},m(d,v){G(d,e,v),G(d,n,v),_(n,r),_(r,i),_(i,o),_(r,s),_(r,a),_(a,l),_(r,c),_(r,u),_(u,f),_(f,h),g||(y=Et(f,"click",Ke),g=!0)},p(d,v){v&2&&lt(o,d[1]),v&4&&lt(l,d[2])},d(d){d&&w(e),d&&w(n),g=!1,y()}}}function gh(t){let e,n,r,i,o,s,a,l,c,u,f,h,g,y;return{c(){e=R(`:
        `),n=N("div"),r=N("div"),i=N("h2"),o=R(t[1]),s=j(),a=N("p"),l=R(t[2]),c=j(),u=N("div"),f=N("button"),h=R("OK"),this.h()},l(d){e=D(d,`:
        `),n=T(d,"DIV",{role:!0,class:!0});var v=M(n);r=T(v,"DIV",{class:!0});var p=M(r);i=T(p,"H2",{class:!0});var b=M(i);o=D(b,t[1]),b.forEach(w),s=tt(p),a=T(p,"P",{class:!0});var k=M(a);l=D(k,t[2]),k.forEach(w),c=tt(p),u=T(p,"DIV",{class:!0});var E=M(u);f=T(E,"BUTTON",{});var S=M(f);h=D(S,"OK"),S.forEach(w),E.forEach(w),p.forEach(w),v.forEach(w),this.h()},h(){x(i,"class","svelte-iskw2g"),x(a,"class","svelte-iskw2g"),x(u,"class","actions svelte-iskw2g"),x(r,"class","contents svelte-iskw2g"),x(n,"role","dialog"),x(n,"class","modal1 svelte-iskw2g")},m(d,v){G(d,e,v),G(d,n,v),_(n,r),_(r,i),_(i,o),_(r,s),_(r,a),_(a,l),_(r,c),_(r,u),_(u,f),_(f,h),g||(y=Et(f,"click",Ke),g=!0)},p(d,v){v&2&&lt(o,d[1]),v&4&&lt(l,d[2])},d(d){d&&w(e),d&&w(n),g=!1,y()}}}function mh(t){let e,n,r,i,o,s,a,l,c,u,f,h,g,y,d,v,p,b,k,E;return{c(){e=R(`:
        `),n=N("div"),r=N("div"),i=N("h2"),o=R(t[1]),s=j(),a=N("p"),l=R(t[2]),c=j(),u=N("p"),f=R(t[3]),h=j(),g=N("p"),y=R(t[4]),d=j(),v=N("div"),p=N("button"),b=R("OK"),this.h()},l(S){e=D(S,`:
        `),n=T(S,"DIV",{role:!0,class:!0});var P=M(n);r=T(P,"DIV",{class:!0});var B=M(r);i=T(B,"H2",{class:!0});var nt=M(i);o=D(nt,t[1]),nt.forEach(w),s=tt(B),a=T(B,"P",{class:!0});var ot=M(a);l=D(ot,t[2]),ot.forEach(w),c=tt(B),u=T(B,"P",{class:!0});var et=M(u);f=D(et,t[3]),et.forEach(w),h=tt(B),g=T(B,"P",{class:!0});var $=M(g);y=D($,t[4]),$.forEach(w),d=tt(B),v=T(B,"DIV",{class:!0});var O=M(v);p=T(O,"BUTTON",{});var F=M(p);b=D(F,"OK"),F.forEach(w),O.forEach(w),B.forEach(w),P.forEach(w),this.h()},h(){x(i,"class","svelte-iskw2g"),x(a,"class","svelte-iskw2g"),x(u,"class","svelte-iskw2g"),x(g,"class","svelte-iskw2g"),x(v,"class","actions svelte-iskw2g"),x(r,"class","contents svelte-iskw2g"),x(n,"role","dialog"),x(n,"class","modal1 svelte-iskw2g")},m(S,P){G(S,e,P),G(S,n,P),_(n,r),_(r,i),_(i,o),_(r,s),_(r,a),_(a,l),_(r,c),_(r,u),_(u,f),_(r,h),_(r,g),_(g,y),_(r,d),_(r,v),_(v,p),_(p,b),k||(E=Et(p,"click",Ke),k=!0)},p(S,P){P&2&&lt(o,S[1]),P&4&&lt(l,S[2]),P&8&&lt(f,S[3]),P&16&&lt(y,S[4])},d(S){S&&w(e),S&&w(n),k=!1,E()}}}function _h(t){let e,n,r,i,o,s,a,l,c,u,f,h,g,y;return{c(){e=R(`:
        `),n=N("div"),r=N("div"),i=N("h2"),o=R(t[1]),s=j(),a=N("p"),l=R(t[2]),c=j(),u=N("div"),f=N("button"),h=R("Close"),this.h()},l(d){e=D(d,`:
        `),n=T(d,"DIV",{role:!0,class:!0});var v=M(n);r=T(v,"DIV",{class:!0});var p=M(r);i=T(p,"H2",{class:!0});var b=M(i);o=D(b,t[1]),b.forEach(w),s=tt(p),a=T(p,"P",{class:!0});var k=M(a);l=D(k,t[2]),k.forEach(w),c=tt(p),u=T(p,"DIV",{class:!0});var E=M(u);f=T(E,"BUTTON",{});var S=M(f);h=D(S,"Close"),S.forEach(w),E.forEach(w),p.forEach(w),v.forEach(w),this.h()},h(){x(i,"class","svelte-iskw2g"),x(a,"class","svelte-iskw2g"),x(u,"class","actions svelte-iskw2g"),x(r,"class","contents svelte-iskw2g"),x(n,"role","dialog"),x(n,"class","modal1 svelte-iskw2g")},m(d,v){G(d,e,v),G(d,n,v),_(n,r),_(r,i),_(i,o),_(r,s),_(r,a),_(a,l),_(r,c),_(r,u),_(u,f),_(f,h),g||(y=Et(f,"click",Ke),g=!0)},p(d,v){v&2&&lt(o,d[1]),v&4&&lt(l,d[2])},d(d){d&&w(e),d&&w(n),g=!1,y()}}}function vh(t){let e,n=t[0]&&fo(t);return{c(){n&&n.c(),e=re()},l(r){n&&n.l(r),e=re()},m(r,i){n&&n.m(r,i),G(r,e,i)},p(r,[i]){r[0]?n?n.p(r,i):(n=fo(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:dt,o:dt,d(r){n&&n.d(r),r&&w(e)}}}function yh(t,e,n){let{isOpen:r}=e,{title:i}=e,{message:o}=e,{message1:s}=e,{message2:a}=e,{step:l}=e,{customProp:c}=e;return t.$$set=u=>{"isOpen"in u&&n(0,r=u.isOpen),"title"in u&&n(1,i=u.title),"message"in u&&n(2,o=u.message),"message1"in u&&n(3,s=u.message1),"message2"in u&&n(4,a=u.message2),"step"in u&&n(5,l=u.step),"customProp"in u&&n(6,c=u.customProp)},[r,i,o,s,a,l,c]}class ze extends Ae{constructor(e){super(),Ne(this,e,yh,vh,Te,{isOpen:0,title:1,message:2,message1:3,message2:4,step:5,customProp:6})}}function ho(t,e,n){const r=t.slice();return r[47]=e[n],r}function po(t,e,n){const r=t.slice();return r[50]=e[n],r}function go(t){let e,n=t[50]+"",r,i;return{c(){e=N("option"),r=R(n),this.h()},l(o){e=T(o,"OPTION",{});var s=M(e);r=D(s,n),s.forEach(w),this.h()},h(){e.__value=i=t[50],e.value=e.__value},m(o,s){G(o,e,s),_(e,r)},p(o,s){s[0]&2&&n!==(n=o[50]+"")&&lt(r,n),s[0]&2&&i!==(i=o[50])&&(e.__value=i,e.value=e.__value)},d(o){o&&w(e)}}}function mo(t){let e,n=t[47]+"",r,i;return{c(){e=N("option"),r=R(n),this.h()},l(o){e=T(o,"OPTION",{});var s=M(e);r=D(s,n),s.forEach(w),this.h()},h(){e.__value=i=t[47],e.value=e.__value},m(o,s){G(o,e,s),_(e,r)},p(o,s){s[0]&4&&n!==(n=o[47]+"")&&lt(r,n),s[0]&4&&i!==(i=o[47])&&(e.__value=i,e.value=e.__value)},d(o){o&&w(e)}}}function _o(t){let e;function n(o,s){if(o[5]===1)return kh;if(o[5]===2)return Eh;if(o[5]===3)return xh;if(o[5]===4)return bh;if(o[5]===5)return wh}let r=n(t),i=r&&r(t);return{c(){e=N("div"),i&&i.c(),this.h()},l(o){e=T(o,"DIV",{class:!0});var s=M(e);i&&i.l(s),s.forEach(w),this.h()},h(){x(e,"class","tutorial svelte-cnyvuh")},m(o,s){G(o,e,s),i&&i.m(e,null)},p(o,s){r===(r=n(o))&&i?i.p(o,s):(i&&i.d(1),i=r&&r(o),i&&(i.c(),i.m(e,null)))},d(o){o&&w(e),i&&i.d()}}}function wh(t){let e,n,r,i;return{c(){e=N("button"),n=R("Finish tutorial"),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var s=M(e);n=D(s,"Finish tutorial"),s.forEach(w),this.h()},h(){x(e,"class","tutorial-button svelte-cnyvuh")},m(o,s){G(o,e,s),_(e,n),r||(i=Et(e,"click",t[9]),r=!0)},p:dt,d(o){o&&w(e),r=!1,i()}}}function bh(t){let e,n,r,i;return{c(){e=N("button"),n=R("Next Step"),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var s=M(e);n=D(s,"Next Step"),s.forEach(w),this.h()},h(){x(e,"class","tutorial-button svelte-cnyvuh")},m(o,s){G(o,e,s),_(e,n),r||(i=Et(e,"click",t[8]),r=!0)},p:dt,d(o){o&&w(e),r=!1,i()}}}function xh(t){let e,n,r,i;return{c(){e=N("button"),n=R("Next Step"),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var s=M(e);n=D(s,"Next Step"),s.forEach(w),this.h()},h(){x(e,"class","tutorial-button svelte-cnyvuh")},m(o,s){G(o,e,s),_(e,n),r||(i=Et(e,"click",t[8]),r=!0)},p:dt,d(o){o&&w(e),r=!1,i()}}}function Eh(t){let e,n,r,i;return{c(){e=N("button"),n=R("Next Step"),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var s=M(e);n=D(s,"Next Step"),s.forEach(w),this.h()},h(){x(e,"class","tutorial-button svelte-cnyvuh")},m(o,s){G(o,e,s),_(e,n),r||(i=Et(e,"click",t[8]),r=!0)},p:dt,d(o){o&&w(e),r=!1,i()}}}function kh(t){let e,n,r,i;return{c(){e=N("button"),n=R("Next step"),this.h()},l(o){e=T(o,"BUTTON",{class:!0});var s=M(e);n=D(s,"Next step"),s.forEach(w),this.h()},h(){x(e,"class","tutorial-button svelte-cnyvuh")},m(o,s){G(o,e,s),_(e,n),r||(i=Et(e,"click",t[8]),r=!0)},p:dt,d(o){o&&w(e),r=!1,i()}}}function Mh(t){let e,n,r,i,o,s,a,l,c,u=t[0]*100+"",f,h,g,y,d,v,p,b,k,E,S,P,B,nt,ot,et,$,O,F,m,C,A,z,U,L,H,Q,W,it,rt,Z,gt,ht,V,J,Y,X,q,st,K,mt,$t,Pt,wt,_t,Vt,zt=t[1],vt=[];for(let I=0;I<zt.length;I+=1)vt[I]=go(po(t,zt,I));let Ot=t[2],pt=[];for(let I=0;I<Ot.length;I+=1)pt[I]=mo(ho(t,Ot,I));Q=new fh({props:{FIPScode:t[3],showPanel:t[4]}});let yt=t[6]===!0&&_o(t);return{c(){e=N("div"),n=N("div"),r=N("h4"),i=R("Migrant population share cutoff"),o=j(),s=N("div"),a=N("input"),l=j(),c=N("span"),f=R(u),h=R("%"),g=j(),y=N("div"),d=N("h4"),v=R("Search"),p=j(),b=N("div"),k=N("label"),E=R("State:"),S=j(),P=N("select"),B=N("option"),nt=R("Select a state");for(let I=0;I<vt.length;I+=1)vt[I].c();ot=j(),et=N("div"),$=N("label"),O=R("County:"),F=j(),m=N("select"),C=N("option"),A=R("Select a county");for(let I=0;I<pt.length;I+=1)pt[I].c();z=j(),U=N("div"),L=N("p"),H=j(),dn(Q.$$.fragment),W=j(),it=N("div"),rt=N("h4"),Z=R("Carbon footprint per employee (tons CO2 per employee)"),gt=j(),ht=N("div"),V=j(),J=N("button"),Y=R("Reset view"),X=j(),q=N("div"),st=j(),K=N("button"),mt=R("Start tutorial"),$t=j(),yt&&yt.c(),Pt=re(),this.h()},l(I){e=T(I,"DIV",{class:!0});var at=M(e);n=T(at,"DIV",{class:!0});var bt=M(n);r=T(bt,"H4",{style:!0});var ft=M(r);i=D(ft,"Migrant population share cutoff"),ft.forEach(w),o=tt(bt),s=T(bt,"DIV",{class:!0});var qt=M(s);a=T(qt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),l=tt(qt),c=T(qt,"SPAN",{});var We=M(c);f=D(We,u),h=D(We,"%"),We.forEach(w),qt.forEach(w),bt.forEach(w),g=tt(at),y=T(at,"DIV",{class:!0});var oe=M(y);d=T(oe,"H4",{style:!0});var Wt=M(d);v=D(Wt,"Search"),Wt.forEach(w),p=tt(oe),b=T(oe,"DIV",{});var Mt=M(b);k=T(Mt,"LABEL",{for:!0});var Ze=M(k);E=D(Ze,"State:"),Ze.forEach(w),S=tt(Mt),P=T(Mt,"SELECT",{id:!0,class:!0});var he=M(P);B=T(he,"OPTION",{});var me=M(B);nt=D(me,"Select a state"),me.forEach(w);for(let Zt=0;Zt<vt.length;Zt+=1)vt[Zt].l(he);he.forEach(w),Mt.forEach(w),ot=tt(oe),et=T(oe,"DIV",{});var Rt=M(et);$=T(Rt,"LABEL",{for:!0});var de=M($);O=D(de,"County:"),de.forEach(w),F=tt(Rt),m=T(Rt,"SELECT",{id:!0,class:!0});var Dt=M(m);C=T(Dt,"OPTION",{});var Ce=M(C);A=D(Ce,"Select a county"),Ce.forEach(w);for(let Zt=0;Zt<pt.length;Zt+=1)pt[Zt].l(Dt);Dt.forEach(w),Rt.forEach(w),oe.forEach(w),z=tt(at),U=T(at,"DIV",{class:!0});var Ut=M(U);L=T(Ut,"P",{}),M(L).forEach(w),Ut.forEach(w),at.forEach(w),H=tt(I),pn(Q.$$.fragment,I),W=tt(I),it=T(I,"DIV",{class:!0,style:!0});var Ie=M(it);rt=T(Ie,"H4",{style:!0});var Mn=M(rt);Z=D(Mn,"Carbon footprint per employee (tons CO2 per employee)"),Mn.forEach(w),gt=tt(Ie),ht=T(Ie,"DIV",{id:!0,style:!0}),M(ht).forEach(w),Ie.forEach(w),V=tt(I),J=T(I,"BUTTON",{style:!0});var _e=M(J);Y=D(_e,"Reset view"),_e.forEach(w),X=tt(I),q=T(I,"DIV",{id:!0,class:!0}),M(q).forEach(w),st=tt(I),K=T(I,"BUTTON",{style:!0});var Qe=M(K);mt=D(Qe,"Start tutorial"),Qe.forEach(w),$t=tt(I),yt&&yt.l(I),Pt=re(),this.h()},h(){ct(r,"margin","0px"),ct(r,"test-align","center"),x(a,"type","range"),x(a,"min","0"),x(a,"max","0.5"),x(a,"step","0.01"),x(s,"class","box svelte-cnyvuh"),x(n,"class","box svelte-cnyvuh"),ct(d,"margin","0px"),ct(d,"text-align","center"),x(k,"for","state-select"),B.__value="",B.value=B.__value,B.disabled=!0,B.selected=!0,x(P,"id","state-select"),x(P,"class","svelte-cnyvuh"),x($,"for","county-select"),C.__value="",C.value=C.__value,C.disabled=!0,C.selected=!0,x(m,"id","county-select"),x(m,"class","svelte-cnyvuh"),x(y,"class","box svelte-cnyvuh"),x(U,"class","box svelte-cnyvuh"),x(e,"class","panel svelte-cnyvuh"),ct(rt,"margin","0"),ct(rt,"test-align","center"),x(ht,"id","legendContainer"),ct(ht,"top","0px"),x(it,"class","panel svelte-cnyvuh"),ct(it,"position","fixed"),ct(it,"top","60px"),ct(it,"left","calc(100% - 440px)"),ct(it,"width","410px"),ct(it,"height","90px"),ct(it,"z-index","900"),ct(it,"text-align","center"),ct(J,"position","absolute"),ct(J,"top","250px"),ct(J,"left","35px"),ct(J,"z-index","999"),x(q,"id","chart-container"),x(q,"class","svelte-cnyvuh"),ct(K,"position","absolute"),ct(K,"top","250px"),ct(K,"left","125px"),ct(K,"z-index","999")},m(I,at){G(I,e,at),_(e,n),_(n,r),_(r,i),_(n,o),_(n,s),_(s,a),oi(a,t[0]),_(s,l),_(s,c),_(c,f),_(c,h),_(e,g),_(e,y),_(y,d),_(d,v),_(y,p),_(y,b),_(b,k),_(k,E),_(b,S),_(b,P),_(P,B),_(B,nt);for(let bt=0;bt<vt.length;bt+=1)vt[bt]&&vt[bt].m(P,null);_(y,ot),_(y,et),_(et,$),_($,O),_(et,F),_(et,m),_(m,C),_(C,A);for(let bt=0;bt<pt.length;bt+=1)pt[bt]&&pt[bt].m(m,null);_(e,z),_(e,U),_(U,L),G(I,H,at),gn(Q,I,at),G(I,W,at),G(I,it,at),_(it,rt),_(rt,Z),_(it,gt),_(it,ht),G(I,V,at),G(I,J,at),_(J,Y),G(I,X,at),G(I,q,at),G(I,st,at),G(I,K,at),_(K,mt),G(I,$t,at),yt&&yt.m(I,at),G(I,Pt,at),wt=!0,_t||(Vt=[Et(a,"change",t[22]),Et(a,"input",t[22]),Et(P,"change",t[11]),Et(P,"change",t[7]),Et(m,"change",t[12]),Et(J,"click",t[13]),Et(K,"click",t[10])],_t=!0)},p(I,at){if(at[0]&1&&oi(a,I[0]),(!wt||at[0]&1)&&u!==(u=I[0]*100+"")&&lt(f,u),at[0]&2){zt=I[1];let ft;for(ft=0;ft<zt.length;ft+=1){const qt=po(I,zt,ft);vt[ft]?vt[ft].p(qt,at):(vt[ft]=go(qt),vt[ft].c(),vt[ft].m(P,null))}for(;ft<vt.length;ft+=1)vt[ft].d(1);vt.length=zt.length}if(at[0]&4){Ot=I[2];let ft;for(ft=0;ft<Ot.length;ft+=1){const qt=ho(I,Ot,ft);pt[ft]?pt[ft].p(qt,at):(pt[ft]=mo(qt),pt[ft].c(),pt[ft].m(m,null))}for(;ft<pt.length;ft+=1)pt[ft].d(1);pt.length=Ot.length}const bt={};at[0]&8&&(bt.FIPScode=I[3]),at[0]&16&&(bt.showPanel=I[4]),Q.$set(bt),I[6]===!0?yt?yt.p(I,at):(yt=_o(I),yt.c(),yt.m(Pt.parentNode,Pt)):yt&&(yt.d(1),yt=null)},i(I){wt||(ee(Q.$$.fragment,I),wt=!0)},o(I){le(Q.$$.fragment,I),wt=!1},d(I){I&&w(e),ue(vt,I),ue(pt,I),I&&w(H),mn(Q,I),I&&w(W),I&&w(it),I&&w(V),I&&w(J),I&&w(X),I&&w(q),I&&w(st),I&&w(K),I&&w($t),yt&&yt.d(I),I&&w(Pt),_t=!1,Ms(Vt)}}}function Sh(t,e,n){let r,i,o,s,a,l,c,u,f="",h="",g=[],y=[],d=[],v,p=0,b,k,E=!1,S,P,B,nt,ot,et,$,O;si("resetIsolation",()=>{Z()}),si("setShowPanelFalse",()=>{F()});function F(){n(4,E=!1)}Ss(async()=>{(await Re("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/unemployment-x.csv")).map(K=>({...K,ECF_log10:+K.ECF_log10})),r=await dr("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/counties-albers-10m.json");const q="https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/kailingraham/my-app/static/map_gdf.json";dr(q).then(K=>{n(18,c=K.features.map(mt=>({id:mt.properties.FIPS,state:mt.properties.State,ECF:Math.round(mt.properties.ECF*100)/100,ECF_log10:Math.round(mt.properties.ECF_log10*100)/100,ECF_log10_std:mt.properties.ECF_log10_std,migrant_pop:Math.round(mt.properties.MIG_PERCENT*100)/100})))}),await dr(q),n(20,g=await Re("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/uscounties.csv")),n(14,i=topojson.feature(r,r.objects.counties)),new Map(i.features.map(K=>[K.properties.name,K])),v=new Map(i.features.map(K=>[K.id,K])),o=topojson.feature(r,r.objects.states),n(15,s=new Map(o.features.map(K=>[K.properties.name,K]))),Array.from(s.keys()),n(16,a=topojson.mesh(r,r.objects.states,(K,mt)=>K!==mt))});async function m(Y){if(f=Y.currentTarget.value,!f){n(2,d=[]);return}const X=g.filter(q=>q.state_name===f);X.sort(function(q,st){return Oe(q.county,st.county)}),n(2,d=X.map(q=>q.county))}let C=-1,A=!1;Pe(ze,{title:"Welcome to the Migrant Employment & the Energy Transition (MEET) tool",message:'This tool allows users to explore how energy transition vulnerability intersects with migrant populations in the United States. After closing this message, click "Start tutorial" on the left-hand side to be guided through the MEET tool, or start exploring on your own.',step:C,customProp:z});function z(){C===0&&Pe(ze,{title:"Welcome to the Migrant Employment & the Energy Transition (MEET) tool",message:"Employment is the greatest motivator for migration to the U.S., and migrant workers often face challenging economic conditions upon their arrival, especially if they are undocumented. At the same time, the energy transition is disrupting the U.S. economy and workforce, placing communities that depend on carbon-intensive industries at risk of economic displacement and job losses. There has been little policy attention paid specifically to migrants and undocumented workers in carbon-intensive communities that may be disproportionately affected by economic shocks from the energy transition, and workforce development policies need to better understand the intersection between migrant employment challenges and the disruption of communities as the economy decarbonizes.",message1:"This tool is designed to allow users to explore this intersection. Using publically available data, we calculate the average employee carbon footprint (ECF) of every county in the U.S. as a measure of its economic vulnerability to economic shocks during the energy transition, and map these carbon footprints across the U.S. We supplement this data with data from the American Community Survey on the migrant populations in these counties.",message2:'Click "OK" then "Next Step" to be guided through the tool.',step:C}),W(),C===1&&(Pe(ze,{title:"Many counties with high vulnerability have low migrant populations",message:"Appalachia is known for its coal mining industry and has been one of the regions hardest hit by the U.S. transition away from coal. Here, we see that Wetzel County in West Virginia has an ECF over 20 times the national average. However, less than 1% of the county are migrants, a trend shared by much of Appalachia. Feel free to explore adjacent counties by clicking on them or selecting them from the dropdown on the left-hand side of the screen.",step:C}),W()),C===2&&(Pe(ze,{title:"Urban centers with large migrant populations tend to have low energy transition vulnerabilities",message:"Brooklyn in New York City (Kings County) has a very large migrant population, and the majority of employment in the borough is in non-industrial sectors. These communities are unlikely to suffer direct job losses due to decarbonization (although may face other employment and workforce development challenges).",step:C}),W()),C===3&&(Pe(ze,{title:"Some areas with high migrant populations are also highly vulnerable",message:"West Texas counties such as Gaines County have both large migrant populations and signficiant employment vulnerability to the energy transition due to the presence of the oil and gas industry in the region. These communities will face unique challenges as the country decarbonizes in managing the specific vulnerabilities to economic displacement migrants in the region may face.",step:C}),W()),C===4&&(V(),Pe(ze,{title:"Explore using the side panel",message:"Use the side panel to search for a particular county and state, and filter counties by their migrant population share.",step:C})),C===5&&V(),n(5,C+=1)}function U(){n(5,C=0),h="",n(6,A=!1),V()}function L(){U(),n(6,A=!0),z()}function H(Y){if(f=Y.target.value,document.getElementById("county-select").value="",f===""){gt();return}const X=s.get(f);Z(),it(X),rt(X)}function Q(Y){h=Y.target.value;const X=g.find(st=>st.county===h&&st.state_name===f);if(h===""){gt(),Z();return}const q=v.get(X.county_fips);q?n(3,k=X.county_fips):n(3,k=""),Z(),rt(q),n(4,E=!0)}function W(Y){if(Y){h=Y.target.value;const X=g.find(st=>st.county===h&&st.state_name===f);if(h===""){gt(),Z();return}const q=v.get(X.county_fips);q?n(3,k=X.county_fips):n(3,k=""),Z(),rt(q)}else{if(C===1){console.log("zoom to county"),h="Wetzel",f="West Virginia";const X=g.find(K=>K.county===h&&K.state_name===f),q=v.get(X.county_fips),st=s.get(f);it(st),Z(),rt(q),n(4,E=!0),q?n(3,k=X.county_fips):n(3,k="")}if(C===2){console.log("zoom to county"),h="Kings",f="New York";const X=g.find(K=>K.county===h&&K.state_name===f),q=v.get(X.county_fips),st=s.get(f);it(st),Z(),rt(q),n(4,E=!0),q?n(3,k=X.county_fips):n(3,k="")}if(C===3){console.log("zoom to county"),h="Gaines",f="Texas";const X=g.find(K=>K.county===h&&K.state_name===f),q=v.get(X.county_fips),st=s.get(f);it(st),Z(),rt(q),n(4,E=!0),q?n(3,k=X.county_fips):n(3,k="")}}}function it(Y){const X=S.bounds(Y),[[q,st],[K,mt]]=X,$t=q+.15*(K-q),Pt=(st+mt)/2,wt=.7/Math.max(1.5*(K-q)/P,(mt-st)/B);$.transition().duration(750).call(O.transform,hn.translate(P/2,(B-200)/2).scale(wt).translate(-$t,-Pt))}function rt(Y){Y.id.length===2?(console.log("StateFIPS passed"),console.log(l.g.selectAll("path")),l.g.selectAll("path").filter(function(X){return X.id.slice(0,2)!==Y.id}).attr("fill-opacity",.3)):(l.g.selectAll("path").filter(function(X){return X!==Y&&X.id.slice(0,2)!==Y.id.slice(0,2)}).attr("fill-opacity",.3),l.g.selectAll("path").filter(function(X){return X!==Y&&X.id.slice(0,2)===Y.id.slice(0,2)}).attr("fill-opacity",.7),l.g.selectAll("path").filter(function(X){return X===Y}).attr("stroke-opacity",1).attr("stroke","orange"))}function Z(){l.g.selectAll("path").attr("fill-opacity",1),l.g.selectAll("path").attr("stroke-opacity",0)}function gt(){$.transition().duration(500).call(O.transform,hn.translate(ot,et).scale(nt))}function ht(Y,{id:X=Wt=>Wt.id,value:q=()=>{},mg_pop:st=Wt=>Wt.migrant_pop,title:K,format:mt,domain:$t,range:Pt=He,width:wt=window.innerWidth,height:_t=window.innerHeight-50,projection:Vt,features:zt,featureId:vt=Wt=>Wt.id,borders:Ot,outline:pt=Vt&&Vt.rotate?{type:"Sphere"}:null,unknown:yt="#ccc",fill:I="white",stroke:at="white",strokeLinecap:bt="round",strokeLinejoin:ft="round",strokeWidth:qt,strokeOpacity:We,padding:oe=150}={}){const Wt=tn(Y,X),Mt=tn(Y,q).map(ut=>ut==null?NaN:+ut),Ze=tn(Y,st).map(ut=>ut==null?NaN:+ut),he=new br(Wt.map((ut,xt)=>[ut,xt])),me=tn(zt.features,vt);$t===void 0&&($t=[Ls(Mt),Hs(Mt),Us(Mt)]);const Rt=ri().domain($t).range(Pt).interpolate(He);if(Rt.unknown&&yt!==void 0&&Rt.unknown(yt),K===void 0)mt=Rt.tickFormat(100,mt),K=(ut,xt)=>`${ut.properties.name}
${mt(Mt[xt])}`;else if(K!==null){const ut=K,xt=tn(Y,Lt=>Lt);K=(Lt,ye)=>ut(Lt,xt[ye])}if(_t===void 0)if(pt===void 0)_t=400;else{const[[ut,xt],[Lt,ye]]=Hi(Vt.fitWidth(wt,pt)).bounds(pt),pe=Math.ceil(ye-xt),An=Math.min(Math.ceil(Lt-ut),pe);Vt.scale(Vt.scale()*(An-1)/An).precision(.2),_t=pe}const de=Hi(Vt),Dt=Al("svg").attr("width",wt).attr("height",_t).attr("viewBox",[0,0,wt,_t]).attr("style","width: 100%; height: auto; height: intrinsic;");pt!=null&&Dt.append("path").attr("fill",I).attr("stroke","currentColor").attr("d",de(pt));const Ce=Dt.append("g"),Ut=de.bounds(zt),Ie=(wt-oe*2)/(Ut[1][0]-Ut[0][0]),Mn=(_t-oe*2)/(Ut[1][1]-Ut[0][1]),_e=Math.max(Ie,Mn),Qe=(wt-_e*(Ut[1][0]+Ut[0][0]))/2,Zt=(_t-_e*(Ut[1][1]+Ut[0][1]))/2-100;Ce.selectAll("path").data(zt.features).join("path").attr("class","county").attr("fill",(ut,xt)=>{const Lt=Mt[he.get(me[xt])],ye=Ze[he.get(me[xt])],pe=ce(Rt(Lt));return ye>=p?pe:Le(pe.r,pe.g,pe.b,.1)}).attr("d",de).on("click",ds).on("mouseover",function(){Bt(this).style("filter","brightness(70%)")}).on("mouseout",function(){Bt(this).style("filter",null)}).append("title").text((ut,xt)=>K(ut,he.get(me[xt]))),Ot!=null&&Dt.append("path").attr("pointer-events","none").attr("fill","none").attr("stroke",at).attr("stroke-linecap",bt).attr("stroke-linejoin",ft).attr("stroke-width",qt).attr("stroke-opacity",We).attr("d",de(Ot)).attr("id","state-boundaries"),Dt.attr("width",wt).attr("height",_t).attr("viewBox",[0,0,wt,_t]).attr("style","width: 100%; height: auto; height: intrinsic;");const or=Of().scaleExtent([1,8]).extent([[0,0],[wt,_t]]).on("zoom",ut=>{Ce.attr("transform",ut.transform),Dt.select("#state-boundaries").attr("transform",ut.transform)});Dt.call(or),Dt.call(or.transform,hn.translate(Qe,Zt).scale(_e));function ds(ut,xt){const Lt=h,ye=xt.id.slice(0,2);f=o.features.find(ms=>ms.id===ye).properties.name;const An=s.get(f);h=xt.properties.name,Lt===h?(Z(),n(4,E=!1)):(it(An),rt(xt),document.getElementById("state-select").value=f,document.getElementById("county-select").value=h,m({currentTarget:{value:f}}),Q({target:{value:h}}))}const ps=Bt("#legendContainer").style("position","relative"),Je=400,sr=60,Qt={top:20,right:20,bottom:20},ar=ps.append("svg").attr("width",Je+Qt.right).attr("height",sr).style("display","block").style("margin","0 auto");ar.append("defs").append("linearGradient").attr("id","legend-gradient").attr("x1","0%").attr("x2","100%").attr("y1","0%").attr("y2","0%").selectAll("stop").data(Rt.ticks().map((ut,xt,Lt)=>({offset:`${100*xt/Lt.length}%`,color:Rt(ut)}))).enter().append("stop").attr("offset",ut=>ut.offset).attr("stop-color",ut=>ut.color),ar.append("rect").attr("x",Qt.right).attr("y",Qt.top).attr("width",Je-Qt.right).attr("height",sr-Qt.top-Qt.bottom).style("fill","url(#legend-gradient)");const $e=Math.min(...Mt),ve=Mt.reduce((ut,xt)=>ut+xt,0)/Mt.length,je=Math.max(...Mt),gs=[$e,($e+ve)/2,ve,ve+(je-ve)/3,ve+2*(je-ve)/3,je],Sn=ar.append("g").attr("transform",`translate(${Qt.right}, ${sr/2})`);return Sn.selectAll(".legend-label").data(gs).enter().append("text").attr("class","legend-label").attr("x",ut=>(ut-$e)/(je-$e)*(Je-Qt.right)).attr("y",-15).attr("text-anchor","middle").text(ut=>Math.round(10**ut)).style("font-size","12px"),Sn.append("text").attr("class","legend-label").attr("x",0).attr("y",25).attr("text-anchor","start").text("least vulnerable").style("font-size","12px"),Sn.append("text").attr("class","legend-label").attr("x",Je-Qt.right).attr("y",25).attr("text-anchor","end").text("most vulnerable").style("font-size","12px"),Sn.append("text").attr("class","legend-label").attr("x",(ve-$e)/(je-$e)*(Je-Qt.right)).attr("y",25).attr("text-anchor","middle").text("avg").style("font-size","12px"),{node:Dt.node(),scales:{color:Rt},path:de,width:wt,height:_t,g:Ce,V:Mt,M:Ze,Im:he,If:me,svg:Dt,zoom:or,color:Rt,initialScale:_e,offsetX:Qe,offsetY:Zt}}function V(){F(),gt(),Z(),document.getElementById("state-select").value="",document.getElementById("county-select").value="",n(0,p=0)}function J(){p=As(this.value),n(0,p)}return t.$$.update=()=>{if(t.$$.dirty[0]&376832&&c&&s&&i&&a&&n(17,l=ht(c,{id:Y=>Y.id,value:Y=>Y.ECF_log10,mg_pop:Y=>Y.migrant_pop,domain:[.253002,.946957,1.303415,1.574287,3.306079],range:["#006193","#70a8ca","#e0e0e0","#dcab77","#a12e00"],title:(Y,X)=>`${Y.properties.name}, ${X==null?void 0:X.state} 
 ${X==null?void 0:X.ECF_log10} gCO2/employee`,features:i,borders:a,width:1400,height:900})),t.$$.dirty[0]&655360&&l&&(n(19,u=l.node),$=l.svg,S=l.path,P=l.width,O=l.zoom,B=l.height,nt=l.initialScale,ot=l.offsetX,et=l.offsetY,n(21,b=l.color),Bt("#chart-container").node().appendChild(u)),t.$$.dirty[0]&1048576&&g.length>0){g.sort(function(X,q){return Oe(X.state_name,q.state_name)});const Y=new Set;g.forEach(X=>{Y.add(X.state_name)}),n(1,y=Array.from(Y))}t.$$.dirty[0]&2228225&&l&&p!==null&&p!==void 0&&l.g.selectAll("path").attr("fill",(Y,X)=>{const q=l.V[l.Im.get(l.If[X])],st=l.M[l.Im.get(l.If[X])],K=ce(b(q));return st>=p?K:Le(K.r,K.g,K.b,.1)})},[p,y,d,k,E,C,A,m,z,U,L,H,Q,V,i,s,a,l,c,u,g,b,J]}class Ih extends Ae{constructor(e){super(),Ne(this,e,Sh,Mh,Te,{},null,[-1,-1])}}export{Ih as default};
