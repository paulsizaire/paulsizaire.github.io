import{S as yn,i as bn,s as En,e as de,b as J,P as Ft,h,q as B,k as E,a as et,r as A,l as w,m as S,c as nt,n as I,Q as u,R as rt,u as ct,y as Un,z as Vn,p as fe,V as Ke,A as Bn,g as An,d as Ln,T as Xe,B as qn,U as Yn,o as Kn,W as Xn}from"../chunks/index.1ba7cb5e.js";import{S as Ge,r as Gn,b as Wn,d as Hn,i as oe,T as Se,e as ke,P as Zn,c as We,a as He,f as Ze,g as je,I as jn,l as Qn,h as Qe}from"../chunks/PanelApp.d5a9bf2c.js";import{c as se,o as Zt}from"../chunks/store.6cba2274.js";class Yt{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let o=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],r=e+s,l=Math.abs(e)<Math.abs(s)?e-(r-s):s-(r-e);l&&(n[o++]=l),e=r}return n[o]=e,this._n=o+1,this}valueOf(){const e=this._partials;let n=this._n,o,i,s,r=0;if(n>0){for(r=e[--n];n>0&&(o=r,i=e[--n],r=o+i,s=i-(r-o),!s););n>0&&(s<0&&e[n-1]<0||s>0&&e[n-1]>0)&&(i=s*2,o=r+i,i==o-r&&(r=o))}return r}}function Jn(t,e){let n;if(e===void 0)for(const o of t)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=e(i,++o,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function xn(t,e){let n;if(e===void 0)for(const o of t)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of t)(i=e(i,++o,t))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function $n(t,e){let n=0,o=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,o+=i);else{let i=-1;for(let s of t)(s=e(s,++i,t))!=null&&(s=+s)>=s&&(++n,o+=s)}if(n)return o/n}function jt(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,o)=>e(n,o,t))}function Nt(t){return typeof t=="string"?new Ge([[document.querySelector(t)]],[document.documentElement]):new Ge([[t]],Gn)}function to(t){return Nt(Wn(t).call(document.documentElement))}function eo(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Rt(t,e){if(t=eo(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ie={capture:!0,passive:!1};function Ne(t){t.preventDefault(),t.stopImmediatePropagation()}function no(t){var e=t.document.documentElement,n=Nt(t).on("dragstart.drag",Ne,Ie);"onselectstart"in e?n.on("selectstart.drag",Ne,Ie):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function oo(t,e){var n=t.document.documentElement,o=Nt(t).on("dragstart.drag",null);e&&(o.on("click.drag",Ne,Ie),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var io=1e-12;function Je(t){return((t=Math.exp(t))+1/t)/2}function so(t){return((t=Math.exp(t))-1/t)/2}function ao(t){return((t=Math.exp(2*t))-1)/(t+1)}const ro=function t(e,n,o){function i(s,r){var l=s[0],p=s[1],y=s[2],z=r[0],_=r[1],k=r[2],N=z-l,q=_-p,m=N*N+q*q,v,f;if(m<io)f=Math.log(k/y)/e,v=function(G){return[l+G*N,p+G*q,y*Math.exp(e*G*f)]};else{var X=Math.sqrt(m),O=(k*k-y*y+o*m)/(2*y*n*X),W=(k*k-y*y-o*m)/(2*k*n*X),U=Math.log(Math.sqrt(O*O+1)-O),Y=Math.log(Math.sqrt(W*W+1)-W);f=(Y-U)/e,v=function(G){var ft=G*f,ht=Je(U),st=y/(n*X)*(ht*ao(e*ft+U)-so(U));return[l+st*N,p+st*q,y*ht/Je(e*ft+U)]}}return v.duration=f*1e3*e/Math.SQRT2,v}return i.rho=function(s){var r=Math.max(.001,+s),l=r*r,p=l*l;return t(r,l,p)},i}(Math.SQRT2,2,4);function lo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function ze(t,e){return fetch(t,e).then(lo)}var uo=Math.PI,co=uo*2,fo=Math.abs,Le=Math.sqrt;function yt(){}function pe(t,e){t&&$e.hasOwnProperty(t.type)&&$e[t.type](t,e)}var xe={Feature:function(t,e){pe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,o=-1,i=n.length;++o<i;)pe(n[o].geometry,e)}},$e={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)t=n[o],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ce(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)Ce(n[o],e,0)},Polygon:function(t,e){tn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,o=-1,i=n.length;++o<i;)tn(n[o],e)},GeometryCollection:function(t,e){for(var n=t.geometries,o=-1,i=n.length;++o<i;)pe(n[o],e)}};function Ce(t,e,n){var o=-1,i=t.length-n,s;for(e.lineStart();++o<i;)s=t[o],e.point(s[0],s[1],s[2]);e.lineEnd()}function tn(t,e){var n=-1,o=t.length;for(e.polygonStart();++n<o;)Ce(t[n],e,1);e.polygonEnd()}function Qt(t,e){t&&xe.hasOwnProperty(t.type)?xe[t.type](t,e):pe(t,e)}const ho=t=>t;var Te=new Yt,De=new Yt,wn,Sn,Fe,Oe,Dt={point:yt,lineStart:yt,lineEnd:yt,polygonStart:function(){Dt.lineStart=po,Dt.lineEnd=go},polygonEnd:function(){Dt.lineStart=Dt.lineEnd=Dt.point=yt,Te.add(fo(De)),De=new Yt},result:function(){var t=Te/2;return Te=new Yt,t}};function po(){Dt.point=mo}function mo(t,e){Dt.point=kn,wn=Fe=t,Sn=Oe=e}function kn(t,e){De.add(Oe*t-Fe*e),Fe=t,Oe=e}function go(){kn(wn,Sn)}const en=Dt;var Kt=1/0,me=Kt,ie=-Kt,ge=ie,_o={point:vo,lineStart:yt,lineEnd:yt,polygonStart:yt,polygonEnd:yt,result:function(){var t=[[Kt,me],[ie,ge]];return ie=ge=-(me=Kt=1/0),t}};function vo(t,e){t<Kt&&(Kt=t),t>ie&&(ie=t),e<me&&(me=e),e>ge&&(ge=e)}const nn=_o;var Re=0,Ue=0,$t=0,_e=0,ve=0,qt=0,Ve=0,Be=0,te=0,zn,Tn,Et,wt,vt={point:Ut,lineStart:on,lineEnd:sn,polygonStart:function(){vt.lineStart=Eo,vt.lineEnd=wo},polygonEnd:function(){vt.point=Ut,vt.lineStart=on,vt.lineEnd=sn},result:function(){var t=te?[Ve/te,Be/te]:qt?[_e/qt,ve/qt]:$t?[Re/$t,Ue/$t]:[NaN,NaN];return Re=Ue=$t=_e=ve=qt=Ve=Be=te=0,t}};function Ut(t,e){Re+=t,Ue+=e,++$t}function on(){vt.point=yo}function yo(t,e){vt.point=bo,Ut(Et=t,wt=e)}function bo(t,e){var n=t-Et,o=e-wt,i=Le(n*n+o*o);_e+=i*(Et+t)/2,ve+=i*(wt+e)/2,qt+=i,Ut(Et=t,wt=e)}function sn(){vt.point=Ut}function Eo(){vt.point=So}function wo(){Mn(zn,Tn)}function So(t,e){vt.point=Mn,Ut(zn=Et=t,Tn=wt=e)}function Mn(t,e){var n=t-Et,o=e-wt,i=Le(n*n+o*o);_e+=i*(Et+t)/2,ve+=i*(wt+e)/2,qt+=i,i=wt*t-Et*e,Ve+=i*(Et+t),Be+=i*(wt+e),te+=i*3,Ut(Et=t,wt=e)}const an=vt;function Pn(t){this._context=t}Pn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,co);break}}},result:yt};var Ae=new Yt,Me,In,Nn,ee,ne,ye={point:yt,lineStart:function(){ye.point=ko},lineEnd:function(){Me&&Cn(In,Nn),ye.point=yt},polygonStart:function(){Me=!0},polygonEnd:function(){Me=null},result:function(){var t=+Ae;return Ae=new Yt,t}};function ko(t,e){ye.point=Cn,In=ee=t,Nn=ne=e}function Cn(t,e){ee-=t,ne-=e,Ae.add(Le(ee*ee+ne*ne)),ee=t,ne=e}const rn=ye;let ln,be,un,cn;class fn{constructor(e){this._append=e==null?Dn:zo(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==un||this._append!==be){const o=this._radius,i=this._;this._="",this._append`m0,${o}a${o},${o} 0 1,1 0,${-2*o}a${o},${o} 0 1,1 0,${2*o}z`,un=o,be=this._append,cn=this._,this._=i}this._+=cn;break}}}result(){const e=this._;return this._="",e.length?e:null}}function Dn(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function zo(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return Dn;if(e!==ln){const n=10**e;ln=e,be=function(i){let s=1;this._+=i[0];for(const r=i.length;s<r;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return be}function hn(t,e){let n=3,o=4.5,i,s;function r(l){return l&&(typeof o=="function"&&s.pointRadius(+o.apply(this,arguments)),Qt(l,i(s))),s.result()}return r.area=function(l){return Qt(l,i(en)),en.result()},r.measure=function(l){return Qt(l,i(rn)),rn.result()},r.bounds=function(l){return Qt(l,i(nn)),nn.result()},r.centroid=function(l){return Qt(l,i(an)),an.result()},r.projection=function(l){return arguments.length?(i=l==null?(t=null,ho):(t=l).stream,r):t},r.context=function(l){return arguments.length?(s=l==null?(e=null,new fn(n)):new Pn(e=l),typeof o!="function"&&s.pointRadius(o),r):e},r.pointRadius=function(l){return arguments.length?(o=typeof l=="function"?l:(s.pointRadius(+l),+l),r):o},r.digits=function(l){if(!arguments.length)return n;if(l==null)n=null;else{const p=Math.floor(l);if(!(p>=0))throw new RangeError(`invalid digits: ${l}`);n=p}return e===null&&(s=new fn(n)),r},r.projection(t).digits(n).context(e)}const he=t=>()=>t;function To(t,{sourceEvent:e,target:n,transform:o,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Pe(t){t.stopImmediatePropagation()}function Jt(t){t.preventDefault(),t.stopImmediatePropagation()}function Mo(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Po(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function dn(){return this.__zoom||oe}function Io(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function No(){return navigator.maxTouchPoints||"ontouchstart"in this}function Co(t,e,n){var o=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],r=t.invertY(e[1][1])-n[1][1];return t.translate(i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i),r>s?(s+r)/2:Math.min(0,s)||Math.max(0,r))}function Do(){var t=Mo,e=Po,n=Co,o=Io,i=No,s=[0,1/0],r=[[-1/0,-1/0],[1/0,1/0]],l=250,p=ro,y=Hn("start","zoom","end"),z,_,k,N=500,q=150,m=0,v=10;function f(a){a.property("__zoom",dn).on("wheel.zoom",ft,{passive:!1}).on("mousedown.zoom",ht).on("dblclick.zoom",st).filter(i).on("touchstart.zoom",ut).on("touchmove.zoom",pt).on("touchend.zoom touchcancel.zoom",gt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}f.transform=function(a,g,c,b){var M=a.selection?a.selection():a;M.property("__zoom",dn),a!==M?U(a,g,c,b):M.interrupt().each(function(){Y(this,arguments).event(b).start().zoom(null,typeof g=="function"?g.apply(this,arguments):g).end()})},f.scaleBy=function(a,g,c,b){f.scaleTo(a,function(){var M=this.__zoom.k,F=typeof g=="function"?g.apply(this,arguments):g;return M*F},c,b)},f.scaleTo=function(a,g,c,b){f.transform(a,function(){var M=e.apply(this,arguments),F=this.__zoom,T=c==null?W(M):typeof c=="function"?c.apply(this,arguments):c,L=F.invert(T),K=typeof g=="function"?g.apply(this,arguments):g;return n(O(X(F,K),T,L),M,r)},c,b)},f.translateBy=function(a,g,c,b){f.transform(a,function(){return n(this.__zoom.translate(typeof g=="function"?g.apply(this,arguments):g,typeof c=="function"?c.apply(this,arguments):c),e.apply(this,arguments),r)},null,b)},f.translateTo=function(a,g,c,b,M){f.transform(a,function(){var F=e.apply(this,arguments),T=this.__zoom,L=b==null?W(F):typeof b=="function"?b.apply(this,arguments):b;return n(oe.translate(L[0],L[1]).scale(T.k).translate(typeof g=="function"?-g.apply(this,arguments):-g,typeof c=="function"?-c.apply(this,arguments):-c),F,r)},b,M)};function X(a,g){return g=Math.max(s[0],Math.min(s[1],g)),g===a.k?a:new Se(g,a.x,a.y)}function O(a,g,c){var b=g[0]-c[0]*a.k,M=g[1]-c[1]*a.k;return b===a.x&&M===a.y?a:new Se(a.k,b,M)}function W(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function U(a,g,c,b){a.on("start.zoom",function(){Y(this,arguments).event(b).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(b).end()}).tween("zoom",function(){var M=this,F=arguments,T=Y(M,F).event(b),L=e.apply(M,F),K=c==null?W(L):typeof c=="function"?c.apply(M,F):c,$=Math.max(L[1][0]-L[0][0],L[1][1]-L[0][1]),tt=M.__zoom,x=typeof g=="function"?g.apply(M,F):g,at=p(tt.invert(K).concat($/tt.k),x.invert(K).concat($/x.k));return function(C){if(C===1)C=x;else{var P=at(C),R=$/P[2];C=new Se(R,K[0]-P[0]*R,K[1]-P[1]*R)}T.zoom(null,C)}})}function Y(a,g,c){return!c&&a.__zooming||new G(a,g)}function G(a,g){this.that=a,this.args=g,this.active=0,this.sourceEvent=null,this.extent=e.apply(a,g),this.taps=0}G.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,g){return this.mouse&&a!=="mouse"&&(this.mouse[1]=g.invert(this.mouse[0])),this.touch0&&a!=="touch"&&(this.touch0[1]=g.invert(this.touch0[0])),this.touch1&&a!=="touch"&&(this.touch1[1]=g.invert(this.touch1[0])),this.that.__zoom=g,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var g=Nt(this.that).datum();y.call(a,this.that,new To(a,{sourceEvent:this.sourceEvent,target:f,type:a,transform:this.that.__zoom,dispatch:y}),g)}};function ft(a,...g){if(!t.apply(this,arguments))return;var c=Y(this,g).event(a),b=this.__zoom,M=Math.max(s[0],Math.min(s[1],b.k*Math.pow(2,o.apply(this,arguments)))),F=Rt(a);if(c.wheel)(c.mouse[0][0]!==F[0]||c.mouse[0][1]!==F[1])&&(c.mouse[1]=b.invert(c.mouse[0]=F)),clearTimeout(c.wheel);else{if(b.k===M)return;c.mouse=[F,b.invert(F)],ke(this),c.start()}Jt(a),c.wheel=setTimeout(T,q),c.zoom("mouse",n(O(X(b,M),c.mouse[0],c.mouse[1]),c.extent,r));function T(){c.wheel=null,c.end()}}function ht(a,...g){if(k||!t.apply(this,arguments))return;var c=a.currentTarget,b=Y(this,g,!0).event(a),M=Nt(a.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",$,!0),F=Rt(a,c),T=a.clientX,L=a.clientY;no(a.view),Pe(a),b.mouse=[F,this.__zoom.invert(F)],ke(this),b.start();function K(tt){if(Jt(tt),!b.moved){var x=tt.clientX-T,at=tt.clientY-L;b.moved=x*x+at*at>m}b.event(tt).zoom("mouse",n(O(b.that.__zoom,b.mouse[0]=Rt(tt,c),b.mouse[1]),b.extent,r))}function $(tt){M.on("mousemove.zoom mouseup.zoom",null),oo(tt.view,b.moved),Jt(tt),b.event(tt).end()}}function st(a,...g){if(t.apply(this,arguments)){var c=this.__zoom,b=Rt(a.changedTouches?a.changedTouches[0]:a,this),M=c.invert(b),F=c.k*(a.shiftKey?.5:2),T=n(O(X(c,F),b,M),e.apply(this,g),r);Jt(a),l>0?Nt(this).transition().duration(l).call(U,T,b,a):Nt(this).call(f.transform,T,b,a)}}function ut(a,...g){if(t.apply(this,arguments)){var c=a.touches,b=c.length,M=Y(this,g,a.changedTouches.length===b).event(a),F,T,L,K;for(Pe(a),T=0;T<b;++T)L=c[T],K=Rt(L,this),K=[K,this.__zoom.invert(K),L.identifier],M.touch0?!M.touch1&&M.touch0[2]!==K[2]&&(M.touch1=K,M.taps=0):(M.touch0=K,F=!0,M.taps=1+!!z);z&&(z=clearTimeout(z)),F&&(M.taps<2&&(_=K[0],z=setTimeout(function(){z=null},N)),ke(this),M.start())}}function pt(a,...g){if(this.__zooming){var c=Y(this,g).event(a),b=a.changedTouches,M=b.length,F,T,L,K;for(Jt(a),F=0;F<M;++F)T=b[F],L=Rt(T,this),c.touch0&&c.touch0[2]===T.identifier?c.touch0[0]=L:c.touch1&&c.touch1[2]===T.identifier&&(c.touch1[0]=L);if(T=c.that.__zoom,c.touch1){var $=c.touch0[0],tt=c.touch0[1],x=c.touch1[0],at=c.touch1[1],C=(C=x[0]-$[0])*C+(C=x[1]-$[1])*C,P=(P=at[0]-tt[0])*P+(P=at[1]-tt[1])*P;T=X(T,Math.sqrt(C/P)),L=[($[0]+x[0])/2,($[1]+x[1])/2],K=[(tt[0]+at[0])/2,(tt[1]+at[1])/2]}else if(c.touch0)L=c.touch0[0],K=c.touch0[1];else return;c.zoom("touch",n(O(T,L,K),c.extent,r))}}function gt(a,...g){if(this.__zooming){var c=Y(this,g).event(a),b=a.changedTouches,M=b.length,F,T;for(Pe(a),k&&clearTimeout(k),k=setTimeout(function(){k=null},N),F=0;F<M;++F)T=b[F],c.touch0&&c.touch0[2]===T.identifier?delete c.touch0:c.touch1&&c.touch1[2]===T.identifier&&delete c.touch1;if(c.touch1&&!c.touch0&&(c.touch0=c.touch1,delete c.touch1),c.touch0)c.touch0[1]=this.__zoom.invert(c.touch0[0]);else if(c.end(),c.taps===2&&(T=Rt(T,this),Math.hypot(_[0]-T[0],_[1]-T[1])<v)){var L=Nt(this).on("dblclick.zoom");L&&L.apply(this,arguments)}}}return f.wheelDelta=function(a){return arguments.length?(o=typeof a=="function"?a:he(+a),f):o},f.filter=function(a){return arguments.length?(t=typeof a=="function"?a:he(!!a),f):t},f.touchable=function(a){return arguments.length?(i=typeof a=="function"?a:he(!!a),f):i},f.extent=function(a){return arguments.length?(e=typeof a=="function"?a:he([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),f):e},f.scaleExtent=function(a){return arguments.length?(s[0]=+a[0],s[1]=+a[1],f):[s[0],s[1]]},f.translateExtent=function(a){return arguments.length?(r[0][0]=+a[0][0],r[1][0]=+a[1][0],r[0][1]=+a[0][1],r[1][1]=+a[1][1],f):[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},f.constrain=function(a){return arguments.length?(n=a,f):n},f.duration=function(a){return arguments.length?(l=+a,f):l},f.interpolate=function(a){return arguments.length?(p=a,f):p},f.on=function(){var a=y.on.apply(y,arguments);return a===y?f:a},f.clickDistance=function(a){return arguments.length?(m=(a=+a)*a,f):Math.sqrt(m)},f.tapDistance=function(a){return arguments.length?(v=+a,f):v},f}function pn(t){let e;function n(s,r){if(s[5]===0)return Vo;if(s[5]===1)return Uo;if(s[5]===2)return Ro;if(s[5]===3)return Oo;if(s[5]===4)return Fo}let o=n(t),i=o&&o(t);return{c(){i&&i.c(),e=de()},l(s){i&&i.l(s),e=de()},m(s,r){i&&i.m(s,r),J(s,e,r)},p(s,r){o===(o=n(s))&&i?i.p(s,r):(i&&i.d(1),i=o&&o(s),i&&(i.c(),i.m(e.parentNode,e)))},d(s){i&&i.d(s),s&&h(e)}}}function Fo(t){let e,n,o,i,s,r,l,p,y,z,_,k,N,q;return{c(){e=B(`:
    `),n=E("div"),o=E("div"),i=E("h2"),s=B(t[1]),r=et(),l=E("p"),p=B(t[2]),y=et(),z=E("div"),_=E("button"),k=B("OK"),this.h()},l(m){e=A(m,`:
    `),n=w(m,"DIV",{role:!0,class:!0});var v=S(n);o=w(v,"DIV",{class:!0});var f=S(o);i=w(f,"H2",{class:!0});var X=S(i);s=A(X,t[1]),X.forEach(h),r=nt(f),l=w(f,"P",{class:!0});var O=S(l);p=A(O,t[2]),O.forEach(h),y=nt(f),z=w(f,"DIV",{class:!0});var W=S(z);_=w(W,"BUTTON",{});var U=S(_);k=A(U,"OK"),U.forEach(h),W.forEach(h),f.forEach(h),v.forEach(h),this.h()},h(){I(i,"class","svelte-124e2lg"),I(l,"class","svelte-124e2lg"),I(z,"class","actions svelte-124e2lg"),I(o,"class","contents svelte-124e2lg"),I(n,"role","dialog"),I(n,"class","modal2 svelte-124e2lg")},m(m,v){J(m,e,v),J(m,n,v),u(n,o),u(o,i),u(i,s),u(o,r),u(o,l),u(l,p),u(o,y),u(o,z),u(z,_),u(_,k),N||(q=rt(_,"click",se),N=!0)},p(m,v){v&2&&ct(s,m[1]),v&4&&ct(p,m[2])},d(m){m&&h(e),m&&h(n),N=!1,q()}}}function Oo(t){let e,n,o,i,s,r,l,p,y,z,_,k,N,q;return{c(){e=B(`:
    `),n=E("div"),o=E("div"),i=E("h2"),s=B(t[1]),r=et(),l=E("p"),p=B(t[2]),y=et(),z=E("div"),_=E("button"),k=B("OK"),this.h()},l(m){e=A(m,`:
    `),n=w(m,"DIV",{role:!0,class:!0});var v=S(n);o=w(v,"DIV",{class:!0});var f=S(o);i=w(f,"H2",{class:!0});var X=S(i);s=A(X,t[1]),X.forEach(h),r=nt(f),l=w(f,"P",{class:!0});var O=S(l);p=A(O,t[2]),O.forEach(h),y=nt(f),z=w(f,"DIV",{class:!0});var W=S(z);_=w(W,"BUTTON",{});var U=S(_);k=A(U,"OK"),U.forEach(h),W.forEach(h),f.forEach(h),v.forEach(h),this.h()},h(){I(i,"class","svelte-124e2lg"),I(l,"class","svelte-124e2lg"),I(z,"class","actions svelte-124e2lg"),I(o,"class","contents svelte-124e2lg"),I(n,"role","dialog"),I(n,"class","modal1 svelte-124e2lg")},m(m,v){J(m,e,v),J(m,n,v),u(n,o),u(o,i),u(i,s),u(o,r),u(o,l),u(l,p),u(o,y),u(o,z),u(z,_),u(_,k),N||(q=rt(_,"click",se),N=!0)},p(m,v){v&2&&ct(s,m[1]),v&4&&ct(p,m[2])},d(m){m&&h(e),m&&h(n),N=!1,q()}}}function Ro(t){let e,n,o,i,s,r,l,p,y,z,_,k,N,q;return{c(){e=B(`:
    `),n=E("div"),o=E("div"),i=E("h2"),s=B(t[1]),r=et(),l=E("p"),p=B(t[2]),y=et(),z=E("div"),_=E("button"),k=B("OK"),this.h()},l(m){e=A(m,`:
    `),n=w(m,"DIV",{role:!0,class:!0});var v=S(n);o=w(v,"DIV",{class:!0});var f=S(o);i=w(f,"H2",{class:!0});var X=S(i);s=A(X,t[1]),X.forEach(h),r=nt(f),l=w(f,"P",{class:!0});var O=S(l);p=A(O,t[2]),O.forEach(h),y=nt(f),z=w(f,"DIV",{class:!0});var W=S(z);_=w(W,"BUTTON",{});var U=S(_);k=A(U,"OK"),U.forEach(h),W.forEach(h),f.forEach(h),v.forEach(h),this.h()},h(){I(i,"class","svelte-124e2lg"),I(l,"class","svelte-124e2lg"),I(z,"class","actions svelte-124e2lg"),I(o,"class","contents svelte-124e2lg"),I(n,"role","dialog"),I(n,"class","modal1 svelte-124e2lg")},m(m,v){J(m,e,v),J(m,n,v),u(n,o),u(o,i),u(i,s),u(o,r),u(o,l),u(l,p),u(o,y),u(o,z),u(z,_),u(_,k),N||(q=rt(_,"click",se),N=!0)},p(m,v){v&2&&ct(s,m[1]),v&4&&ct(p,m[2])},d(m){m&&h(e),m&&h(n),N=!1,q()}}}function Uo(t){let e,n,o,i,s,r,l,p,y,z,_,k,N,q;return{c(){e=B(`:
    `),n=E("div"),o=E("div"),i=E("h2"),s=B(t[1]),r=et(),l=E("p"),p=B(t[2]),y=et(),z=E("div"),_=E("button"),k=B("OK"),this.h()},l(m){e=A(m,`:
    `),n=w(m,"DIV",{role:!0,class:!0});var v=S(n);o=w(v,"DIV",{class:!0});var f=S(o);i=w(f,"H2",{class:!0});var X=S(i);s=A(X,t[1]),X.forEach(h),r=nt(f),l=w(f,"P",{class:!0});var O=S(l);p=A(O,t[2]),O.forEach(h),y=nt(f),z=w(f,"DIV",{class:!0});var W=S(z);_=w(W,"BUTTON",{});var U=S(_);k=A(U,"OK"),U.forEach(h),W.forEach(h),f.forEach(h),v.forEach(h),this.h()},h(){I(i,"class","svelte-124e2lg"),I(l,"class","svelte-124e2lg"),I(z,"class","actions svelte-124e2lg"),I(o,"class","contents svelte-124e2lg"),I(n,"role","dialog"),I(n,"class","modal1 svelte-124e2lg")},m(m,v){J(m,e,v),J(m,n,v),u(n,o),u(o,i),u(i,s),u(o,r),u(o,l),u(l,p),u(o,y),u(o,z),u(z,_),u(_,k),N||(q=rt(_,"click",se),N=!0)},p(m,v){v&2&&ct(s,m[1]),v&4&&ct(p,m[2])},d(m){m&&h(e),m&&h(n),N=!1,q()}}}function Vo(t){let e,n,o,i,s,r,l,p,y,z,_,k,N,q,m,v,f,X,O,W;return{c(){e=B(`:
        `),n=E("div"),o=E("div"),i=E("h2"),s=B(t[1]),r=et(),l=E("p"),p=B(t[2]),y=et(),z=E("p"),_=B(t[3]),k=et(),N=E("p"),q=B(t[4]),m=et(),v=E("div"),f=E("button"),X=B("OK"),this.h()},l(U){e=A(U,`:
        `),n=w(U,"DIV",{role:!0,class:!0});var Y=S(n);o=w(Y,"DIV",{class:!0});var G=S(o);i=w(G,"H2",{class:!0});var ft=S(i);s=A(ft,t[1]),ft.forEach(h),r=nt(G),l=w(G,"P",{class:!0});var ht=S(l);p=A(ht,t[2]),ht.forEach(h),y=nt(G),z=w(G,"P",{class:!0});var st=S(z);_=A(st,t[3]),st.forEach(h),k=nt(G),N=w(G,"P",{class:!0});var ut=S(N);q=A(ut,t[4]),ut.forEach(h),m=nt(G),v=w(G,"DIV",{class:!0});var pt=S(v);f=w(pt,"BUTTON",{});var gt=S(f);X=A(gt,"OK"),gt.forEach(h),pt.forEach(h),G.forEach(h),Y.forEach(h),this.h()},h(){I(i,"class","svelte-124e2lg"),I(l,"class","svelte-124e2lg"),I(z,"class","svelte-124e2lg"),I(N,"class","svelte-124e2lg"),I(v,"class","actions svelte-124e2lg"),I(o,"class","contents svelte-124e2lg"),I(n,"role","dialog"),I(n,"class","modal1 svelte-124e2lg")},m(U,Y){J(U,e,Y),J(U,n,Y),u(n,o),u(o,i),u(i,s),u(o,r),u(o,l),u(l,p),u(o,y),u(o,z),u(z,_),u(o,k),u(o,N),u(N,q),u(o,m),u(o,v),u(v,f),u(f,X),O||(W=rt(f,"click",se),O=!0)},p(U,Y){Y&2&&ct(s,U[1]),Y&4&&ct(p,U[2]),Y&8&&ct(_,U[3]),Y&16&&ct(q,U[4])},d(U){U&&h(e),U&&h(n),O=!1,W()}}}function Bo(t){let e,n=t[0]&&pn(t);return{c(){n&&n.c(),e=de()},l(o){n&&n.l(o),e=de()},m(o,i){n&&n.m(o,i),J(o,e,i)},p(o,[i]){o[0]?n?n.p(o,i):(n=pn(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Ft,o:Ft,d(o){n&&n.d(o),o&&h(e)}}}function Ao(t,e,n){let{isOpen:o}=e,{title:i}=e,{message:s}=e,{message1:r}=e,{message2:l}=e,{step:p}=e;return console.log(p),t.$$set=y=>{"isOpen"in y&&n(0,o=y.isOpen),"title"in y&&n(1,i=y.title),"message"in y&&n(2,s=y.message),"message1"in y&&n(3,r=y.message1),"message2"in y&&n(4,l=y.message2),"step"in y&&n(5,p=y.step)},[o,i,s,r,l,p]}class xt extends yn{constructor(e){super(),bn(this,e,Ao,Bo,En,{isOpen:0,title:1,message:2,message1:3,message2:4,step:5})}}function mn(t,e,n){const o=t.slice();return o[44]=e[n],o}function gn(t,e,n){const o=t.slice();return o[47]=e[n],o}function _n(t){let e,n=t[47]+"",o,i;return{c(){e=E("option"),o=B(n),this.h()},l(s){e=w(s,"OPTION",{});var r=S(e);o=A(r,n),r.forEach(h),this.h()},h(){e.__value=i=t[47],e.value=e.__value},m(s,r){J(s,e,r),u(e,o)},p(s,r){r[0]&2&&n!==(n=s[47]+"")&&ct(o,n),r[0]&2&&i!==(i=s[47])&&(e.__value=i,e.value=e.__value)},d(s){s&&h(e)}}}function vn(t){let e,n=t[44]+"",o,i;return{c(){e=E("option"),o=B(n),this.h()},l(s){e=w(s,"OPTION",{});var r=S(e);o=A(r,n),r.forEach(h),this.h()},h(){e.__value=i=t[44],e.value=e.__value},m(s,r){J(s,e,r),u(e,o)},p(s,r){r[0]&4&&n!==(n=s[44]+"")&&ct(o,n),r[0]&4&&i!==(i=s[44])&&(e.__value=i,e.value=e.__value)},d(s){s&&h(e)}}}function Lo(t){let e,n,o,i;return{c(){e=E("button"),n=B("Reset")},l(s){e=w(s,"BUTTON",{});var r=S(e);n=A(r,"Reset"),r.forEach(h)},m(s,r){J(s,e,r),u(e,n),o||(i=rt(e,"click",t[8]),o=!0)},p:Ft,d(s){s&&h(e),o=!1,i()}}}function qo(t){let e,n,o,i;return{c(){e=E("button"),n=B("Next Step")},l(s){e=w(s,"BUTTON",{});var r=S(e);n=A(r,"Next Step"),r.forEach(h)},m(s,r){J(s,e,r),u(e,n),o||(i=rt(e,"click",t[7]),o=!0)},p:Ft,d(s){s&&h(e),o=!1,i()}}}function Yo(t){let e,n,o,i;return{c(){e=E("button"),n=B("Next Step")},l(s){e=w(s,"BUTTON",{});var r=S(e);n=A(r,"Next Step"),r.forEach(h)},m(s,r){J(s,e,r),u(e,n),o||(i=rt(e,"click",t[7]),o=!0)},p:Ft,d(s){s&&h(e),o=!1,i()}}}function Ko(t){let e,n,o,i;return{c(){e=E("button"),n=B("Next Step")},l(s){e=w(s,"BUTTON",{});var r=S(e);n=A(r,"Next Step"),r.forEach(h)},m(s,r){J(s,e,r),u(e,n),o||(i=rt(e,"click",t[7]),o=!0)},p:Ft,d(s){s&&h(e),o=!1,i()}}}function Xo(t){let e,n,o,i;return{c(){e=E("button"),n=B("Next Step")},l(s){e=w(s,"BUTTON",{});var r=S(e);n=A(r,"Next Step"),r.forEach(h)},m(s,r){J(s,e,r),u(e,n),o||(i=rt(e,"click",t[7]),o=!0)},p:Ft,d(s){s&&h(e),o=!1,i()}}}function Go(t){let e,n,o,i;return{c(){e=E("button"),n=B("Start tutorial")},l(s){e=w(s,"BUTTON",{});var r=S(e);n=A(r,"Start tutorial"),r.forEach(h)},m(s,r){J(s,e,r),u(e,n),o||(i=rt(e,"click",t[7]),o=!0)},p:Ft,d(s){s&&h(e),o=!1,i()}}}function Wo(t){let e,n,o,i,s,r,l,p,y,z=t[0]*100+"",_,k,N,q,m,v,f,X,O,W,U,Y,G,ft,ht,st,ut,pt,gt,a,g,c,b,M,F,T,L,K,$,tt,x,at,C,P,R=t[1],V=[];for(let d=0;d<R.length;d+=1)V[d]=_n(gn(t,R,d));let D=t[2],H=[];for(let d=0;d<D.length;d+=1)H[d]=vn(mn(t,D,d));M=new Zn({props:{FIPScode:t[3],showPanel:t[4]}});function St(d,Z){if(d[5]===0)return Go;if(d[5]===1)return Xo;if(d[5]===2)return Ko;if(d[5]===3)return Yo;if(d[5]===4)return qo;if(d[5]===5)return Lo}let bt=St(t),Q=bt&&bt(t);return{c(){e=E("div"),n=E("div"),o=E("h4"),i=B("Migrant population share cutoff"),s=et(),r=E("div"),l=E("input"),p=et(),y=E("span"),_=B(z),k=B("%"),N=et(),q=E("div"),m=E("h4"),v=B("Search"),f=et(),X=E("div"),O=E("label"),W=B("State:"),U=et(),Y=E("select"),G=E("option"),ft=B("Select a state");for(let d=0;d<V.length;d+=1)V[d].c();ht=et(),st=E("div"),ut=E("label"),pt=B("County:"),gt=et(),a=E("select"),g=E("option"),c=B("Select a county");for(let d=0;d<H.length;d+=1)H[d].c();b=et(),Un(M.$$.fragment),F=et(),T=E("button"),L=B("Reset view"),K=et(),$=E("div"),tt=et(),x=E("div"),Q&&Q.c(),this.h()},l(d){e=w(d,"DIV",{class:!0});var Z=S(e);n=w(Z,"DIV",{class:!0});var ot=S(n);o=w(ot,"H4",{});var j=S(o);i=A(j,"Migrant population share cutoff"),j.forEach(h),s=nt(ot),r=w(ot,"DIV",{class:!0});var dt=S(r);l=w(dt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),p=nt(dt),y=w(dt,"SPAN",{});var kt=S(y);_=A(kt,z),k=A(kt,"%"),kt.forEach(h),dt.forEach(h),ot.forEach(h),N=nt(Z),q=w(Z,"DIV",{class:!0});var zt=S(q);m=w(zt,"H4",{});var ae=S(m);v=A(ae,"Search"),ae.forEach(h),f=nt(zt),X=w(zt,"DIV",{});var Vt=S(X);O=w(Vt,"LABEL",{for:!0});var re=S(O);W=A(re,"State:"),re.forEach(h),U=nt(Vt),Y=w(Vt,"SELECT",{id:!0});var Xt=S(Y);G=w(Xt,"OPTION",{});var le=S(G);ft=A(le,"Select a state"),le.forEach(h);for(let mt=0;mt<V.length;mt+=1)V[mt].l(Xt);Xt.forEach(h),Vt.forEach(h),ht=nt(zt),st=w(zt,"DIV",{});var Bt=S(st);ut=w(Bt,"LABEL",{for:!0});var Gt=S(ut);pt=A(Gt,"County:"),Gt.forEach(h),gt=nt(Bt),a=w(Bt,"SELECT",{id:!0});var _t=S(a);g=w(_t,"OPTION",{});var Tt=S(g);c=A(Tt,"Select a county"),Tt.forEach(h);for(let mt=0;mt<H.length;mt+=1)H[mt].l(_t);_t.forEach(h),Bt.forEach(h),zt.forEach(h),Z.forEach(h),b=nt(d),Vn(M.$$.fragment,d),F=nt(d),T=w(d,"BUTTON",{style:!0});var Wt=S(T);L=A(Wt,"Reset view"),Wt.forEach(h),K=nt(d),$=w(d,"DIV",{id:!0,class:!0}),S($).forEach(h),tt=nt(d),x=w(d,"DIV",{class:!0});var Ot=S(x);Q&&Q.l(Ot),Ot.forEach(h),this.h()},h(){I(l,"type","range"),I(l,"min","0"),I(l,"max","0.5"),I(l,"step","0.01"),I(r,"class","box svelte-1c8kaic"),I(n,"class","box svelte-1c8kaic"),I(O,"for","state-select"),G.__value="",G.value=G.__value,G.disabled=!0,G.selected=!0,I(Y,"id","state-select"),I(ut,"for","county-select"),g.__value="",g.value=g.__value,g.disabled=!0,g.selected=!0,I(a,"id","county-select"),I(q,"class","box svelte-1c8kaic"),I(e,"class","panel svelte-1c8kaic"),fe(T,"position","absolute"),fe(T,"top","310px"),fe(T,"left","10px"),fe(T,"z-index","999"),I($,"id","chart-container"),I($,"class","svelte-1c8kaic"),I(x,"class","tutorial svelte-1c8kaic")},m(d,Z){J(d,e,Z),u(e,n),u(n,o),u(o,i),u(n,s),u(n,r),u(r,l),Ke(l,t[0]),u(r,p),u(r,y),u(y,_),u(y,k),u(e,N),u(e,q),u(q,m),u(m,v),u(q,f),u(q,X),u(X,O),u(O,W),u(X,U),u(X,Y),u(Y,G),u(G,ft);for(let ot=0;ot<V.length;ot+=1)V[ot]&&V[ot].m(Y,null);u(q,ht),u(q,st),u(st,ut),u(ut,pt),u(st,gt),u(st,a),u(a,g),u(g,c);for(let ot=0;ot<H.length;ot+=1)H[ot]&&H[ot].m(a,null);J(d,b,Z),Bn(M,d,Z),J(d,F,Z),J(d,T,Z),u(T,L),J(d,K,Z),J(d,$,Z),J(d,tt,Z),J(d,x,Z),Q&&Q.m(x,null),at=!0,C||(P=[rt(l,"change",t[20]),rt(l,"input",t[20]),rt(Y,"change",t[9]),rt(Y,"change",t[6]),rt(a,"change",t[10]),rt(T,"click",t[11])],C=!0)},p(d,Z){if(Z[0]&1&&Ke(l,d[0]),(!at||Z[0]&1)&&z!==(z=d[0]*100+"")&&ct(_,z),Z[0]&2){R=d[1];let j;for(j=0;j<R.length;j+=1){const dt=gn(d,R,j);V[j]?V[j].p(dt,Z):(V[j]=_n(dt),V[j].c(),V[j].m(Y,null))}for(;j<V.length;j+=1)V[j].d(1);V.length=R.length}if(Z[0]&4){D=d[2];let j;for(j=0;j<D.length;j+=1){const dt=mn(d,D,j);H[j]?H[j].p(dt,Z):(H[j]=vn(dt),H[j].c(),H[j].m(a,null))}for(;j<H.length;j+=1)H[j].d(1);H.length=D.length}const ot={};Z[0]&8&&(ot.FIPScode=d[3]),Z[0]&16&&(ot.showPanel=d[4]),M.$set(ot),bt===(bt=St(d))&&Q?Q.p(d,Z):(Q&&Q.d(1),Q=bt&&bt(d),Q&&(Q.c(),Q.m(x,null)))},i(d){at||(An(M.$$.fragment,d),at=!0)},o(d){Ln(M.$$.fragment,d),at=!1},d(d){d&&h(e),Xe(V,d),Xe(H,d),d&&h(b),qn(M,d),d&&h(F),d&&h(T),d&&h(K),d&&h($),d&&h(tt),d&&h(x),Q&&Q.d(),C=!1,Yn(P)}}}function Ho(t,e,n){let o,i,s,r,l,p,y,z,_="",k="",N=[],q=[],m=[],v,f=0,X,O,W=!1,U,Y,G,ft,ht,st,ut,pt;Kn(async()=>{(await We("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/unemployment-x.csv")).map(D=>({...D,ECF_log10:+D.ECF_log10})),o=await ze("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/counties-albers-10m.json");const R="https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/kailingraham/my-app/static/map_gdf.json";ze(R).then(D=>{n(16,y=D.features.map(H=>({id:H.properties.FIPS,ECF:Math.round(H.properties.ECF*100)/100,ECF_log10:Math.round(H.properties.ECF_log10*100)/100,ECF_log10_std:H.properties.ECF_log10_std,migrant_pop:Math.round(H.properties.MIG_PERCENT*100)/100})))}),await ze(R),n(18,N=await We("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/uscounties.csv")),n(12,i=topojson.feature(o,o.objects.counties)),new Map(i.features.map(D=>[D.properties.name,D])),v=new Map(i.features.map(D=>[D.id,D])),s=topojson.feature(o,o.objects.states),n(13,r=new Map(s.features.map(D=>[D.properties.name,D]))),Array.from(r.keys()),n(14,l=topojson.mesh(o,o.objects.states,(D,H)=>D!==H))});async function gt(C){if(_=C.currentTarget.value,!_){n(2,m=[]);return}const P=N.filter(R=>R.state_name===_);P.sort(function(R,V){return He(R.county,V.county)}),n(2,m=P.map(R=>R.county))}let a=0;function g(){a===0&&(x(),Zt(xt,{title:"Migrants and the Energy Transition",message:"Employment is the greatest motivator for migration to the U.S., and migrant workers often face challenging economic conditions upon their arrival, especially if they are undocumented. At the same time, the U.S. energy transition has begun to deeply disrupt the U.S. economy and workforce, with the move away from carbon-intensive industries placing communities that depend on them at risk of economic displacement and job losses. Policymakers are separately beginning to address both of these challenges, however to date there has been little attention paid specifically to migrants and undocumented workers in carbon-intensive communities that may be disproportionately affected by economic shocks from the energy transition. Workforce development policies need to better understand the intersection between migrant employment pathway challenges and the disruption of communities as the economy decarbonizes.",message1:"This tool is designed to allow users to explore this intersection. Using publically available data, we calculate the average employee carbon footprint (ECF) of every county in the U.S. as a measure of its economic vulnerability to economic shocks during the energy transition, and map these ECFs across the U.S. We supplement this data with data from the American Community Survey on the migrant populations in these counties.",message2:'Click "Next Step" to be guided through the tool.',step:a})),a===1&&(Zt(xt,{title:"Many counties with high vulnerability have low migrant populations",message:"Appalachia is known for its coal mining industry and has been one of the regions hardest hit by the U.S. transition away from coal. Here, we see that Wetzel County in West Virginia has an ECF over 20 times the national average. However, less than 1% of the county are migrants, a trend shared by much of Appalachia. Feel free to explore adjacent counties by clicking on them or selecting them from the dropdown on the left-hand side of the screen.",step:a}),F()),a===2&&(Zt(xt,{title:"Urban centers with large migrant populations tend to have low energy transition vulnerabilities",message:"Brooklyn in New York City (Kings County) has a very large migrant population, and the majority of employment in the borough is in non-industrial sectors. These communities are unlikely to suffer direct job losses due to decarbonization (although may face other employment and workforce development challenges).",step:a}),F()),a===3&&(Zt(xt,{title:"Some areas with high migrant populations are also highly vulnerable",message:"West Texas counties such as Gaines County have both large migrant populations and signficiant employment vulnerability to the energy transition due to the significant presence of the oil and gas industry in the region. These communities will face unique challenges as the country decarbonizes in managing the specific vulnerabilities to economic displacement migrants in the region may face.",step:a}),F()),a===4&&(x(),Zt(xt,{title:"Explore using the side panel",message:"Use the side panel to search for a particular county and state, and filter counties by their migrant population share.",step:a})),a===5&&x(),n(5,a+=1)}function c(){n(5,a=0),k="",$(),K()}function b(C){if(_=C.target.value,_===""){$();return}const P=r.get(_);K(),console.log(P.id),T(P),L(P)}function M(C){k=C.target.value;const P=N.find(V=>V.county===k&&V.state_name===_);if(k===""){$(),K();return}const R=v.get(P.county_fips);R?n(3,O=P.county_fips):n(3,O=""),K(),L(R),n(4,W=!0)}function F(C){if(C){k=C.target.value,console.log(k);const P=N.find(V=>V.county===k&&V.state_name===_);if(k===""){$(),K();return}const R=v.get(P.county_fips);R?n(3,O=P.county_fips):n(3,O=""),K(),L(R)}else{if(a===1){console.log("zoom to county"),k="Wetzel",_="West Virginia";const P=N.find(D=>D.county===k&&D.state_name===_),R=v.get(P.county_fips),V=r.get(_);T(V),K(),L(R),n(4,W=!0),R?n(3,O=P.county_fips):n(3,O="")}if(a===2){console.log("zoom to county"),k="Kings",_="New York";const P=N.find(D=>D.county===k&&D.state_name===_),R=v.get(P.county_fips),V=r.get(_);T(V),K(),L(R),n(4,W=!0),R?n(3,O=P.county_fips):n(3,O="")}if(a===3){console.log("zoom to county"),k="Gaines",_="Texas";const P=N.find(D=>D.county===k&&D.state_name===_),R=v.get(P.county_fips),V=r.get(_);T(V),K(),L(R),n(4,W=!0),R?n(3,O=P.county_fips):n(3,O="")}}}function T(C){const P=U.bounds(C),[[R,V],[D,H]]=P,St=R+.15*(D-R),bt=(V+H)/2,Q=.7/Math.max(1.5*(D-R)/Y,(H-V)/G);ut.transition().duration(750).call(pt.transform,oe.translate(Y/2,(G-200)/2).scale(Q).translate(-St,-bt))}function L(C){C.id.length===2?(console.log("StateFIPS passed"),console.log(p.g.selectAll("path")),p.g.selectAll("path").filter(function(P){return P.id.slice(0,2)!==C.id}).attr("fill-opacity",.3)):p.g.selectAll("path").filter(function(P){return P!==C}).attr("fill-opacity",.3)}function K(){p.g.selectAll("path").attr("fill-opacity",1)}function $(){ut.transition().duration(500).call(pt.transform,oe.translate(ht,st).scale(ft))}function tt(C,{id:P=_t=>_t.id,value:R=()=>{},mg_pop:V=_t=>_t.migrant_pop,title:D,format:H,domain:St,range:bt=Qe,width:Q=window.innerWidth,height:d=window.innerHeight-50,projection:Z,features:ot,featureId:j=_t=>_t.id,borders:dt,outline:kt=Z&&Z.rotate?{type:"Sphere"}:null,unknown:zt="#ccc",fill:ae="white",stroke:Vt="white",strokeLinecap:re="round",strokeLinejoin:Xt="round",strokeWidth:le,strokeOpacity:Bt,padding:Gt=150}={}){const _t=jt(C,P),Tt=jt(C,R).map(it=>it==null?NaN:+it),Wt=jt(C,V).map(it=>it==null?NaN:+it),Ot=new jn(_t.map((it,lt)=>[it,lt])),mt=jt(ot.features,j);St===void 0&&(St=[xn(Tt),$n(Tt),Jn(Tt)]),console.log(St);const At=Qn().domain(St).range(bt).interpolate(Qe);if(At.unknown&&zt!==void 0&&At.unknown(zt),D===void 0)H=At.tickFormat(100,H),D=(it,lt)=>`${it.properties.name}
${H(Tt[lt])}`;else if(D!==null){const it=D,lt=jt(C,Pt=>Pt);D=(Pt,Lt)=>it(Pt,lt[Lt])}if(d===void 0)if(kt===void 0)d=400;else{const[[it,lt],[Pt,Lt]]=hn(Z.fitWidth(Q,kt)).bounds(kt),It=Math.ceil(Lt-lt),ce=Math.min(Math.ceil(Pt-it),It);Z.scale(Z.scale()*(ce-1)/ce).precision(.2),d=It}const Ht=hn(Z),Mt=to("svg").attr("width",Q).attr("height",d).attr("viewBox",[0,0,Q,d]).attr("style","width: 100%; height: auto; height: intrinsic;");kt!=null&&Mt.append("path").attr("fill",ae).attr("stroke","currentColor").attr("d",Ht(kt));const Ee=Mt.append("g"),Ct=Ht.bounds(ot),Fn=(Q-Gt*2)/(Ct[1][0]-Ct[0][0]),On=(d-Gt*2)/(Ct[1][1]-Ct[0][1]),ue=Math.max(Fn,On),qe=(Q-ue*(Ct[1][0]+Ct[0][0]))/2,Ye=(d-ue*(Ct[1][1]+Ct[0][1]))/2-100;Ee.selectAll("path").data(ot.features).join("path").attr("fill",(it,lt)=>{const Pt=Tt[Ot.get(mt[lt])],Lt=Wt[Ot.get(mt[lt])],It=Ze(At(Pt));return Lt>=f?It:je(It.r,It.g,It.b,.1)}).attr("d",Ht).on("click",Rn).append("title").text((it,lt)=>D(it,Ot.get(mt[lt]))),dt!=null&&Mt.append("path").attr("pointer-events","none").attr("fill","none").attr("stroke",Vt).attr("stroke-linecap",re).attr("stroke-linejoin",Xt).attr("stroke-width",le).attr("stroke-opacity",Bt).attr("d",Ht(dt)).attr("id","state-boundaries"),Mt.attr("width",Q).attr("height",d).attr("viewBox",[0,0,Q,d]).attr("style","width: 100%; height: auto; height: intrinsic;");const we=Do().scaleExtent([1,8]).extent([[0,0],[Q,d]]).on("zoom",it=>{Ee.attr("transform",it.transform),Mt.select("#state-boundaries").attr("transform",it.transform)});Mt.call(we),Mt.call(we.transform,oe.translate(qe,Ye).scale(ue));function Rn(it,lt){const Pt=lt.id.slice(0,2);_=s.features.find(ce=>ce.id===Pt).properties.name;const It=r.get(_);k=lt.properties.name,T(It),L(lt),document.getElementById("state-select").value=_,document.getElementById("county-select").value=k,gt({currentTarget:{value:_}}),M({target:{value:k}})}return{node:Mt.node(),scales:{color:At},path:Ht,width:Q,height:d,g:Ee,V:Tt,M:Wt,Im:Ot,If:mt,svg:Mt,zoom:we,color:At,initialScale:ue,offsetX:qe,offsetY:Ye}}function x(){n(4,W=!1),$(),K()}function at(){f=Xn(this.value),n(0,f)}return t.$$.update=()=>{if(t.$$.dirty[0]&94208&&y&&r&&i&&l&&n(15,p=tt(y,{id:C=>C.id,value:C=>C.ECF_log10,mg_pop:C=>C.migrant_pop,domain:[.253002,.946957,1.303415,1.574287,3.306079],range:["#005194","#70a8ca","#e0e0e0","#dcab77","#a42900"],features:i,borders:l,width:1400,height:900})),t.$$.dirty[0]&163840&&p&&(n(17,z=p.node),ut=p.svg,U=p.path,Y=p.width,pt=p.zoom,G=p.height,ft=p.initialScale,ht=p.offsetX,st=p.offsetY,n(19,X=p.color),Nt("#chart-container").node().appendChild(z)),t.$$.dirty[0]&262144&&N.length>0){N.sort(function(P,R){return He(P.state_name,R.state_name)});const C=new Set;N.forEach(P=>{C.add(P.state_name)}),n(1,q=Array.from(C))}t.$$.dirty[0]&557057&&p&&f!==null&&f!==void 0&&p.g.selectAll("path").attr("fill",(C,P)=>{const R=p.V[p.Im.get(p.If[P])],V=p.M[p.Im.get(p.If[P])],D=Ze(X(R));return V>=f?D:je(D.r,D.g,D.b,.1)})},[f,q,m,O,W,a,gt,g,c,b,M,x,i,r,l,p,y,z,N,X,at]}class xo extends yn{constructor(e){super(),bn(this,e,Ho,Wo,En,{},null,[-1,-1])}}export{xo as default};
