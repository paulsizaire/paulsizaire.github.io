import{S as bn,i as zn,s as Mn,k as V,q as ot,a as ft,l as $,m as Y,r as it,h as R,c as ht,n as Q,b as Pt,Q as P,W as xe,R as Lt,u as Pe,g as jt,d as me,f as Tn,T as Ne,U as Pn,o as kn,y as In,z as Cn,A as Rn,B as Fn,v as xn,X as Nn}from"../chunks/index.83fdecff.js";import{S as De,r as Dn,b as Ln,d as An,i as Ot,T as le,e as ce,c as Le,a as Ae,f as qe,g as Ve,P as qn,I as Vn,l as $n,h as $e}from"../chunks/PanelApp.ff3c065d.js";class It{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let o=0;for(let a=0;a<this._n&&a<32;a++){const u=n[a],s=e+u,h=Math.abs(e)<Math.abs(u)?e-(s-u):u-(s-e);h&&(n[o++]=h),e=s}return n[o]=e,this._n=o+1,this}valueOf(){const e=this._partials;let n=this._n,o,a,u,s=0;if(n>0){for(s=e[--n];n>0&&(o=s,a=e[--n],s=o+a,u=a-(s-o),!u););n>0&&(u<0&&e[n-1]<0||u>0&&e[n-1]>0)&&(a=u*2,o=s+a,a==o-s&&(s=o))}return s}}function Un(t,e){let n;if(e===void 0)for(const o of t)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function Xn(t,e){let n;if(e===void 0)for(const o of t)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let a of t)(a=e(a,++o,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a)}return n}function Yn(t,e){let n=0,o=0;if(e===void 0)for(let a of t)a!=null&&(a=+a)>=a&&(++n,o+=a);else{let a=-1;for(let u of t)(u=e(u,++a,t))!=null&&(u=+u)>=u&&(++n,o+=u)}if(n)return o/n}function At(t,e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof e!="function")throw new TypeError("mapper is not a function");return Array.from(t,(n,o)=>e(n,o,t))}function pt(t){return typeof t=="string"?new De([[document.querySelector(t)]],[document.documentElement]):new De([[t]],Dn)}function On(t){return pt(Ln(t).call(document.documentElement))}function Bn(t){let e;for(;e=t.sourceEvent;)t=e;return t}function wt(t,e){if(t=Bn(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var a=e.getBoundingClientRect();return[t.clientX-a.left-e.clientLeft,t.clientY-a.top-e.clientTop]}}return[t.pageX,t.pageY]}const ge={capture:!0,passive:!1};function _e(t){t.preventDefault(),t.stopImmediatePropagation()}function Gn(t){var e=t.document.documentElement,n=pt(t).on("dragstart.drag",_e,ge);"onselectstart"in e?n.on("selectstart.drag",_e,ge):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Zn(t,e){var n=t.document.documentElement,o=pt(t).on("dragstart.drag",null);e&&(o.on("click.drag",_e,ge),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Wn=1e-12;function Ue(t){return((t=Math.exp(t))+1/t)/2}function Hn(t){return((t=Math.exp(t))-1/t)/2}function Kn(t){return((t=Math.exp(2*t))-1)/(t+1)}const Qn=function t(e,n,o){function a(u,s){var h=u[0],b=u[1],k=u[2],U=s[0],x=s[1],C=s[2],q=U-h,N=x-b,X=q*q+N*N,Z,d;if(X<Wn)d=Math.log(C/k)/e,Z=function(F){return[h+F*q,b+F*N,k*Math.exp(e*F*d)]};else{var D=Math.sqrt(X),L=(C*C-k*k+o*X)/(2*k*n*D),K=(C*C-k*k-o*X)/(2*C*n*D),B=Math.log(Math.sqrt(L*L+1)-L),I=Math.log(Math.sqrt(K*K+1)-K);d=(I-B)/e,Z=function(F){var j=F*d,tt=Ue(B),G=k/(n*D)*(tt*Kn(e*j+B)-Hn(B));return[h+G*q,b+G*N,k*tt/Ue(e*j+B)]}}return Z.duration=d*1e3*e/Math.SQRT2,Z}return a.rho=function(u){var s=Math.max(.001,+u),h=s*s,b=h*h;return t(s,h,b)},a}(Math.SQRT2,2,4);function Jn(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function fe(t,e){return fetch(t,e).then(Jn)}var jn=Math.PI,to=jn*2,eo=Math.abs,ke=Math.sqrt;function nt(){}function te(t,e){t&&Ye.hasOwnProperty(t.type)&&Ye[t.type](t,e)}var Xe={Feature:function(t,e){te(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,o=-1,a=n.length;++o<a;)te(n[o].geometry,e)}},Ye={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,o=-1,a=n.length;++o<a;)t=n[o],e.point(t[0],t[1],t[2])},LineString:function(t,e){ve(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,o=-1,a=n.length;++o<a;)ve(n[o],e,0)},Polygon:function(t,e){Oe(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,o=-1,a=n.length;++o<a;)Oe(n[o],e)},GeometryCollection:function(t,e){for(var n=t.geometries,o=-1,a=n.length;++o<a;)te(n[o],e)}};function ve(t,e,n){var o=-1,a=t.length-n,u;for(e.lineStart();++o<a;)u=t[o],e.point(u[0],u[1],u[2]);e.lineEnd()}function Oe(t,e){var n=-1,o=t.length;for(e.polygonStart();++n<o;)ve(t[n],e,1);e.polygonEnd()}function qt(t,e){t&&Xe.hasOwnProperty(t.type)?Xe[t.type](t,e):te(t,e)}const no=t=>t;var he=new It,ye=new It,ln,cn,Se,we,vt={point:nt,lineStart:nt,lineEnd:nt,polygonStart:function(){vt.lineStart=oo,vt.lineEnd=ao},polygonEnd:function(){vt.lineStart=vt.lineEnd=vt.point=nt,he.add(eo(ye)),ye=new It},result:function(){var t=he/2;return he=new It,t}};function oo(){vt.point=io}function io(t,e){vt.point=fn,ln=Se=t,cn=we=e}function fn(t,e){ye.add(we*t-Se*e),Se=t,we=e}function ao(){fn(ln,cn)}const Be=vt;var Ct=1/0,ee=Ct,Bt=-Ct,ne=Bt,ro={point:so,lineStart:nt,lineEnd:nt,polygonStart:nt,polygonEnd:nt,result:function(){var t=[[Ct,ee],[Bt,ne]];return Bt=ne=-(ee=Ct=1/0),t}};function so(t,e){t<Ct&&(Ct=t),t>Bt&&(Bt=t),e<ee&&(ee=e),e>ne&&(ne=e)}const Ge=ro;var Ee=0,be=0,$t=0,oe=0,ie=0,kt=0,ze=0,Me=0,Ut=0,hn,pn,at,rt,et={point:Et,lineStart:Ze,lineEnd:We,polygonStart:function(){et.lineStart=co,et.lineEnd=fo},polygonEnd:function(){et.point=Et,et.lineStart=Ze,et.lineEnd=We},result:function(){var t=Ut?[ze/Ut,Me/Ut]:kt?[oe/kt,ie/kt]:$t?[Ee/$t,be/$t]:[NaN,NaN];return Ee=be=$t=oe=ie=kt=ze=Me=Ut=0,t}};function Et(t,e){Ee+=t,be+=e,++$t}function Ze(){et.point=uo}function uo(t,e){et.point=lo,Et(at=t,rt=e)}function lo(t,e){var n=t-at,o=e-rt,a=ke(n*n+o*o);oe+=a*(at+t)/2,ie+=a*(rt+e)/2,kt+=a,Et(at=t,rt=e)}function We(){et.point=Et}function co(){et.point=ho}function fo(){dn(hn,pn)}function ho(t,e){et.point=dn,Et(hn=at=t,pn=rt=e)}function dn(t,e){var n=t-at,o=e-rt,a=ke(n*n+o*o);oe+=a*(at+t)/2,ie+=a*(rt+e)/2,kt+=a,a=rt*t-at*e,ze+=a*(at+t),Me+=a*(rt+e),Ut+=a*3,Et(at=t,rt=e)}const He=et;function mn(t){this._context=t}mn.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,to);break}}},result:nt};var Te=new It,pe,gn,_n,Xt,Yt,ae={point:nt,lineStart:function(){ae.point=po},lineEnd:function(){pe&&vn(gn,_n),ae.point=nt},polygonStart:function(){pe=!0},polygonEnd:function(){pe=null},result:function(){var t=+Te;return Te=new It,t}};function po(t,e){ae.point=vn,gn=Xt=t,_n=Yt=e}function vn(t,e){Xt-=t,Yt-=e,Te.add(ke(Xt*Xt+Yt*Yt)),Xt=t,Yt=e}const Ke=ae;let Qe,re,Je,je;class tn{constructor(e){this._append=e==null?yn:mo(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Je||this._append!==re){const o=this._radius,a=this._;this._="",this._append`m0,${o}a${o},${o} 0 1,1 0,${-2*o}a${o},${o} 0 1,1 0,${2*o}z`,Je=o,re=this._append,je=this._,this._=a}this._+=je;break}}}result(){const e=this._;return this._="",e.length?e:null}}function yn(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function mo(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return yn;if(e!==Qe){const n=10**e;Qe=e,re=function(a){let u=1;this._+=a[0];for(const s=a.length;u<s;++u)this._+=Math.round(arguments[u]*n)/n+a[u]}}return re}function en(t,e){let n=3,o=4.5,a,u;function s(h){return h&&(typeof o=="function"&&u.pointRadius(+o.apply(this,arguments)),qt(h,a(u))),u.result()}return s.area=function(h){return qt(h,a(Be)),Be.result()},s.measure=function(h){return qt(h,a(Ke)),Ke.result()},s.bounds=function(h){return qt(h,a(Ge)),Ge.result()},s.centroid=function(h){return qt(h,a(He)),He.result()},s.projection=function(h){return arguments.length?(a=h==null?(t=null,no):(t=h).stream,s):t},s.context=function(h){return arguments.length?(u=h==null?(e=null,new tn(n)):new mn(e=h),typeof o!="function"&&u.pointRadius(o),s):e},s.pointRadius=function(h){return arguments.length?(o=typeof h=="function"?h:(u.pointRadius(+h),+h),s):o},s.digits=function(h){if(!arguments.length)return n;if(h==null)n=null;else{const b=Math.floor(h);if(!(b>=0))throw new RangeError(`invalid digits: ${h}`);n=b}return e===null&&(u=new tn(n)),s},s.projection(t).digits(n).context(e)}const Jt=t=>()=>t;function go(t,{sourceEvent:e,target:n,transform:o,dispatch:a}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:a}})}function de(t){t.stopImmediatePropagation()}function Vt(t){t.preventDefault(),t.stopImmediatePropagation()}function _o(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function vo(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function nn(){return this.__zoom||Ot}function yo(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function So(){return navigator.maxTouchPoints||"ontouchstart"in this}function wo(t,e,n){var o=t.invertX(e[0][0])-n[0][0],a=t.invertX(e[1][0])-n[1][0],u=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a),s>u?(u+s)/2:Math.min(0,u)||Math.max(0,s))}function Eo(){var t=_o,e=vo,n=wo,o=yo,a=So,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],h=250,b=Qn,k=An("start","zoom","end"),U,x,C,q=500,N=150,X=0,Z=10;function d(i){i.property("__zoom",nn).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",tt).on("dblclick.zoom",G).filter(a).on("touchstart.zoom",J).on("touchmove.zoom",dt).on("touchend.zoom touchcancel.zoom",yt).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}d.transform=function(i,l,r,f){var g=i.selection?i.selection():i;g.property("__zoom",nn),i!==g?B(i,l,r,f):g.interrupt().each(function(){I(this,arguments).event(f).start().zoom(null,typeof l=="function"?l.apply(this,arguments):l).end()})},d.scaleBy=function(i,l,r,f){d.scaleTo(i,function(){var g=this.__zoom.k,y=typeof l=="function"?l.apply(this,arguments):l;return g*y},r,f)},d.scaleTo=function(i,l,r,f){d.transform(i,function(){var g=e.apply(this,arguments),y=this.__zoom,w=r==null?K(g):typeof r=="function"?r.apply(this,arguments):r,p=y.invert(w),S=typeof l=="function"?l.apply(this,arguments):l;return n(L(D(y,S),w,p),g,s)},r,f)},d.translateBy=function(i,l,r,f){d.transform(i,function(){return n(this.__zoom.translate(typeof l=="function"?l.apply(this,arguments):l,typeof r=="function"?r.apply(this,arguments):r),e.apply(this,arguments),s)},null,f)},d.translateTo=function(i,l,r,f,g){d.transform(i,function(){var y=e.apply(this,arguments),w=this.__zoom,p=f==null?K(y):typeof f=="function"?f.apply(this,arguments):f;return n(Ot.translate(p[0],p[1]).scale(w.k).translate(typeof l=="function"?-l.apply(this,arguments):-l,typeof r=="function"?-r.apply(this,arguments):-r),y,s)},f,g)};function D(i,l){return l=Math.max(u[0],Math.min(u[1],l)),l===i.k?i:new le(l,i.x,i.y)}function L(i,l,r){var f=l[0]-r[0]*i.k,g=l[1]-r[1]*i.k;return f===i.x&&g===i.y?i:new le(i.k,f,g)}function K(i){return[(+i[0][0]+ +i[1][0])/2,(+i[0][1]+ +i[1][1])/2]}function B(i,l,r,f){i.on("start.zoom",function(){I(this,arguments).event(f).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(f).end()}).tween("zoom",function(){var g=this,y=arguments,w=I(g,y).event(f),p=e.apply(g,y),S=r==null?K(p):typeof r=="function"?r.apply(g,y):r,M=Math.max(p[1][0]-p[0][0],p[1][1]-p[0][1]),v=g.__zoom,_=typeof l=="function"?l.apply(g,y):l,E=b(v.invert(S).concat(M/v.k),_.invert(S).concat(M/_.k));return function(z){if(z===1)z=_;else{var c=E(z),T=M/c[2];z=new le(T,S[0]-c[0]*T,S[1]-c[1]*T)}w.zoom(null,z)}})}function I(i,l,r){return!r&&i.__zooming||new F(i,l)}function F(i,l){this.that=i,this.args=l,this.active=0,this.sourceEvent=null,this.extent=e.apply(i,l),this.taps=0}F.prototype={event:function(i){return i&&(this.sourceEvent=i),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(i,l){return this.mouse&&i!=="mouse"&&(this.mouse[1]=l.invert(this.mouse[0])),this.touch0&&i!=="touch"&&(this.touch0[1]=l.invert(this.touch0[0])),this.touch1&&i!=="touch"&&(this.touch1[1]=l.invert(this.touch1[0])),this.that.__zoom=l,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(i){var l=pt(this.that).datum();k.call(i,this.that,new go(i,{sourceEvent:this.sourceEvent,target:d,type:i,transform:this.that.__zoom,dispatch:k}),l)}};function j(i,...l){if(!t.apply(this,arguments))return;var r=I(this,l).event(i),f=this.__zoom,g=Math.max(u[0],Math.min(u[1],f.k*Math.pow(2,o.apply(this,arguments)))),y=wt(i);if(r.wheel)(r.mouse[0][0]!==y[0]||r.mouse[0][1]!==y[1])&&(r.mouse[1]=f.invert(r.mouse[0]=y)),clearTimeout(r.wheel);else{if(f.k===g)return;r.mouse=[y,f.invert(y)],ce(this),r.start()}Vt(i),r.wheel=setTimeout(w,N),r.zoom("mouse",n(L(D(f,g),r.mouse[0],r.mouse[1]),r.extent,s));function w(){r.wheel=null,r.end()}}function tt(i,...l){if(C||!t.apply(this,arguments))return;var r=i.currentTarget,f=I(this,l,!0).event(i),g=pt(i.view).on("mousemove.zoom",S,!0).on("mouseup.zoom",M,!0),y=wt(i,r),w=i.clientX,p=i.clientY;Gn(i.view),de(i),f.mouse=[y,this.__zoom.invert(y)],ce(this),f.start();function S(v){if(Vt(v),!f.moved){var _=v.clientX-w,E=v.clientY-p;f.moved=_*_+E*E>X}f.event(v).zoom("mouse",n(L(f.that.__zoom,f.mouse[0]=wt(v,r),f.mouse[1]),f.extent,s))}function M(v){g.on("mousemove.zoom mouseup.zoom",null),Zn(v.view,f.moved),Vt(v),f.event(v).end()}}function G(i,...l){if(t.apply(this,arguments)){var r=this.__zoom,f=wt(i.changedTouches?i.changedTouches[0]:i,this),g=r.invert(f),y=r.k*(i.shiftKey?.5:2),w=n(L(D(r,y),f,g),e.apply(this,l),s);Vt(i),h>0?pt(this).transition().duration(h).call(B,w,f,i):pt(this).call(d.transform,w,f,i)}}function J(i,...l){if(t.apply(this,arguments)){var r=i.touches,f=r.length,g=I(this,l,i.changedTouches.length===f).event(i),y,w,p,S;for(de(i),w=0;w<f;++w)p=r[w],S=wt(p,this),S=[S,this.__zoom.invert(S),p.identifier],g.touch0?!g.touch1&&g.touch0[2]!==S[2]&&(g.touch1=S,g.taps=0):(g.touch0=S,y=!0,g.taps=1+!!U);U&&(U=clearTimeout(U)),y&&(g.taps<2&&(x=S[0],U=setTimeout(function(){U=null},q)),ce(this),g.start())}}function dt(i,...l){if(this.__zooming){var r=I(this,l).event(i),f=i.changedTouches,g=f.length,y,w,p,S;for(Vt(i),y=0;y<g;++y)w=f[y],p=wt(w,this),r.touch0&&r.touch0[2]===w.identifier?r.touch0[0]=p:r.touch1&&r.touch1[2]===w.identifier&&(r.touch1[0]=p);if(w=r.that.__zoom,r.touch1){var M=r.touch0[0],v=r.touch0[1],_=r.touch1[0],E=r.touch1[1],z=(z=_[0]-M[0])*z+(z=_[1]-M[1])*z,c=(c=E[0]-v[0])*c+(c=E[1]-v[1])*c;w=D(w,Math.sqrt(z/c)),p=[(M[0]+_[0])/2,(M[1]+_[1])/2],S=[(v[0]+E[0])/2,(v[1]+E[1])/2]}else if(r.touch0)p=r.touch0[0],S=r.touch0[1];else return;r.zoom("touch",n(L(w,p,S),r.extent,s))}}function yt(i,...l){if(this.__zooming){var r=I(this,l).event(i),f=i.changedTouches,g=f.length,y,w;for(de(i),C&&clearTimeout(C),C=setTimeout(function(){C=null},q),y=0;y<g;++y)w=f[y],r.touch0&&r.touch0[2]===w.identifier?delete r.touch0:r.touch1&&r.touch1[2]===w.identifier&&delete r.touch1;if(r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0)r.touch0[1]=this.__zoom.invert(r.touch0[0]);else if(r.end(),r.taps===2&&(w=wt(w,this),Math.hypot(x[0]-w[0],x[1]-w[1])<Z)){var p=pt(this).on("dblclick.zoom");p&&p.apply(this,arguments)}}}return d.wheelDelta=function(i){return arguments.length?(o=typeof i=="function"?i:Jt(+i),d):o},d.filter=function(i){return arguments.length?(t=typeof i=="function"?i:Jt(!!i),d):t},d.touchable=function(i){return arguments.length?(a=typeof i=="function"?i:Jt(!!i),d):a},d.extent=function(i){return arguments.length?(e=typeof i=="function"?i:Jt([[+i[0][0],+i[0][1]],[+i[1][0],+i[1][1]]]),d):e},d.scaleExtent=function(i){return arguments.length?(u[0]=+i[0],u[1]=+i[1],d):[u[0],u[1]]},d.translateExtent=function(i){return arguments.length?(s[0][0]=+i[0][0],s[1][0]=+i[1][0],s[0][1]=+i[0][1],s[1][1]=+i[1][1],d):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},d.constrain=function(i){return arguments.length?(n=i,d):n},d.duration=function(i){return arguments.length?(h=+i,d):h},d.interpolate=function(i){return arguments.length?(b=i,d):b},d.on=function(){var i=k.on.apply(k,arguments);return i===k?d:i},d.clickDistance=function(i){return arguments.length?(X=(i=+i)*i,d):Math.sqrt(X)},d.tapDistance=function(i){return arguments.length?(Z=+i,d):Z},d}function on(t,e,n){const o=t.slice();return o[38]=e[n],o}function an(t,e,n){const o=t.slice();return o[41]=e[n],o}function rn(t){let e,n=t[41]+"",o,a;return{c(){e=V("option"),o=ot(n),this.h()},l(u){e=$(u,"OPTION",{});var s=Y(e);o=it(s,n),s.forEach(R),this.h()},h(){e.__value=a=t[41],e.value=e.__value},m(u,s){Pt(u,e,s),P(e,o)},p(u,s){s[0]&4&&n!==(n=u[41]+"")&&Pe(o,n),s[0]&4&&a!==(a=u[41])&&(e.__value=a,e.value=e.__value)},d(u){u&&R(e)}}}function sn(t){let e,n=t[38]+"",o,a;return{c(){e=V("option"),o=ot(n),this.h()},l(u){e=$(u,"OPTION",{});var s=Y(e);o=it(s,n),s.forEach(R),this.h()},h(){e.__value=a=t[38],e.value=e.__value},m(u,s){Pt(u,e,s),P(e,o)},p(u,s){s[0]&8&&n!==(n=u[38]+"")&&Pe(o,n),s[0]&8&&a!==(a=u[38])&&(e.__value=a,e.value=e.__value)},d(u){u&&R(e)}}}function un(t){let e,n;return e=new qn({props:{FIPScode:t[4]}}),{c(){In(e.$$.fragment)},l(o){Cn(e.$$.fragment,o)},m(o,a){Rn(e,o,a),n=!0},p(o,a){const u={};a[0]&16&&(u.FIPScode=o[4]),e.$set(u)},i(o){n||(jt(e.$$.fragment,o),n=!0)},o(o){me(e.$$.fragment,o),n=!1},d(o){Fn(e,o)}}}function bo(t){let e,n,o,a,u,s,h,b,k,U=t[0]*100+"",x,C,q,N,X,Z,d,D,L,K,B,I,F,j,tt,G,J,dt,yt,i,l,r,f,g,y,w,p,S,M=t[2],v=[];for(let c=0;c<M.length;c+=1)v[c]=rn(an(t,M,c));let _=t[3],E=[];for(let c=0;c<_.length;c+=1)E[c]=sn(on(t,_,c));let z=t[1]&&un(t);return{c(){e=V("div"),n=V("div"),o=V("h4"),a=ot("Filter"),u=ft(),s=V("div"),h=V("input"),b=ft(),k=V("span"),x=ot(U),C=ot("%"),q=ft(),N=V("div"),X=V("h4"),Z=ot("Search"),d=ft(),D=V("div"),L=V("label"),K=ot("State:"),B=ft(),I=V("select"),F=V("option"),j=ot("Select a state");for(let c=0;c<v.length;c+=1)v[c].c();tt=ft(),G=V("div"),J=V("label"),dt=ot("County:"),yt=ft(),i=V("select"),l=V("option"),r=ot("Select a county");for(let c=0;c<E.length;c+=1)E[c].c();f=ft(),z&&z.c(),g=ft(),y=V("div"),this.h()},l(c){e=$(c,"DIV",{class:!0});var T=Y(e);n=$(T,"DIV",{class:!0});var m=Y(n);o=$(m,"H4",{});var W=Y(o);a=it(W,"Filter"),W.forEach(R),u=ht(m),s=$(m,"DIV",{class:!0});var mt=Y(s);h=$(mt,"INPUT",{type:!0,min:!0,max:!0,step:!0}),b=ht(mt),k=$(mt,"SPAN",{});var Rt=Y(k);x=it(Rt,U),C=it(Rt,"%"),Rt.forEach(R),mt.forEach(R),m.forEach(R),q=ht(T),N=$(T,"DIV",{class:!0});var st=Y(N);X=$(st,"H4",{});var gt=Y(X);Z=it(gt,"Search"),gt.forEach(R),d=ht(st),D=$(st,"DIV",{});var St=Y(D);L=$(St,"LABEL",{for:!0});var Gt=Y(L);K=it(Gt,"State:"),Gt.forEach(R),B=ht(St),I=$(St,"SELECT",{id:!0});var Ft=Y(I);F=$(Ft,"OPTION",{});var Zt=Y(F);j=it(Zt,"Select a state"),Zt.forEach(R);for(let H=0;H<v.length;H+=1)v[H].l(Ft);Ft.forEach(R),St.forEach(R),tt=ht(st),G=$(st,"DIV",{});var bt=Y(G);J=$(bt,"LABEL",{for:!0});var Wt=Y(J);dt=it(Wt,"County:"),Wt.forEach(R),yt=ht(bt),i=$(bt,"SELECT",{id:!0});var xt=Y(i);l=$(xt,"OPTION",{});var Nt=Y(l);r=it(Nt,"Select a county"),Nt.forEach(R);for(let H=0;H<E.length;H+=1)E[H].l(xt);xt.forEach(R),bt.forEach(R),st.forEach(R),T.forEach(R),f=ht(c),z&&z.l(c),g=ht(c),y=$(c,"DIV",{id:!0,class:!0}),Y(y).forEach(R),this.h()},h(){Q(h,"type","range"),Q(h,"min","0"),Q(h,"max","0.5"),Q(h,"step","0.01"),Q(s,"class","box svelte-xs18s7"),Q(n,"class","box svelte-xs18s7"),Q(L,"for","state-select"),F.__value="",F.value=F.__value,F.disabled=!0,F.selected=!0,Q(I,"id","state-select"),Q(J,"for","county-select"),l.__value="",l.value=l.__value,l.disabled=!0,l.selected=!0,Q(i,"id","county-select"),Q(N,"class","box svelte-xs18s7"),Q(e,"class","panel svelte-xs18s7"),Q(y,"id","chart-container"),Q(y,"class","svelte-xs18s7")},m(c,T){Pt(c,e,T),P(e,n),P(n,o),P(o,a),P(n,u),P(n,s),P(s,h),xe(h,t[0]),P(s,b),P(s,k),P(k,x),P(k,C),P(e,q),P(e,N),P(N,X),P(X,Z),P(N,d),P(N,D),P(D,L),P(L,K),P(D,B),P(D,I),P(I,F),P(F,j);for(let m=0;m<v.length;m+=1)v[m]&&v[m].m(I,null);P(N,tt),P(N,G),P(G,J),P(J,dt),P(G,yt),P(G,i),P(i,l),P(l,r);for(let m=0;m<E.length;m+=1)E[m]&&E[m].m(i,null);Pt(c,f,T),z&&z.m(c,T),Pt(c,g,T),Pt(c,y,T),w=!0,p||(S=[Lt(h,"change",t[16]),Lt(h,"input",t[16]),Lt(I,"change",t[6]),Lt(I,"change",t[5]),Lt(i,"change",t[7])],p=!0)},p(c,T){if(T[0]&1&&xe(h,c[0]),(!w||T[0]&1)&&U!==(U=c[0]*100+"")&&Pe(x,U),T[0]&4){M=c[2];let m;for(m=0;m<M.length;m+=1){const W=an(c,M,m);v[m]?v[m].p(W,T):(v[m]=rn(W),v[m].c(),v[m].m(I,null))}for(;m<v.length;m+=1)v[m].d(1);v.length=M.length}if(T[0]&8){_=c[3];let m;for(m=0;m<_.length;m+=1){const W=on(c,_,m);E[m]?E[m].p(W,T):(E[m]=sn(W),E[m].c(),E[m].m(i,null))}for(;m<E.length;m+=1)E[m].d(1);E.length=_.length}c[1]?z?(z.p(c,T),T[0]&2&&jt(z,1)):(z=un(c),z.c(),jt(z,1),z.m(g.parentNode,g)):z&&(xn(),me(z,1,1,()=>{z=null}),Tn())},i(c){w||(jt(z),w=!0)},o(c){me(z),w=!1},d(c){c&&R(e),Ne(v,c),Ne(E,c),c&&R(f),z&&z.d(c),c&&R(g),c&&R(y),p=!1,Pn(S)}}}function zo(t,e,n){let o,a,u,s,h,b,k,U,x="",C="",q=[],N=[],X=[],Z,d=0,D,L,K,B,I,F,j,tt,G,J;kn(async()=>{(await Le("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/unemployment-x.csv")).map(_=>({..._,ECF_log10:+_.ECF_log10})),o=await fe("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/counties-albers-10m.json");const M="https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/kailingraham/my-app/static/map_gdf.json";fe(M).then(_=>{n(12,k=_.features.map(E=>({id:E.properties.FIPS,ECF:Math.round(E.properties.ECF*100)/100,ECF_log10:Math.round(E.properties.ECF_log10*100)/100,ECF_log10_std:E.properties.ECF_log10_std,migrant_pop:Math.round(E.properties.MIG_PERCENT*100)/100})))}),await fe(M),n(14,q=await Le("https://raw.githubusercontent.com/paulsizaire/paulsizaire.github.io/paul/my-app/static/uscounties.csv")),n(8,a=topojson.feature(o,o.objects.counties)),new Map(a.features.map(_=>[_.properties.name,_])),Z=new Map(a.features.map(_=>[_.id,_])),u=topojson.feature(o,o.objects.states),n(9,s=new Map(u.features.map(_=>[_.properties.name,_]))),Array.from(s.keys()),n(10,h=topojson.mesh(o,o.objects.states,(_,E)=>_!==E))});async function dt(p){if(x=p.currentTarget.value,!x){n(3,X=[]);return}const S=q.filter(M=>M.state_name===x);S.sort(function(M,v){return Ae(M.county,v.county)}),n(3,X=S.map(M=>M.county))}function yt(p){if(x=p.target.value,x===""){g();return}const S=s.get(x);f(),l(S)}function i(p){n(1,C=p.target.value);const S=q.find(v=>v.county===C&&v.state_name===x);if(C===""){g(),f();return}const M=Z.get(S.county_fips);M?n(4,L=S.county_fips):n(4,L=""),f(),r(M)}function l(p){const S=K.bounds(p),[[M,v],[_,E]]=S,z=(M+_)/2,c=(v+E)/2,T=.7/Math.max((_-M)/B,(E-v)/I);G.transition().duration(750).call(J.transform,Ot.translate(B/2,(I-200)/2).scale(T).translate(-z,-c))}function r(p){b.g.selectAll("path").filter(function(S){return S!==p}).attr("fill-opacity",.3)}function f(){b.g.selectAll("path").attr("fill-opacity",1)}function g(){G.transition().duration(750).call(J.transform,Ot.translate(j,tt).scale(F))}function y(p,{id:S=H=>H.id,value:M=()=>{},mg_pop:v=H=>H.migrant_pop,title:_,format:E,domain:z,range:c=$e,width:T=window.innerWidth,height:m=window.innerHeight-50,projection:W,features:mt,featureId:Rt=H=>H.id,borders:st,outline:gt=W&&W.rotate?{type:"Sphere"}:null,unknown:St="#ccc",fill:Gt="white",stroke:Ft="white",strokeLinecap:Zt="round",strokeLinejoin:bt="round",strokeWidth:Wt,strokeOpacity:xt,padding:Nt=150}={}){const H=At(p,S),zt=At(p,M).map(A=>A==null?NaN:+A),Ie=At(p,v).map(A=>A==null?NaN:+A),Ht=new Vn(H.map((A,O)=>[A,O])),Kt=At(mt.features,Rt);z===void 0&&(z=[Xn(zt),Yn(zt),Un(zt)]),console.log(z);const Mt=$n().domain(z).range(c).interpolate($e);if(Mt.unknown&&St!==void 0&&Mt.unknown(St),_===void 0)E=Mt.tickFormat(100,E),_=(A,O)=>`${A.properties.name}
${E(zt[O])}`;else if(_!==null){const A=_,O=At(p,lt=>lt);_=(lt,Tt)=>A(lt,O[Tt])}if(m===void 0)if(gt===void 0)m=400;else{const[[A,O],[lt,Tt]]=en(W.fitWidth(T,gt)).bounds(gt),ct=Math.ceil(Tt-O),Fe=Math.min(Math.ceil(lt-A),ct);W.scale(W.scale()*(Fe-1)/Fe).precision(.2),m=ct}const Dt=en(W),ut=On("svg").attr("width",T).attr("height",m).attr("viewBox",[0,0,T,m]).attr("style","width: 100%; height: auto; height: intrinsic;");gt!=null&&ut.append("path").attr("fill",Gt).attr("stroke","currentColor").attr("d",Dt(gt));const se=ut.append("g"),_t=Dt.bounds(mt),Sn=(T-Nt*2)/(_t[1][0]-_t[0][0]),wn=(m-Nt*2)/(_t[1][1]-_t[0][1]),Qt=Math.max(Sn,wn),Ce=(T-Qt*(_t[1][0]+_t[0][0]))/2,Re=(m-Qt*(_t[1][1]+_t[0][1]))/2-100;se.selectAll("path").data(mt.features).join("path").attr("fill",(A,O)=>{const lt=zt[Ht.get(Kt[O])],Tt=Ie[Ht.get(Kt[O])],ct=qe(Mt(lt));return Tt>=d?ct:Ve(ct.r,ct.g,ct.b,.1)}).attr("d",Dt).on("click",En).append("title").text((A,O)=>_(A,Ht.get(Kt[O]))),st!=null&&ut.append("path").attr("pointer-events","none").attr("fill","none").attr("stroke",Ft).attr("stroke-linecap",Zt).attr("stroke-linejoin",bt).attr("stroke-width",Wt).attr("stroke-opacity",xt).attr("d",Dt(st)).attr("id","state-boundaries"),ut.attr("width",T).attr("height",m).attr("viewBox",[0,0,T,m]).attr("style","width: 100%; height: auto; height: intrinsic;");const ue=Eo().scaleExtent([1,8]).extent([[0,0],[T,m]]).on("zoom",A=>{se.attr("transform",A.transform),ut.select("#state-boundaries").attr("transform",A.transform)});ut.call(ue),ut.call(ue.transform,Ot.translate(Ce,Re).scale(Qt));function En(A,O){l(O),r(O);const lt=O.id.slice(0,2);x=u.features.find(ct=>ct.id===lt).properties.name,n(1,C=O.properties.name),document.getElementById("state-select").value=x,document.getElementById("county-select").value=C,dt({currentTarget:{value:x}}),i({target:{value:C}})}return{node:ut.node(),scales:{color:Mt},path:Dt,width:T,height:m,g:se,V:zt,M:Ie,Im:Ht,If:Kt,svg:ut,zoom:ue,color:Mt,initialScale:Qt,offsetX:Ce,offsetY:Re}}function w(){d=Nn(this.value),n(0,d)}return t.$$.update=()=>{if(t.$$.dirty[0]&5888&&k&&s&&a&&h&&n(11,b=y(k,{id:p=>p.id,value:p=>p.ECF_log10,mg_pop:p=>p.migrant_pop,domain:[.253002,.946957,1.303415,1.574287,3.306079],range:["#005194","#70a8ca","#e0e0e0","#dcab77","#a42900"],features:a,borders:h,width:1400,height:900})),t.$$.dirty[0]&10240&&b&&(n(13,U=b.node),G=b.svg,K=b.path,B=b.width,J=b.zoom,I=b.height,F=b.initialScale,j=b.offsetX,tt=b.offsetY,n(15,D=b.color),pt("#chart-container").node().appendChild(U)),t.$$.dirty[0]&16384&&q.length>0){q.sort(function(S,M){return Ae(S.state_name,M.state_name)});const p=new Set;q.forEach(S=>{p.add(S.state_name)}),n(2,N=Array.from(p))}t.$$.dirty[0]&34817&&b&&d!==null&&d!==void 0&&b.g.selectAll("path").attr("fill",(p,S)=>{const M=b.V[b.Im.get(b.If[S])],v=b.M[b.Im.get(b.If[S])],_=qe(D(M));return v>=d?_:Ve(_.r,_.g,_.b,.1)})},[d,C,N,X,L,dt,yt,i,a,s,h,b,k,U,q,D,w]}class ko extends bn{constructor(e){super(),zn(this,e,zo,bo,Mn,{},null,[-1,-1])}}export{ko as default};
